<!DOCTYPE html>
<!-- saved from url=(0050)http://tour.interpark.com/iframe/ConciergeSMSPopup -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title></title>
    <link rel="stylesheet" href="./ui(1).css">
    <link rel="stylesheet" href="./ui_module.css">
    <link rel="stylesheet" href="./ui_common.css">
    <script type="text/javascript" src="./jquery-1.10.2.min.js.download"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body style="">

    <div class="popup-module butler-consult">
        <h1 class="tit-h1">여행톡집사 상담 이용안내</h1>
        <div class="pop-dBody">
            <h2 class="sub-tit">
                전화 연결 없이,
                <span class="point02">예약 상담까지 간편하게 톡!</span>
            </h2>
            <p class="txt">
                마음은 급하고, 상담 전화 연결은 안되고! 많이 답답하셨죠?
                <br>여행 예약부터 예약 변경, 취소 등 모든 상담을 이제 채팅으로 하실 수 있습니다.
            </p>
            <h2 class="sub-tit">
                365일 24시간
                <span class="point02">실시간으로 톡!</span>
            </h2>
            <p class="txt">
                고객님이 주로 문의주신 질문에 대해 자동으로 실시간 답변해 드리며,
                <br>상품문의, 예약변경/취소와 같은 상세한 상담이 필요한 경우 상담사가 직접 확인, 답변 드립니다.
                <br>* 단, 상담사 응대는 시간제한이 있습니다.
            </p>
            <span class="img-wrap">
                <img src="./img_botEx.gif" alt="여행톡집사 화면 스크린샷">
            </span>
            <strong class="tit-h3">
                여행톡집사 상담은
                <span class="point01">인터파크 투어 모바일 앱</span>으로 이용하실 수 있습니다.
            </strong>
            <form class="ui-box1">
                <legend>핸드폰 번호 입력</legend>
                <select class="bsc1" title="휴대전화 앞번호를 선택하세요" id="selectNum1">
                    <option>010</option>
                    <option>011</option>
                    <option>016</option>
                    <option>017</option>
                    <option>018</option>
                    <option>019</option>

                </select>
                <span class="dash">-</span>
                <input type="text" class="ipt-text" maxlength="4" id="txtNum2" title="휴대전화 중간번호를 입력하세요">
                <span class="dash">-</span>
                <input type="text" class="ipt-text" maxlength="4" id="txtNum3" title="휴대전화 끝번호를 입력하세요">
                <button type="button" class="btn1 btn-enter">SMS로 링크받기</button>
            </form>
        </div>
        <button type="button" class="pop-close">닫기</button>
    </div>
    <script type="text/javascript">
        var parenthost = "";

        $j(document).ready(function () {
            initSet();
        })

        // 진입점
        function initSet() {
            $j('.btn-enter').bind('click', function () {
                sendSMS();
            })
            $j('.pop-close').bind('click', function () {
                window.parent.postMessage("message", parenthost)
            })
        }


        // SMS 보내기
        function sendSMS() {
            var _ajaxUrl = "/api/ConciergeSMS/";
            var num1 = $j("#selectNum1");
            var num2 = $j("#txtNum2");
            var num3 = $j("#txtNum3");

            if (num2.val() == "") {
                alert("휴대폰번호를 입력해주세요.");
                num2.focus();
                return;
            }

            if (num3.val() == "") {
                alert("휴대폰번호를 입력해주세요.");
                num3.focus();
                return;
            }


            if (!parseInt(num2.val())) {
                alert("휴대폰번호를 숫자로 입력해주세요.");
                num2.val("");
                num2.focus();
                return;
            }

            if (!parseInt(num3.val())) {
                alert("휴대폰번호를 숫자로 입력해주세요.");
                num3.val('');
                num3.focus();
                return;
            }
            
            var _message = "인터파크 투어에 궁금한 게\r\n";
            _message += "있으시면 언제든 물어보세요.\r\n";
            _message += "인터파크투어 여행톡집사\r\n";
            _message += "https://goo.gl/0GCltO";

            var phoneno = $j.trim(num1.val() + num2.val() + num3.val());
            var model = {
                /// 받는 사람
                ReceivePhoneNumber: phoneno,
                /// 보내는 사람
                SendPhoneNumber: "15883443",
                /// 보내는 메세지
                SendMessage: _message
            };

            $j.ajax({
                url: _ajaxUrl,
                type: "POST",
                data: model,
                success: sendSMSCallback,
                error: function (error) { },
                async: false
            });
        }

        // sms보내기 콜백
        function sendSMSCallback(result) {
            var obj = JSON.parse(result);
            switch (obj.STATUS) {
                case "S":
                    alert("휴대폰으로 URL을 전송했습니다.");
                    callParentClose();
                    break;
                case "F":
                    alert("관리자에게 문의하세요.");
                    break;
                case "O":
                    alert("동일 번호로 10회 이상 발송 제한됩니다.");
                    $j('#loading').hide();
                    break;
            }
        }

        function callParentClose() {
            window.parent.postMessage("message", parenthost)
        }

        function receiveMessage(event) {
            var obj = JSON.parse(event.data);
            parenthost = obj.m;
        }

        if (window.addEventListener) {
            window.addEventListener("message", receiveMessage, false);
        }
        else {
            window.attachEvent("onmessage", receiveMessage);
        }


    </script>



</body></html>