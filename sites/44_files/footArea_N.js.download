
var isFootMain = "tour";

if(window.location.href == "http://tour.interpark.com/" 
|| window.location.href == "http://tour.interpark.com" 
|| window.location.href.indexOf("http://tour.interpark.com/default.aspx") > -1 
|| window.location.href.indexOf("http://tour.interpark.com/?") > -1)
{
    isFootMain = "tour_main";
}   

function WriteFooterArea()
{
    var isHTTP = window.location.href.indexOf("http://") != -1;
    var isHTTPS = window.location.href.indexOf("https://") != -1;
    var openServerPrefix = "http://openimage.interpark.com";
    var sslServerPrefix = "https://sslimage.interpark.com";

    var mobileRegEx = new RegExp(/iPhone|iPod|iPad|Mobile|UP.Browser|Android|BlackBerry|Windows CE|Nokia|webOS|Opera Mini|SonyEricsson|Opera Mobi|Windows Phone|IEMobile|POLARIS|SKT|LG|LGPlayer|Bada|Kindle|Wii/ig);
    var isApp = (navigator.userAgent.toLowerCase().indexOf("mobile_app") > -1) ? true : false;
    var isMobile = navigator.userAgent.toLowerCase().match(mobileRegEx);
    
    //총액요금 문구 미노출 설정    
    var isVisible = true;    
    if(window.location.href.toLowerCase().indexOf("http://tour.interpark.com/housing/") > -1
     || window.location.href.toLowerCase().indexOf("http://hotel.interpark.com/") > -1
     || window.location.href.toLowerCase().indexOf("http://tour.interpark.com/domestic/") > -1
     || window.location.href.toLowerCase().indexOf("http://eurail.interpark.com/") > -1
     || window.location.href.toLowerCase().indexOf("http://tourpkg.interpark.com/") > -1){
        isVisible =  false;
    }
    
    var str = '';
    
    str += '<div id="divBottom_Banner" class="ui-foot-banner"></div>';	    
    str += '<div class="common">';	
    str += '	<ul>';		
    str += '	<li class="first-child"><a href="http://www.interpark.com/gate/info/protect_privacy.html">개인정보처리방침</a></li>';
    str += '	<li><a href="http://www.interpark.com/gate/info/protect_privacy_youth.html">청소년보호정책</a></li>';
    str += '	<li><a href="http://www.interpark.com/gate/info/mem_clause.html">이용약관</a></li>';
    str += '	<li><a href="http://tour.interpark.com/company/companyOutsidecovenant.aspx">여행약관</a></li>';
    str += '	<li><a href="http://www.0404.go.kr/" target="_blank">해외안전여행 정보</a></li>';		
    str += '	<li><a href="http://www.interpark.com/int/communication/CompanyInfo.do?_method=list&brd=cpNews&sc.brdNo=943660">IR</a></li>';
    str += '	<li><a href="http://www.interpark.com/int/communication/CompanyInfo.do?_method=initial">회사소개</a></li>';
    str += '	<li><a href="http://incorp.interpark.com/member/MemberGoodService.do?_method=GoodServiceChk">우수회원제도</a></li>';
    str += '	<li><a href="http://tour.interpark.com/customer/noticeview.aspx?seq=1507">보험가입내역</a></li>';	
    str += '	<li class="ceo"><a href="javascript:;" onclick="openAskCEOPop();">CEO에게 말해요</a></li>';
    str += '	</ul>';
    str += '</div>';
    str += '<div class="common-spot">';	
    str += '<div class="i-tour">';
	str += '	<strong class="name">인터파크투어 고객센터</strong>	<br>';
	str += '	06611 서울 서초구 강남대로 447 남서울빌딩<br>';
	str += '	대표전화 : 1588-3443 <span class="point01">(해외항공전용 : 02-3479-4399)</span><br>';
	//str += '	팩스 : 02-755-1047';
	str += '</div>';
    str += '<div class="i-int">';
	str += '    <strong class="name">(주) 인터파크</strong>	<a href="javascript:OpenCommunicationViewPop();"><img src="http://openimage.interpark.com/tourpark/tour/index/btn_footer_txt.gif" style="vertical-align:middle;" alt="사업자정보확인"></a><br>';
	str += '    <address>06168 서울 강남구 삼성로 512 삼성동빌딩 10층</address><br> 대표이사 : 이상규 | 사업자등록번호 : 214-87-98889 <br> 관광사업자 등록번호 : 제2014-42호 | 통신판매업신고 : 2014-서울강남-02549';
	str += '</div>';

	str += '<div class="comment">';
	if (isVisible)
	{
	    str += '    <p class="changeNotice">';
	    str += '    <img alt="Notice" src="//openimage.interpark.com//tourpark/tour/common/icon/icon_notice.gif"> 항공권 또는 항공권이 포함된 상품의 경우, 표시되는 상품요금은 예상 유류할증료와 제세공과금이 포함된 가격이며, 발권일/환율 등에 따라 변동될 수 있습니다. </p>';
	}
	str += '    <p> 개인정보보호책임자 : CPO@interpark.com l 개인정보보유기간 : 회원탈퇴시까지 이메일주소 무단수집거부 </p>';
	str += '    <p> Copyright (c) INTERPARK All rights reserved. </p>';
	str += '</div>';

    str += '	<div id="divFootGroupInfo" class="selc"><a id="aFootGroupInfo" class="tit" href="javascript:;" onclick="ShowFootBranchInfo()">Family Site</a> <a class="btn" id="aFootGroupGo" href="javascript:FootBranchOpenUrl();">GO</a>';
    str += '		<ul>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://incorp.interpark.com/communication/CompanyInfo.do?_method=initial&wid1=footer&wid2=company">(주)인터파크</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.imarketkorea.com/?wid1=footer&wid2=group&wid3=imk">아이마켓코리아</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.interparklogistics.com/?wid1=footer&wid2=group&wid3=intlogi">인터파크로지스틱스</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.bluesquare.kr/Info/Bluesquare_Info.asp?m_menu=bluesquare&s_menu=info&wid1=footer&wid2=group&wid3=theatre">인터파크시어터</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.bluesquare.kr/?wid1=footer&wid2=group&wid3=bluesquare">블루스퀘어</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.lottecardartcenter.com/?wid1=footer&wid2=group&wid3=artcenter">아트센터</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.guard365.co.kr">가디언</a></li>';
    str += '			<li><a href="javascript:;" onclick="SelectFootGroupInfo(this)" data-link="http://www.officeplus.com">큐브릿지</a></li>';
    str += '		</ul>';
    str += '	</div>';
    str += '	<img class="qrcode" src="http://openimage.interpark.com/tourpark/tour/index/qrcode.gif" alt="인터파크 투어 모바일 앱" />';
    str += '    <a target="_blank" href="http://www.smartoutbound.or.kr/guide/html/guideInfo4.do?menu_code=0000000016">';
    str += '        <img class="rightLogo" src="http://openimage.interpark.com/tourpark/tour/index/footer_rightLogo.png" alt="국외여행상품 정보제공 표준안 참여여행사">';
    str += '    </a>';
    str += '	<iframe src="' + (isHTTPS ? "https://" : "http://") + 'tour.interpark.com/global/iframe/wiselog.html" scrolling="no" frameborder="0" style="width:0px;height:0px;display:none;" title="와이즈로그 아이프레임" ></iframe>';
    
    if (!isApp && isMobile)
        str += '	<div class="view-mobile"><a href="#" onclick="javascript:switchPager.action(); return false;">모바일버전으로 보기</a></div>'

    str += '</div>';

    if (isHTTPS) {
        while (str.indexOf(openServerPrefix) != -1) {
            str = str.replace(openServerPrefix, sslServerPrefix);
        }
    }

    document.write(str);
    
    SetFootBannerKeyWord();
}

WriteFooterArea();

//키워드링크 정보 조회
function SetFootBannerKeyWord()
{	
    var isHTTPS = window.location.href.indexOf("https://") != -1;
    
	var script = document.createElement('script');
	
    script.src = (isHTTPS ? 'https' : 'http') + '://tour.interpark.com/exporter/banner/TourMain.aspx?method=FooterBanner'
    document.getElementsByTagName('head')[0].appendChild(script);    
}

// 키워드링크 데이터바인딩
function SetFooterBannerData(data)
{   
    if(data.BandBanner != null && data.BandBanner.length > 0)
    {
        var img = "";              
        
        for(i = 1 ; i < data.BandBanner.length ; i++)
        {   
            img += '<a id="a_Bottom_Banner" href="' + replaceFootBannerSSLHttps(getFootBannerParamAddUrl(data.BandBanner[i].LinkURL,i)) + '" target="' + (data.BandBanner[i].IsNewWindow == "Y" ? "_blank" : "_self") + '">';
            img += '    <img ga:ca="PWC-Main" ga:ac="푸터배너" id="img_Bottom_Banner" src="http://tourimage.interpark.com/Sites/Tour/ByTemplate/098/' + data.BandBanner[i].ImageURL + '" alt="' + data.BandBanner[i].Keyword + '" />';
		    img += '</a>';
        }
        
        document.getElementById("divBottom_Banner").innerHTML = ReplaceFootBannerImageUrl(ReplaceFootTourImageUrl(img)); 
           
        //if(data.BandBanner[0].ImageURL != "")
        //    document.getElementById("divBottom_Banner").setAttribute("style",ReplaceFootTourImageUrl("background : url('http://tourimage.interpark.com/Sites/Tour/ByTemplate/098/" + data.BandBanner[0].ImageURL + "') repeat-x scroll 0 top"));    

        if (data.BandBanner[0].ImageURL != "")
            document.getElementById("divBottom_Banner").style.background = ReplaceFootTourImageUrl("url('http://tourimage.interpark.com/Sites/Tour/ByTemplate/098/" + data.BandBanner[0].ImageURL + "') repeat-x scroll 0 top");
    }
}

function getFootBannerParamAddUrl(linkURL,index)
{
    try{
        if(linkURL.indexOf("?") > 0)
            return linkURL + "&mbn=" + isFootMain + "&mln=main_footerbn_" + index;
        else
            return linkURL + "?mbn=" + isFootMain + "&mln=main_footerbn_" + index;
    }catch(e)
    {
        return linkURL;
    }
}

function replaceFootBannerSSLHttps(str)
{
    var isHTTPS = window.location.href.indexOf("https://") != -1;
    var openServerPrefix = "http://";
    var sslServerPrefix = "https://";
    if(isHTTPS) {
        while (str.indexOf(openServerPrefix) != -1) {
            str = str.replace(openServerPrefix, sslServerPrefix);
        }
    }
    return str;
}


function ReplaceFootBannerImageUrl(str)
{
    var isHTTPS = window.location.href.indexOf("https://") != -1;
    var openServerPrefix = "http://openimage.interpark.com";
    var sslServerPrefix = "https://sslimage.interpark.com";

    if (isHTTPS) {
        while (str.indexOf(openServerPrefix) != -1) {
            str = str.replace(openServerPrefix, sslServerPrefix);
        }
    }
    return str;
}

// 이미지 경로에 ssl 적용
function ReplaceFootTourImageUrl(str)
{
    var isHTTPS = window.location.href.indexOf("https://") != -1;
    var openServerPrefix = "http://tourimage";
    var sslServerPrefix = "https://tourimage";
    
    if (isHTTPS) {
        while (str.indexOf(openServerPrefix) != -1) {
            str = str.replace(openServerPrefix, sslServerPrefix);
        }
    }
    
    return str;
}

function ShowFootBranchInfo(type)
{
    var obj = document.getElementById("divFootGroupInfo");
    var className = obj.className;
    
    switch(type)
    {
        case "on":
            obj.className = "selc on";
        break;
        case "off":
            obj.className = "selc";
        break;
        default:
            if(className == "selc")
                obj.className = "selc on";
            else
                obj.className = "selc";
        break;
    }
}

function FootBranchOpenUrl()
{
    alert("Family Site를 선택해 주세요.");
}

function SelectFootGroupInfo(obj)
{
    document.getElementById("aFootGroupInfo").innerText = obj.innerText;
    document.getElementById("aFootGroupGo").href = obj.getAttribute("data-link");
    document.getElementById("aFootGroupGo").target = "_blank";
    
    ShowFootBranchInfo("off");
}

//사업자등록번호 팝업
function OpenCommunicationViewPop()
{
    var url = "http://www.ftc.go.kr/info/bizinfo/communicationViewPopup.jsp?wrkr_no=2148798889";
    window.open(url, "communicationViewPopup", "width=750, height=700;");
}

//----------------------------------------------
// 페이스북 리마켓팅코드 - 전체 호출 (20140331)//기존꺼
//var _fbqEx = 0;
//function facebookRemarketing()
//{   
//    //debugger;
//    if ((typeof window._fbq == "undefined" || window._fbq == null) && _fbqEx == 0)
//    {
//        _fbqEx = 1;

//        try {

//            (function () {            
//                var _fbq = window._fbq || (window._fbq = []);
            
//                if (!_fbq.loaded) {
//                    var fbds = document.createElement('script');
//                    fbds.async = true;
//                    fbds.src = '//connect.facebook.net/en_US/fbds.js';
//                    var s = document.getElementsByTagName('script')[0];
//                    s.parentNode.insertBefore(fbds, s);
//                    _fbq.loaded = true;
//                }
//                _fbq.push(['addPixelId', '640497739331232']);            
//            })();
//            window._fbq = window._fbq || [];
//            window._fbq.push(['track', 'PixelInitialized', {}]);

//            _fbqEx = 2;

//        } catch (e) {
//            _fbqEx = 0;
//        }
//    }
//}
//facebookRemarketing();

//페이스북 트레킹 추가 201600707
var _fbqEx = 0;
function facebookRemarketing() {

    if ((typeof window.fbq == "undefined" || window.fbq == null) && _fbqEx == 0) {
        _fbqEx = 1;

        try {

            !function (f, b, e, v, n, t, s) {
                if (f.fbq) return; n = f.fbq = function () {
                    n.callMethod ?
                n.callMethod.apply(n, arguments) : n.queue.push(arguments)
                }; if (!f._fbq) f._fbq = n;
                n.push = n; n.loaded = !0; n.version = '2.0'; n.queue = []; t = b.createElement(e); t.async = !0;
                t.src = v; s = b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t, s)

                fbq('init', '640497739331232');

            }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');



            _fbqEx = 2;

        } catch (e) {
            _fbqEx = 0;
        }
    }

    fbq('track', "PageView");

}

facebookRemarketing();

//----------------------------------------------



var switchPager = {
//    baseURL: 'http://tour.interpark.com/m',
    baseURL: 'http://mtour.interpark.com',
    callbackFunc: null,

    setPrepareURL: function(callback) {
        switchPager.callbackFunc = (typeof(callback) == 'function') ? callback : null;
    },

    action: function() {
    
        setCookie("hmobile", 'Y', -1);  // 모바일에서 PC이동 쿠키 삭제
        
        var customURL = (typeof(switchPager.callbackFunc) == 'function') ? switchPager.callbackFunc() : '';
        location.href = (customURL != '') ? customURL : switchPager.baseURL;
    }
};


function openAskCEOPop()
{
    //로그인 여부 체크
    if (getLoginYN() != "Y") {
        if (confirm("로그인을 하셔야 등록 가능합니다.\n로그인 하시겠습니까?")) {
            goLogin();
        }
    }
    else {

        var popupUrl = "http://tour.interpark.com/global/popup/AskCEO.aspx";
        window.open(popupUrl, "_Popup", "width=625,height=650,scrollbars=no,directories=no,location=no,menubar=no,resizable=no,status=no,toolbar=no");
    }
}

//-------------------------------------------------

//<!-- BS CTS TRACKING SCRIPT V.20 / 13778 : CTS / DO NOT ALTER THIS SCRIPT. -->
//<!-- COPYRIGHT (C) 2002-2016 BIZSPRING INC. L4AD ALL RIGHTS RESERVED. -->
(function(b,s,t,c,k){b[k]=s;b[s]=b[s]||function(){(b[s].q=b[s].q||[]).push(arguments)};  var f=t.getElementsByTagName(c)[0],j=t.createElement(c);j.async=true;j.src='//fs.bizspring.net/fs4/l4cts.v4.2.interpark.js';f.parentNode.insertBefore(j,f);})(window,'_tcts_m',document,'script','BSAnalyticsObj');
_tcts_m('13778','MOTHER');
//<!-- END OF BS CTS TRACKING SCRIPT -->


try {
    var cosem_Request = function () {
        var cookieDay = 7; // 쿠키설정 날짜
        var accountCode = "220";
        this.getParameter = function (name) {
            var rtnval = '';
            var nowAddress = unescape(location.href);
            var parameters = (nowAddress.slice(nowAddress.indexOf('?') + 1, nowAddress.length)).split('&');
            for (var i = 0 ; i < parameters.length ; i++) {
                var varName = parameters[i].split('=')[0];
                if (varName.toUpperCase() == name.toUpperCase()) {
                    rtnval = parameters[i].split('=')[1]; break;
                };
            }; return rtnval;
        }
        this.imageURL = function () {
            var cosem = this.getParameter('cosemkid');
            var cosem_kid = "";
            var cosemProtocol = (location.protocol == "https:") ? "https:" : "http:";
            if (cosem.length == 0)
                cosem = this.getParameter('cosem');
            if (cosem.length > 0) {
                cosem_kid = "&kid=" + cosem + "&referer=" + encodeURIComponent(location.href);
                var image = new Image();
                image.src = cosemProtocol + "//" + "tracking.icomas.co.kr" + "/Script/script3.php" + "?aid=" + accountCode + "&ctime=" + cookieDay + cosem_kid;
            };
        }; this.tracking = function () { var obj = this; setTimeout(function () { obj.imageURL(); }, 10); };
    };
    var cosemRequest = new cosem_Request();
    cosemRequest.tracking();
} catch (e) {
    console.log('comas log error');
}

/* 절대 지우지 마세요 (마더브레인)*/
setCookie('_TRK_ASID_13778', 'temp', -1);
setCookie('_TRK_AUIDA_13778', 'temp', -1);
setCookie('_TRK_AUIDA_13779', 'temp', -1);
/* 절대 지우지 마세요 */

// Add ETM Scripts
try {
    var scriptElement = document.createElement("script");
    scriptElement.type = "text/javascript";
    scriptElement.src = "//es-script.interpark.com/get";

    document.getElementsByTagName("body")[0].appendChild(scriptElement);
} catch (e) { }