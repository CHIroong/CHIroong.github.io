var _WWW_DOMAIN = "http://www.ohmynews.com";
var _MEMBER_DOMAIN = "https://member.ohmynews.com";

var _MINI_STYLE = "";
if ($("#std").length == 1) {
    //_MINI_STYLE = "style='position:relative'";
}

if (location.href.toLowerCase().indexOf("/nws_web/ohmystar/at_pg") > -1) {
    _MINI_STYLE = "style='position:relative'";
}

if (location.href.toLowerCase().indexOf("/nws_web/ohmystar/at_pg_w") > -1) {
//    _MINI_STYLE = "";
}


var pTOP_HTML = "";
pTOP_HTML += "<div class=\"mini_header\" " + _MINI_STYLE + ">";
pTOP_HTML += "  <div class=\"mini_gnb_area\">";
pTOP_HTML += "  	<ul class=\"mini_gnb\">";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이뉴스');\">오마이뉴스</a></li>";
pTOP_HTML += "    	<li><a href=\"http://star.ohmynews.com\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이스타');\">오마이스타</a></li>";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"/NWS_Web/View/mov_pg.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이TV');\">오마이TV</a></li>";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"/NWS_Web/OhmyPhoto/index.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이포토');\">오마이포토</a></li>";
pTOP_HTML += "    	<li><a href=\"http://book.ohmynews.com/\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이북');\">오마이북</a></li>";
pTOP_HTML += "    	<li><a href=\"http://blog.ohmynews.com\" target=\"_blank\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '오마이블로그');\">오마이블로그</a></li>";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"/NWS_Web/CSch/Lecture/offLine_list.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '시민기자학교');\">시민기자학교</a></li>";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"/NWS_Web/tenman/index.aspx?CMPT_CD=PT001\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '10만인클럽');\">10만인클럽</a></li>";
pTOP_HTML += "    	<li><a href=\"http://www.moi.so/\" target=\"_blank\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '모이');\">모이</a></li>";
pTOP_HTML += "    	<li><a href=\""+_WWW_DOMAIN+"/NWS_Web/Help/srv/h_mobile.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '모바일');\">모바일</a></li>";
pTOP_HTML += "		</ul>";
pTOP_HTML += "	</div>";
pTOP_HTML += "	<ul class=\"mem_wrap\">";

if (getCookie("MemCd") == "-1" || getCookie("MemCd") == "" || getCookie("MemCd") == null || getCookie("MemCd") == "undefined")
{
    pTOP_HTML += "		<li class=\"first\"><a id=\"aMemLogin\" href=\""+_MEMBER_DOMAIN+"/NWS_Web/Mem/mem_login.aspx?goUrl="+ escape(location.href) +"\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '로그인');\">로그인</a></li>";
    pTOP_HTML += "		<li><a id=\"aMemModify\" href=\""+_MEMBER_DOMAIN+"/NWS_Web/Mem/Mem_Choice.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '회원가입');\">회원가입</a></li>";
}else{
    pTOP_HTML += "		<li class=\"first\"><a id=\"aMemLogin\" href=\""+_WWW_DOMAIN+"/NWS_Web/Common/Pages/LogOut.aspx?returl=" + escape(location.href) +"\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '로그아웃');\">로그아웃</a></li>";
    pTOP_HTML += "		<li><a id=\"aMemModify\" href=\""+_MEMBER_DOMAIN+"/NWS_Web/Mem/Mem_Upd_Check.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '정보수정');\">정보수정</a></li>";
    pTOP_HTML += "		<li id=liMyRoom><a href=\""+_WWW_DOMAIN+"/NWS_Web/i_room/memo/memo_index.aspx?path=top\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '내방');\">내방</a></li>";
    pTOP_HTML += "		<li class=\"alim\"><a href=\""+_WWW_DOMAIN+"/NWS_Web/i_room/Closed/notify_list.aspx\" onclick=\"GA_Event('상단TNB', 'tnb_클릭', '알림');\">알림<span></span></a></li>";    
}

pTOP_HTML += "	</ul> ";                                                                                                                                                  
pTOP_HTML += "</div>";

document.write(pTOP_HTML);

$(function() {

    if (getCookie("MemCd") == "-1" || getCookie("MemCd") == "" || getCookie("MemCd") == null || getCookie("MemCd") == "undefined") { // 로그인 안됨
        //        $('#aMemLogin').attr('href', _MEMBER_DOMAIN + '/NWS_Web/Mem/mem_login.aspx?goUrl=' + escape(location.href));
        //        $('#aMemLogin').html("로그인");

        //        $('#aMemModify').attr('href', _MEMBER_DOMAIN + '/NWS_Web/Mem/Mem_Choice.aspx');
        //        $('#aMemModify').html("회원가입");

        $('#liMyRoom').hide();
        $('.alim').hide();
    }
    else {
        //        $('#aMemLogin').attr('href', _WWW_DOMAIN + '/NWS_Web/Common/Pages/LogOut.aspx?returl=' + escape(location.href));
        //        $('#aMemLogin').html("로그아웃");

        //        $('#aMemModify').attr('href', _MEMBER_DOMAIN + '/NWS_Web/Mem/Mem_Upd_Check.aspx');
        //        $('#aMemModify').html("정보수정");
        //        $('#aMemModify').attr('target', '_blank');

        if ($("#hdnWeather").length == 0 && location.href.indexOf("kweather.ohmynews.com") == -1) {
            if (location.href.indexOf('http://ojsfile.ohmynews.com') < 0 && location.href.indexOf('http://ojsadm.ohmynews.com') < 0) {
                $.ajax({
                    type: "GET",
                    url: "/NWS_Web/Common/Pages/CommAjaxFunction.aspx?std=notifycnt",
                    success: function(msg) {
                        msg = msg.replace("/NWS_Web/", "http://www.ohmynews.com/NWS_Web/");
                        $('.alim').html(msg);
                    },
                    error: function(error) {
                    }
                });
            }
        }
    }

    // 스쿨일때 내방, 알림 없애기
    if (location.href.toUpperCase().indexOf('/NWS_WEB/SCH/') > -1 || location.href.toUpperCase().indexOf('/NWS_WEB/INDEX_SCHOOL.ASPX') > -1 || location.href.toUpperCase().indexOf('HTTP://SCHOOL.OHMYNEWS.COM/') > -1) {
        $('.mem_wrap').find('li:eq(2)').hide();
        $('.mem_wrap').find('li:eq(3)').hide();
    }

//    if ($("#std").length == 0) {
//        // 상단메뉴 더보기
//        $("body").click(function(event) {
//            if ($(event.target).closest('.top_select').length) {
//                $(event.target).closest('.top_select').next().toggle();
//            }
//            else {
//                $('.sel_box').hide();
//            }
//        });
////    }

    if (window.navigator.appName == "Microsoft Internet Explorer") {
        // This is an IE browser. What mode is the engine in?
        if (document.documentMode) // IE8 or later
        {
            // 7인 경우 스타일 변경
            // .newstitle h3.tit_subject letter-spacing: -0.1em; -> -0.3em
            if (document.documentMode == 7) {
                if ($(".titl > a").length)
                    $(".titl > a").css("letter-spacing", "-0.2em");
                if ($(".tit_subject").length)
                    $(".tit_subject").css("letter-spacing", "-0.3em");
            }
        }
    }
});