function Froala() {
	var _this = this;
	
	_this.env = {
		mention: {}
	}

	var boardCd = $('#boardCd').val();
	var boardSn = $('#boardSn').val();
	var configMaxContentLength = $('#configMaxContentLength').val() * 1;

	// froala 초기화
	_this.initFroala = function() {
		var froalaId = 'froala-editor';
		var datasource = [];

		if (IS_LOGIN) {
			// 댓글 언급 사용자 목록 가져오기.
			_this.getCommenterList(function(result){
				var data = result;
				datasource = data;
				_this.env.mention = data;
			});
		}

		if (datasource.length > 0){
			var names = $.map(datasource, function (value, i) {
				var user = {};
				user.id = value.userId;
				user.name = value.nick;
				user.nick = value.nick;
				user.displayNick = value.nick;
				user.isImage = true;
				if(value.nickImageUrl == "") {
					user.isImage = false;
				} else if(value.nickImageUrl == null) {
					user.isImage = false;
				}
				user.nickImageUrl = value.nickImageUrl;
				
				if (user.isImage) {
					user.displayNick = '<img src="' + CDN_URL + '/file' + value.nickImageUrl + '?gif=true" alt="'+value.nick+'">';	
				}
				
				return user;
			});

			var config = {
				at: "@",
				data: names,
				displayTpl: '<li data-id="${id}" data-nick="${nick}" data-nick-image-url="' + CDN_URL + '/file${nickImageUrl}?gif=true" data-is-image="${isImage}">${displayNick}</li>',
				limit: 10,
				callbacks: {
					beforeInsert: function(value, $li, e){
						var html = '<span class="data" data-id="' + $li.data('id') + '"></span>';
						
						if ($li.data('is-image')) {
							html += '@<img data-role="highlite" data-nick-id="'+ $li.data('id') + '" data-nick="'+$li.data('nick')+'" src="' + $li.data('nick-image-url') + '" alt="'+ $li.data('nick') +'">님';	
						} else {
							html += '@<span data-role="highlite" data-nick-id="'+ $li.data('id') + '" class="nick">'+ $li.data('nick') + '</span>님';
						}
						return html;
					}
				}
			}
		}

		var options = {
			key: 'XC5D5F3D3gC7B7D7E6E4F3F2I3I2B4zddf1oeF4ckD-17==',
			language: 'ko',
			heightMin: 75,
			heightMax: 250,
			toolbarButtons: [],
			toolbarButtonsMD: [],
			toolbarButtonsSM: [],
			toolbarButtonsXS: [],
			end_with_newline: true,
			imagePasteProcess: false,
			htmlAllowedTags: ['span', 'p', 'img', 'br'],
			htmlAllowedAttrs: ['class', 'data-nick-id', 'data-role', 'data-id', 'alt', 'data-nick'],
			pasteAllowedStyleProps: [],
			pastePlain: true,
			placeholderText: '댓글을 입력하세요.',
			pasteAllowLocalImages: false,
			imagePaste: false,
			imagePasteProcess: false,
			imageUpload: false,
			videoUpload: false,
			videoResize: false,
			imageResize: false
		};

		if (configMaxContentLength != 0) {
			options.charCounterMax = configMaxContentLength;
		}

		if (isMobile.any) {
			options.paragraphFormatSelection = false;
		}

		// Initialize editor.
		if (datasource.length > 0){
			$('#'+froalaId).on('froalaEditor.initialized', function (e, editor) {
				editor.$el.atwho(config);
				editor.events.on('keydown', function (e) {
				if (e.which == $.FroalaEditor.KEYCODE.ENTER && editor.$el.atwho('isSelecting')) {
					return false;
				}}, true);
			}).froalaEditor(options);
		} else {
			$('#'+froalaId).froalaEditor(options);
		}
	};

	// 댓글 언급 사용자 목록 가져오기
	_this.getCommenterList = function(callback) {
		var url = API_HOST + '/board/'+boardCd+'/'+boardSn+'/commenter';
		var params = {};

		$.ajax({
			url: url,
			type: 'GET',
			async: false,
			data: params,
			success: function(result) {
				if (callback != undefined) {
					callback(result);
				}
			},
			error: function(result) {
				console.log("댓글 언급 사용자 목록 가져오기 실패!!");
			}
		});
	};

}
var froala = new Froala();