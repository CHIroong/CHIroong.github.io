

//alert("Mobile HealthChosun");
//if (navigator.userAgent.match(/iPhone|iPad|Mobile|UP.Browser|Android|BlackBerry|Windows CE|Nokia|webOS|Opera Mini|SonyEricsson|opera mobi|Windows Phone|IEMobile|POLARIS/) != null){
//alert("1");
if (navigator.userAgent.match(/iPad/) == null && navigator.userAgent.match(/iPhone|Mobile|UP.Browser|Android|BlackBerry|Windows CE|Nokia|webOS|Opera Mini|SonyEricsson|opera mobi|Windows Phone|IEMobile|POLARIS/) != null){			  

var m_hostName = window.location.hostname;
var m_href = window.location.href;
var m_host = window.location.host;
var m_port = window.location.port;
var m_pathname = window.location.pathname;
var m_search = window.location.search;
var m_protocoal = window.location.protocol;

var ref = document.referrer;

//alert(ref);

var ref_name = "";


if(ref.indexOf("naver")>0)
{
	ref_name ="ref=na";
} 
else if(ref.indexOf("daum")>0)
{
	ref_name ="ref=da";
}
else if(ref.indexOf("google")>0)   //17.11.14  추가
{
	ref_name ="ref=go";
}
else if(ref.indexOf("facebook")>0)   //17.11.14  추가
{
	ref_name ="ref=fa";
}
else
{ 

	if(ref != "")
	{
			ref_name = "ref="+ref.substring(9,14);
			//ref_name = "ref="+m_href;
	} else {
			ref_name = "ref=no_ref";
	}
}



function SetCookie(cKey, cValue)  // name,pwd
{
    //var date = new Date();     
    //var validity = 2;
    //date.setDate(date.getDate() + validity); // 만료시점 : 오늘날짜+2 설정
    // 쿠키 저장
    //document.cookie = cKey + '=' + escape(cValue) + ';expires=' + date.toGMTString();
    //document.cookie = cKey + '=' + escape(cValue) + ';expires=' + date.toGMTString() + ';path=/;domain=health.chosun.com;';    
    document.cookie = cKey + '=' + escape(cValue) + ';expires=0;path=/;domain=health.chosun.com;';    
    
}


function DelCookie(cKey) {
    // 동일한 키(name)값으로
    // 1. 만료날짜 과거로 쿠키저장
    // 2. 만료날짜 설정 않는다. 
    //    브라우저가 닫힐 때 제명이 된다    

    var date = new Date(); // 오늘 날짜 
    var validity = -1;
    date.setDate(date.getDate() + validity);
    document.cookie =
          cKey + "=;expires=" + date.toGMTString();
}


function GetCookie(cKey) {
    var allcookies = document.cookie;
     //alert(allcookies);  
    var cookies = allcookies.split("; ");
    for (var i = 0; i < cookies.length; i++) {
        var keyValues = cookies[i].split("=");
        if (keyValues[0] == cKey) {
            return unescape(keyValues[1]);
        }
    }
    return "";
}
  var mDir = m_pathname.split('/');
	var m_pathname = window.location.pathname;
	var b=m_pathname.split('/'); 
	var mFileName=b[b.length-1].split('.')[0].split('html'); 
      
switch(mDir[1])
{	  
   case 'site':			
      mSite(mFileName[0]);
      break;
	case 'magazine':			
      mMagazine(mFileName[0]);
      break;
	case 'bestdoctor':			
		  mDoctor(mFileName[0]);
		  break;
   case 'news':
      mNews(mFileName[0]);      
      break;
   case 'healthyLife':
   		mColumn(mFileName[0]);
      break;
   case 'counseling':
   		mCounseling(mFileName[0]);
      break;
   case 'healingTour':  // 모바일 환경에서 헬스조선닷컴 pc버전 서비스로 바로 접근
      break;  
   case 'healthcheck':  // 모바일 환경에서 헬스조선닷컴 pc버전 서비스로 바로 접근
      break;
   case 'event':  // 모바일 환경에서 헬스조선닷컴 pc버전 서비스로 바로 접근
      break;
	case 'rank':  // 모바일 환경에서 헬스조선닷컴 pc버전 서비스로 바로 접근
      break;
	case 'good_hospital':  // 모바일 환경에서 헬스조선닷컴 pc버전 좋은병원 서비스로 바로 접근
      break;
	case 'bh_clinic':  // 모바일 환경에서 헬스조선닷컴 pc버전 건강나무클리닉 서비스로 바로 접근
      break;
   case 'academy':  // 모바일 환경에서 헬스조선닷컴 pc버전 아카데미 서비스로 바로 접근
      break;
   case 'healthcareColumn':
   		healthcareColumn(mFileName[0]);
      break;
   case 'healthcare':  // 모바일 환경에서 헬스케어n pc버전 서비스로 바로 접근	
	  if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
		  location.href ="http://m.healthcaren.com/";
	   }     
      break;
   case 'healthcarenews':  // 모바일 환경에서 헬스케어n pc버전 서비스로 바로 접근	
	  if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
		  location.href ="http://m.healthcaren.com/";
	   }     
      break;
   case 'senior':  // 시니어 pc버전 서비스로 바로 접근
      break;
	case 'member':  // 모바일 환경에서 헬스조선닷컴 pc버전 서비스로 바로 접근
      break;
   default:
	  if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
		location.href ="http://m.health.chosun.com/";
		//location.href ="http://m.healthcaren.com/";
      }
}

	function mDoctor(n) {  
						if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	

							var ori_url = window.location.search;
							var page_url = window.location.href;
							var bd_path = window.location.pathname;
//alert(bd_path);
						if(bd_path == "/bestdoctor/" || "/bestdoctor/index.html" )
						{
							location.href = "http://m.health.chosun.com/bestdoctor/bestdoctor_main.jsp";  
						}
						else if(bd_path == "/bestdoctor/bestdoctor_list.jsp")
						{
							location.href = "http://m.health.chosun.com/bestdoctor/bestdoctor_list.jsp?"+ori_url;  
						}
						else if(ori_url == "")
						{
							location.href = "http://m.health.chosun.com/bestdoctor/bestdoctor_view.jsp?"+ref_name;  
						}
						else
						{
							location.href = "http://m.health.chosun.com/bestdoctor/bestdoctor_view.jsp"+ori_url+"&"+ref_name;  
						}

							
		 }      
		}	

function mMagazine(n) {  
						if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	

						//location.href = "http://m.health.chosun.com/magazine/guide.html";  
						location.href = "http://m.health.chosun.com/magazine/index.html";  
		 }      
		}	


function mSite(n) {  
					if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	
						var m_pathname = window.location.pathname;
						var b=m_pathname.split('/'); 
						var m_id=b[b.length-1].split('.')[0].split('html'); 

						var c = m_search.split('?');
						

						if(m_id == "")
						{
							location.href = "http://m.health.chosun.com/svc/news_view.html?"+ref_name;  
						}
						else
						{
							if(c.length >1)
							{
									location.href = "http://m.health.chosun.com/svc/news_view.html?contid="+m_id+"&"+c[1];  
							}
							else
							{
								location.href = "http://m.health.chosun.com/svc/news_view.html?contid="+m_id+"&"+ref_name;  
							}
							
						}
						
     }      
	}	
	


function mNews(n) {	
	switch(n)
	{
   case 'dailynews_view':      
					if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	

						var m_pathname = window.location.search;						
					  //location.href = "http://m.health.chosun.com/news/news_view.jsp"+m_pathname; 
					  location.href = "http://m.healthcaren.com/news/news_article_yong.jsp"+m_pathname; 
					}
   break;					
					
   case 'healthavi_view':            
					if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	
						
						var m_pathname = window.location.search;						
						

					if(m_pathname == "")
						{
							location.href = "http://m.health.chosun.com/news/healthavi_view.jsp?"+ref_name; 
						}
						else
						{
							location.href = "http://m.health.chosun.com/news/healthavi_view.jsp"+m_pathname+"&"+ref_name;  
						}
					}		
   break;								
       		
       
	}	
}


function mCounseling(n) {
	switch(n)
	{
   case 'deptview':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;

						if(m_pathname == "")
						{
							location.href = "http://m.health.chosun.com/counseling/deptview.jsp?"+ref_name; 
						}
						else
						{
							location.href = "http://m.health.chosun.com/counseling/deptview.jsp"+m_pathname+"&"+ref_name;  
						}

						
						//var m_pathname = window.location.search;
						//var mn_idx = m_pathname.split('&')[1];
						//var mn_idx = mn_idx.split('=')[1];
						//location.href = "http://m.healthcaren.com/column/column_article_yong.jsp?idx="+mn_idx;
					}   		      
    		break;  
			
			case 'deptview_pharmacist':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;

						if(m_pathname == "")
						{
							location.href = "http://m.health.chosun.com/counseling/deptview_pharmacist.jsp?"+ref_name; 
						}
						else
						{
							location.href = "http://m.health.chosun.com/counseling/deptview_pharmacist.jsp"+m_pathname+"&"+ref_name;  
						}
					}   		  
						
    		break;  

			case 'counseling_2016f':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;
						
							location.href = "http://m.health.chosun.com/counseling/counseling_main_2015.jsp?"+ref_name; 					
					}   		      
    		break;  

			case 'deptlist_pharmacist':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;
						
							location.href = "http://m.health.chosun.com/counseling/counseling_pharmacist.jsp?"+ref_name; 					
					} 
					      
    		break;  

   default:
		 if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
      location.href ="http://m.health.chosun.com/";
     }
      
	}		
}


function mColumn(n) {
	switch(n)
	{
   case 'column_view':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;
						

						if(m_pathname == "")
						{
							location.href = "http://m.health.chosun.com/column/column_view.jsp?"+ref_name; 
						}
						else
						{
							location.href = "http://m.health.chosun.com/column/column_view.jsp"+m_pathname+"&"+ref_name;  
						}

						
						//var m_pathname = window.location.search;
						//var mn_idx = m_pathname.split('&')[1];
						//var mn_idx = mn_idx.split('=')[1];
						//location.href = "http://m.healthcaren.com/column/column_article_yong.jsp?idx="+mn_idx;
					}   		      
    		break;     		  
   default:
		 if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
      location.href ="http://m.health.chosun.com/";
     }
      
	}		
}




function healthcareColumn(n) {

	switch(n)
	{
   case 'column_view':
				if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){
						var m_pathname = window.location.search;
						location.href = "http://m.healthcaren.com/column/column_article_yong.jsp"+m_pathname; 
						
						//var m_pathname = window.location.search;
						//var mn_idx = m_pathname.split('&')[1];
						//var mn_idx = mn_idx.split('=')[1];
						//location.href = "http://m.healthcaren.com/column/column_article_yong.jsp?idx="+mn_idx;
					}   		      
    		break;     		  
   default:
		 if(GetCookie('mobileHealthChosun_key') != 'pcVersionCookie'){	   
      location.href ="http://m.healthcaren.com/";
     }
      
	}		
}


}