var ta="undefined"!=typeof window&&window.ta||{},define,require;ta.rollupAmdShim=ta.rollupAmdShim||function(){function e(e,i){var t,o,d,f;for(t=0;e&&e.length&&t<e.length;++t)m[e[t]]=!0;for(t=0;i&&i.length&&t<i.length;++t)w[i[t]]=!0;var l,u;if(y&&window._dummyDefine&&window._dummyDefine.isDummyDefine&&(l=window._dummyDefine.pendingDefinitions,window._dummyDefine=null,define=null),"undefined"!=typeof require&&require.isDummyRequire){u=require.pendingRequirements;var a=require.pendingConfigs;if(a&&a.length)for(t=0;t<a.length;t++)f=a[t],r.config.apply(null,f);require=null}if("function"==typeof define&&define.isTaRollupShim||(E="function"==typeof define?define:null,define=n),"function"==typeof require&&require.isTaRollupShim||(O="function"==typeof require?require:null,require=r),l&&l.length)for(t=0;t<l.length;t++)o=l[t],n.apply(null,o);if(u&&u.length)for(t=0;t<u.length;t++)d=u[t],r.apply(null,d)}function n(e,r,t,d){var f,l,a=[];if("function"==typeof r&&void 0===t&&void 0===d&&(t=r,r=[]),"string"==typeof e&&"object"==typeof r&&"function"==typeof t){if(D.hasOwnProperty(e)||v[e]&&v[e].deps)return;if(l=i(r,a))try{f=t.apply(null,l),u(e,f)}catch(e){L("Error in require callback: ",e)}else o(a,{deps:r,cb:t,defname:e},n.depLoader)}else{if(E)return E(e,r,t,d);L("invalid args for AMD define: "+typeof e+", "+typeof r+", "+typeof t)}}function r(e,r,d,f){var l=null;if("string"==typeof e&&"function"!=typeof r){try{l=i([e]),!l&&O&&(l=[O(e,r,d,f)])}catch(e){}if(!l)throw t(e);return l[0]}if("object"==typeof e&&"function"==typeof r){var u=[];if(l=i(e,u))try{r.apply(null,l)}catch(e){L("Error in require callback: ",e)}else o(u,{deps:e,cb:r,eb:"function"==typeof d&&d},n.depLoader)}else{if(O)return O(e,r,d,f);L("invalid args for AMD require: "+typeof e+", "+typeof r+". Expected either a string-literal singular dependency (i.e. synchronous) or an array of dependencies with a callback function (i.e. async).")}}function i(e,n){var r,i,t,o,d=[];for(r=0;r<e.length;++r)if(i=e[r],o=null,i)if(D.hasOwnProperty(i))o=D[i],d.push(o);else if(w[i]){for(t=i.split("/"),"underscore"===t[0]&&(t[0]="_"),o="undefined"!=typeof window&&window;t.length>1&&o;o=o[t.shift()]);t.length>0&&o&&(o=o[t[0]]||o[t[0].toLowerCase()]),o?(D[i]=o,d.push(o)):n.push(i)}else n&&n.push(i);else d.push(null);if(d.length===e.length)return d}function t(e){var n,r,i,t,o="Missing immediately required dependency: "+e;for(n=0;n<10;n++){var d=v[e];if(!d){o+=" (not specified)";break}if(d.error){o+=" ("+d.error+")";break}if(e=null,t=d.deps)for(r=0;r<t.length;r++)if(i=t[r],!D.hasOwnProperty(i)){e=i;break}if(!e)break;o+=" -> "+e}var f=new Error(o);return y&&!window.IS_DEBUG||!g||y&&null===window.require.caller&&/^R|react$/.test(e)||g.error(f),f}function o(e,n,t){var u,a,s,p,c,h,y,g=[],m=[],w=[];n.deps=n.deps||[],n.defname&&(p=v[n.defname],v[n.defname]=n,p&&p!==n&&p.needers&&p.needers.length&&(n.needers=(p.needers||[]).concat(n.needers||[])));for(var c=0;c<e.length;c++)u=e[c],h=u.lastIndexOf("!"),h>=0?(g.push(u.substring(0,h)),m.push(u.substring(h+1))):(g.push(null),m.push(u));if(g=i(g,w),!g)return o(w,n);for(var c=0;c<e.length;c++)if(a=g[c],s=v[e[c]],!s&&!D.hasOwnProperty(e[c])){s={defname:e[c]},v[e[c]]=s;var E=f(s),P=l(s);E.error=P;try{if(a)a.load(m[c],r,E,{});else if(t)t(m[c],r,E,{});else{if(!O||O.taVer)throw new Error("no loader for AMD module '"+s.defname+"'");O([s.defname],E,P)}y=!0}catch(e){n.error=e,P(e)}}n.need=0;for(var c=0;c<e.length;c++)u=e[c],s=v[u],!s||D.hasOwnProperty(u)||s.error||(s.needers=s.needers||[],s.needers.push(n),n.need+=1);!n.need&&y&&(b.push(n),q||(q=setTimeout(d,0)))}function d(){var e,n,r,t;for(q=-1;b.length>0;){var d=b.shift();if(d)try{if(d.error){d.defname&&a(d.defname);continue}if(n=[],t="string"==typeof d.deps?[d.deps]:d.deps,e=i(t||[],n),n.length>0){o(n,d);continue}r=null,d.cb&&(r=d.cb.apply(null,e)),d.deps=[],d.cb=null,d.defname&&u(d.defname,r)}catch(e){L("Error propagating dependency resolutions: ",e)}}q=null}function f(e){return function(n){e.defname&&u(e.defname,n)}}function l(e){return function(n){e.defname&&(e.error="Error loading '"+e.defname+"': "+n,L(e.error),e.need=0,e.deps=[],a(e.defname))}}function u(e,n){if(!D[e]){var r=v[e];if(D[e]=n,delete v[e],m[e]){var i,t=e.split("/"),o=ta;for("ta"===t[0]&&t.shift();t.length>1;)i=t.shift(),o[i]||(o[i]={}),o=o[i];t.length>0&&(i=t.shift(),i in o||i.toLowerCase()in o||(o[i]=n,o[i.toLowerCase()]=n))}if(E&&E(e,[],s(n)),r)for(;r.needers&&r.needers.length>0;){var f=r.needers.shift();f.need-=1,f.need||b.push(f)}b.length&&!q&&(q=setTimeout(d,0))}}function a(e){var n=v[e];if(n){var r=n.eb;for(n.deps=null,n.cb=null,n.eb=null,n.error||(n.error="Error loading '"+n.defname+"'");n.needers&&n.needers.length>0;){var i=n.needers.shift();i.error="Failed to load AMD module '"+e+"' which is depended upon by '"+i.defname+"'",i.need>0&&(i.need=0,b.push(i)),y&&!window.IS_DEBUG||!g||g.error(i.error)}if(null!=r)try{r(n.error)}catch(e){}}b.length&&!q&&(q=setTimeout(d,0))}function s(e){return function(){return e}}function p(e){return e&&(e.indexOf("trjs!")!==-1||e.indexOf("trcss!")!==-1||e.indexOf("trhtml!")!==-1||e.indexOf("trdust!")!==-1)}function c(){return!("undefined"!=typeof ta&&ta.page&&ta.page.loadDeferred)}function h(){var e,n,r,t,o;if(q)return void setTimeout(h,0);if(P=!0,v&&c())for(e in v)if(v.hasOwnProperty(e)){if(n=v[e],t=[],o=[],p(n.defname))continue;if(v.hasOwnProperty("trjs!"+n.defname))continue;if(n.deps&&n.deps.length){for(r=0;r<n.deps.length;r++)p(n.deps[r])||t.push(n.deps[r]);if(i(t,o),0===o.length)continue}L("Page 'load' event fired but we have not resolved the '"+n.defname+"' AMD module"+(n.deps&&n.deps.length?" due to missing dependencies: "+o:""))}}var y="undefined"!=typeof window,g=y&&window.console||"undefined"!=typeof console&&console||void 0,m={},w={},v={},b=[],q=null,D={ta:ta},E=null,O=null,P=!1,L=function(e,n){if("undefined"!=typeof __SERVER__)throw n;g&&g.error.apply&&g.error.apply(g,arguments),g&&!g.error.apply&&g.error&&g.error([].slice.apply(arguments))};n.amd=!0,n.isTaRollupShim=!0,n.depLoader=function(){},n.depLoader.isDefault=!0,r.isTaRollupShim=!0,r.undef=function(e){delete D[e];var n=v[e];n&&n.deps&&(n.deps=[],n.cb=null,n.defname=null,delete v[e])},r.config=function(){O&&O.config&&O.config.apply(O,arguments)},r.defined=function(e){return!!D.hasOwnProperty(e)||!v.hasOwnProperty(e)&&(O&&O.defined&&O.defined(e))},r.parsed=function(e){return!!D.hasOwnProperty(e)||v[e]&&v[e].deps},r.specified=function(e){return!(!D.hasOwnProperty(e)&&!v[e])||O&&O.specified&&O.specified(e)},y&&window.addEventListener?window.addEventListener("load",h,!1):y&&window.attachEvent&&window.attachEvent("onload",h);var _={install:e,reportMissing:h,define:n,require:r,initializedModules:D,debug:function(){return{initializedModules:D,pendingModules:v,outer:{require:O,define:E},depLoader:n.depLoader}}};return _.install(),u("ta/rollupAmdShim",_),_}();
!function(e){function t(){var t=e.retrieve("filters.waitDialog"),a="mg s1 fatNotice";return e.isAttractionsRedesign2012()&&(a+=" fatNotice_2011"),t||(t=new e.overlays.CenteredOverlay({style:a,showCloseButton:!1,autoShow:!1}),t.inner.set("html","<b>"+JS_UpdatingYourResults+"</b>"),e.store("filters.waitDialog",t)),t}var a="MAP",n=function(a,n,o){ops={ajax:1,geo:modelGeoId},o&&(ops.Action=o),a&&(ops.o="a"+a),n&&(ops.sortOrder=n);var r=document.getElementById("ATTR_MAP");if(r&&r.moved){var l=r.map.mapCenter(),d=r.map.getZoom();e.store("attrMapCenter",l),e.store("attrMapZoom",d),ops.mc=l.lat()+","+l.lng(),ops.mz=r.map.getZoom()}"MAP"==o&&(t().show(),e.servlet.Attractions.movedMap(r.map.mapCenter().lat(),r.map.mapCenter().lng())),r&&r.map.replaceMarkers(ATTRACTION_MAP_MARKERS,"attraction",Object.merge({pid:1360,titlePID:1360},e.maps.MARKER_ATTRACTION))};rules["#EATERY_LIST_CONTENTS .js_pageLinks a"]=function(e){e.addEvent("click",pageList)},e.queueForLoad(function(){var t=document.getElementById("ATTR_MAP");t&&function(){t.getElement(".loading").show(),new Asset.javascript(mapsJs,{onload:function(){e.util.load.maps(o)}})}.delay(100)},"attraction map setup");var o=function(){var t=document.getElementById("ATTR_MAP");if(t){var a=window[t.id];GBrowserIsCompatible()&&a&&(t.empty(),t.map=new e.maps.Map(t,{origLat:a.lat,origLng:a.lng,zoom:a.zoom,smallMap:!0,typeControl:!1,homeIcon:!1}).addEvent("onMove",r).addEvent("onZoom",l).addEvent("onReset",d).addEvent("onMapUpdate",i).addEvent("homePinOnly",function(){var e=document.getElementById("ATTR_ZOOM_ERR");e&&e.show()}).addEvent("allPins",function(){var e=document.getElementById("ATTR_ZOOM_ERR");e&&e.hide()}),t.map.origOps=a,t.map.addMarkers(ATTRACTION_MAP_MARKERS,"attraction",Object.merge({pid:1360,titlePID:1360},e.maps.MARKER_ATTRACTION)),t.addEvent("onMapUpdate",i))}},r=function(e){if(!(e||this.getZoom()<10)){var t=document.getElementById("ATTR_MAP");t&&(t.moved=!0),n(null,null,a)}},l=function(e,t){var o=document.getElementById("ATTR_MAP");o&&(o.moved=!0),t<10||n(null,null,a)},d=function(){var t=document.getElementById("ATTR_MAP"),o=document.getElementById("add_location_input");t&&o&&(t.moved=!1,o.value=map_enteraddress,e.maps.Sidebar._clearLocationError(),t.map.replaceMarkers([],"location",[]),n(null,null,a))},i=function(){n(null,null,"")}}(ta);var onSelectLocationTypeAhead=function(e,t,a){var n,o=t?t.coords:null;if(o){var r=o.split(",");n=new ta.maps.Location(r[0],r[1])}return ta.maps.Sidebar.addLocation(null,a,n,t)};
!function(window){function _postInjektCall(){if(ta.has("reviews.ajax.post")){var e,r=ta.remove("reviews.ajax.post");for(e=0;e<r.length;e++)r[e]()}}function _callBeforePIC(e){var r=function(){var r=e.apply(this,arguments);return _postInjektCall(),r};return r}function _callAjaxFunByType(e,r){if(null==r)return void ta.util.error.ajaxFailure.partial("reviews:_callAjaxFunByType - null stype");var i=r.split(":");return 3==i.length?showReviewBlock(e,i[0],i[1],i[2]):void("reviewWithAnswers"==r||"reviewWithAnswersTrans"==r?_showReviewWithAnswers(e,"16",r):showReview(e,r))}function _fixMTHelpfulUrl2(e,r){var i=ta.id(e);if(null!=i){var n=i.getElement("input[name=returnTo]");if(n){var t=document.location.href;t.indexOf("#")>=0&&(t=t.substring(0,t.indexOf("#"))),n.value=t+"#mtreview_"+r}}}function _alignFirstReview(e,r){try{if(e.hasClass("first_aph"))e.removeClass("first_aph");else{var i=r.getElementsByClassName("inlineReviewUpdate");if(i&&i.length>0){var n=i[0];n.hasClass("first")&&n.removeClass("first")}}}catch(e){}}function _getAllElementsById(e,r){var i=new Array,n=document.getElementById(e);if(n){if(i.push(n),r.hasOwnProperty(e)){var t=n.id;n.id=n.id+"_NN";var a=document.getElementById(e);a&&i.push(a),n.id=t}}else ta.util.error.ajaxFailure.partial("reviews:_rpcParseReviewsBlock - element not found "+e);return i}function _rpcParseReviewsBlock(e){function r(){var e={};if(ta.has(NONNATIVE_DUP_LIST)){var r=ta.retrieve(NONNATIVE_DUP_LIST);for(var i in r)r[i]>1&&(e["review_"+i]=r[i])}return e}try{var i=document.createElement("div");i.innerHTML=e;for(var n=new Array,t=0;t<i.childNodes.length;t++){var a=i.childNodes[t];null!=a&&null!=a.id&&0==a.id.indexOf("review_")&&n.push(a)}0==n.length&&i.getElements("li").each(function(e){null!=e.id&&0==e.id.indexOf("review_")&&n.push(e)});for(var s=!1,l=r(),t=0;t<n.length;t++){var a=n[t],o=a.id,v=o.split("_");2==v.length&&isFinite(v[1])&&_fixMTHelpfulUrl2(a,v[1]),_getAllElementsById(a.id,l).each(function(e){s||(_alignFirstReview(e,a),s=!0),e.innerHTML=a.innerHTML})}}catch(e){ta.util.error.record(e,"_rpcParseReviewsBlock")}}function _updateResponseText(e,r){if(r&&""!=r){var i=document.getElementById("response_"+e);i&&(i.innerHTML=r)}}function _rpcParseReviews(reply){try{var reviews=eval("("+reply+")");if(reviews)for(var reviewCnt=reviews.length,i=0;i<reviewCnt;++i){var rid=reviews[i].id,r=ta.id("review_text_"+rid);if(r){r.set("html",reviews[i].body);var reviewTitle=ta.id("rn"+rid);reviewTitle||(reviewTitle=ta.id("r"+rid)),reviewTitle&&reviewTitle.set("html",reviews[i].title);var disclaimerTxt=reviews[i].disclaimer;""!=disclaimerTxt&&(elm=document.getElementById("disclaimer_"+rid+"_more"),elm&&(elm.innerHTML="<br />"+disclaimerTxt)),_updateResponseText(rid,reviews[i].response)}}}catch(e){ta.util.error.record(e,"rpcParseReviews",null,{"reviewCnt":reviewCnt})}}function _rpcParseReviewWithAnswers(reply){for(var reviewAnswers=eval("("+reply+")"),reviewAnswerCnt=reviewAnswers.length,i=0;i<reviewAnswerCnt;++i){var typeId=reviewAnswers[i].typeid;if(0==typeId){var rid=reviewAnswers[i].id,elm=document.getElementById("review_text_"+rid);elm.innerHTML=reviewAnswers[i].body;var disclaimerTxt=reviewAnswers[i].disclaimer;""!=disclaimerTxt&&(elm=document.getElementById("disclaimer_"+rid+"_more"),elm.innerHTML="<br />"+disclaimerTxt);var name=document.getElementById("review_quote_"+rid);name&&"undefined"!=typeof reviewAnswers[i].name&&reviewAnswers[i].name&&(name.innerHTML="&#x201c;"+reviewAnswers[i].name+"&#x201d;"),_updateResponseText(rid,reviewAnswers[i].response)}else{var rid=reviewAnswers[i].reviewid,qid=reviewAnswers[i].questionid,elm=document.getElementById("review_"+rid+"_answer_"+qid);elm.innerHTML=reviewAnswers[i].answer}}}function _showReviewWithAnswers(e,r,i){new Request({url:"/UserReviewController?a="+i+"&r="+e+"&n="+r,onSuccess:_callBeforePIC(_rpcParseReviewWithAnswers),onFailure:_callBeforePIC(function(e){408!==e.status&&ta.util.error.ajaxFailure("reviews:showReviewWithAnswers",e)})}).get()}function _showAffiliateProviderName(reply){var result=eval("("+reply+")"),providerDiv=ta.id("affilProvider");providerDiv.innerHTML=result.provider}var DELAYED_INJECT_LIST="reviews.delayed_inj",NONNATIVE_INJECT_LIST="reviews.nonnative_inj",NONNATIVE_DUP_LIST="reviews.nonnative_dup";window.initInjektReviewsContent=function(){var e={};ta.store(NONNATIVE_INJECT_LIST,e);var r={};ta.store(NONNATIVE_DUP_LIST,r);var i={};ta.store(DELAYED_INJECT_LIST,i)},window.injShowReview=function(e,r){if(!ta.has(NONNATIVE_INJECT_LIST))return void _callAjaxFunByType(e,r);var i=ta.retrieve(NONNATIVE_INJECT_LIST);if(i.hasOwnProperty(r)){var n=i[r]+":"+e;i[r]=n}else i[r]=e},window.injShowReviewBlock=function(e,r,i,n,t){function a(e){if(null!=e&&ta.has(NONNATIVE_DUP_LIST)&&"string"==typeof e){var r=e.split("-")[0],i=ta.retrieve(NONNATIVE_DUP_LIST);i.hasOwnProperty(r)?i[r]=i[r]+1:i[r]=1}}ta.has(NONNATIVE_INJECT_LIST)||initInjektReviewsContent();var s=ta.retrieve(NONNATIVE_INJECT_LIST),l=r+":"+i+":"+n;if(a(e),s.hasOwnProperty(l)){var o=s[l]+":"+e;s[l]=o}else s[l]=e},window.injektReviewsContent=function(){if(ta.has(NONNATIVE_INJECT_LIST)){var e=!1,r=ta.retrieve(NONNATIVE_INJECT_LIST);for(var i in r)_callAjaxFunByType(r[i],i),e=!0;e||_postInjektCall(),ta.remove(NONNATIVE_INJECT_LIST)}},window.injectExternalProviderMemberNames=function(e,r,i,n,t){t&&(r=ta.util.decoder.base64Decoder(r)),(e||i)&&r&&(reviewDiv=$(n).querySelector("#nonTAReviewer_"+e),reviewDiv.innerHTML=r)},window.getAffiliateProviderName=function(e){new Request({url:"/UserReviewController?a=affiliateStr&pr="+e,onSuccess:_callBeforePIC(function(e){_showAffiliateProviderName(e)}),onFailure:_callBeforePIC(function(){ta.util.error.ajaxFailure("reviews:getAffiliateProviderName")})}).get()},window.showReviewBlock=function(e,r,i,n,t){var a="/UserReviewController?a="+r+"&r="+e+"&type="+i+"&tr="+n+"&n=16";"undefined"!=typeof t&&t&&(a+="&l="+t.toString()),"undefined"!=typeof modelLocId&&modelLocId&&(a+="&d="+modelLocId),new Request({url:a,onSuccess:_callBeforePIC(_rpcParseReviewsBlock),onFailure:function(){var e=new Request({url:a,onSuccess:_callBeforePIC(function(e){_rpcParseReviewsBlock(e)}),onFailure:_callBeforePIC(ta.util.error.ajaxFailure.partial("reviews:showReview - second fail"))});e.get.delay(1e3,e)}}).get()},window.showReview=function(e,r,i){var n="/UserReviewController?a="+r+"&r="+e;new Request({url:n,onSuccess:i?i:_callBeforePIC(_rpcParseReviews),onFailure:function(){var e=new Request({url:n,onSuccess:i?i:_callBeforePIC(function(e){_rpcParseReviews(e)}),onFailure:i?i:_callBeforePIC(ta.util.error.ajaxFailure.partial("reviews:showReview - second fail"))});e.get.delay(1e3,e)}}).get()},window.expandDupReviewItems=function(e,r){document.getElementById(e).style.display="block",document.getElementById(r).style.display="none"}}(window);
ta.servlet.Attractions={isDistanceSet:!1,isNameSet:!1,selectedCategories:[],selectedTypes:[],sort:"popularity",BOOKABLE_SORT:"bookable",makeRequest:function(t,e,a,r){var n,i;if(a&&(n=a[0],i=a[1],ta.store("sort_bar_triggered_reload_position",window.document.getScrollTop()),this.sort=i),!i){var s=ta.id("sortOrder");s&&(i=s.value)}var o=ta.id("FF_SORT_AVAILABLE_CALLOUT")||ta.id("FF_SORT_ACTIVE_CALLOUT");o&&(o.style.display="none");var l=ta.id("HAC_FRIEND_SUMMARY_BUBBLE");l&&(l.style.display="none"),t&&!t.preventDefault&&(t=new Event(t)),t&&t.preventDefault();var c=ta.servlet.Attractions.selectedCategories,d=ta.servlet.Attractions.selectedTypes,v={};if(0==ta.servlet.Attractions.selectedCategories.length){var u=ta.retrieve("page.attractions.category");u&&ta.servlet.Attractions.selectedCategories.push(u)}0!=c.length&&(v.cat=escape(c.join(","))),0!=d.length&&(v.t=d.join(",")),n&&null!=n&&(v.o=escape(n[1])),"undefined"!=typeof i&&(v.sortOrder=escape(i));var A=require("common/geobroaden"),T=A.getGeobroadenState()&&A.getGeobroadenState()[0];if(!T&&document.getElement(".geobroaden_banner")&&(v.geobroaden=T),ta.has("mapProviderFeature.maps_api")){var _=ta.retrieve("mapProviderFeature.maps_api");v.mapProviderFeature=_}if(ta.has("attrMapCenter")){var L=ta.retrieve("attrMapCenter");v.latLng=L.lat()+","+L.lng()}var p=ta.retrieve("attrMapZoom");if(v.mz=p,ta.servlet.Attractions.isNameSet&&(v.q=ta.id("CUR_NAME").value),ta.servlet.Attractions.getFilterWaitOverlay().show(),r&&(v.updateOPF=1),ta.servlet.Attractions.zfn&&(v.zfn=ta.servlet.Attractions.zfn),ta.servlet.Attractions.zfr&&(v.zfr=ta.servlet.Attractions.zfr),ta.servlet.Attractions.zfq&&(v.zfq=ta.servlet.Attractions.zfq),ta.servlet.Attractions.zft&&(v.zft=ta.servlet.Attractions.zft),!r&&window.history&&window.history.pushState){var f="/Attractions-g"+escape(ta.retrieve("page.geo"))+"-Activities";v.cat&&parseInt(v.cat)&&(f+="-c"+v.cat),v.o&&(f+="-o"+v.o);var g=window.location.href.lastIndexOf("-"),h=window.location.href.lastIndexOf("#MAPVIEW");g&&(f+=window.location.href.substring(g,h>0?h:window.location.href.length)),window.onpopstate=function(t){t.state&&t.state.toSend&&ta.servlet.Attractions._sendRequest(t.state.toSend)},history.pushState({toSend:v},"",f)}ta.servlet.Attractions._sendRequest(v)},_sendRequest:function(t){new Request({url:"/AttractionsAjax-g"+escape(ta.retrieve("page.geo")),method:"get",onSuccess:ta.servlet.Attractions.updatePage,data:t,evalScripts:!0}).send()},viewTabClicked:function(t,e,a){ta.servlet.Attractions.selectedCategories=new Array,ta.servlet.Attractions.selectedCategories.push(e),ta.servlet.Attractions.getFilterWaitOverlay().show(),ta.servlet.Attractions.isNameSet=!1,ta.servlet.Attractions.zfn=a,ta.servlet.Attractions.makeRequest(null,null,null,!0)},viewCategoryButtonClicked:function(t,e,a){ta.servlet.Attractions.viewTabClicked(t,e,a)},replaceClass:function(t,e,a){var r=t.className,n=r.replace(e,a);return r!==n&&(t.className=n,!0)},updateContent:function(t,e,a){var r=t.getElement(".js_filter_name");if(r){ta.servlet.Attractions.replaceClass(r,e,a);var n=t.getElement(".js_filter_count");ta.servlet.Attractions.replaceClass(n,e,a)}},updateOPF:function(t,e,a){var r=document.getElement("#HEAD h1"),n=ta.id("HEADING");document.title=t,"undefined"!=typeof n&&null!=n&&n.setContent(e),r&&r.setContent(a)},fixSEOUrl:function(t){window.history&&window.history.pushState&&window.history.pushState(t,"",t)},getCatId:function(t){var e=t.className;if(e){var a=e.match(/js_c(\d*)/);return null===a?null:a[1]}return null},doMouseEnterLeave:function(t){var e=ta.servlet.Attractions.getFilterTable();e&&e.getElements("td").each(function(e){null!==t&&ta.servlet.Attractions.getCatId(e)===t?(ta.servlet.Attractions.replaceClass(e,"_normal","_hover"),ta.servlet.Attractions.updateContent(e,"_normal","_hover")):(ta.servlet.Attractions.replaceClass(e,"_hover","_normal"),ta.servlet.Attractions.updateContent(e,"_hover","_normal"))})},onMouseEnter:function(t){var e=ta.servlet.Attractions.getCatId(t);ta.servlet.Attractions.doMouseEnterLeave(e)},onMouseLeave:function(){ta.servlet.Attractions.doMouseEnterLeave(null)},getFilterTable:function(){return ta.id("category_filter_table")},movedMap:function(t,e){ta.servlet.Attractions.getFilterWaitOverlay().show(),ta.servlet.Attractions.makeRequest()},updatePage:function(t){var e=document.createElement("div");e.innerHTML=t;var a=ta.id("ATTRACTION_FILTER");a&&e.children.ATTRACTION_FILTER&&(a.innerHTML=e.children.ATTRACTION_FILTER.innerHTML,window.behavior.apply(a));var r=ta.id("NEIGHBORHOOD_FILTER");r&&(r.innerHTML=e.children.NEIGHBORHOOD_FILTER?e.children.NEIGHBORHOOD_FILTER.innerHTML:"",window.behavior.apply(r));var n=ta.id("ATTRTYPE_BOX"),i=e.children.ATTRTYPE_BOX;n&&(i?n.innerHTML=i.innerHTML:n.innerHTML="");var s;if(ta.retrieve("attractions.isRollupVersion")){s=ta.id("AL_LIST_CONTAINER"),s&&e.children.AL_LIST_CONTAINER&&(s.innerHTML=e.children.AL_LIST_CONTAINER.innerHTML);var o=ta.id("ATTR_SUBHEAD");o&&"BODYCON"==o.parentElement.id&&(o.innerHTML=e.children.ATTR_SUBHEAD?e.children.ATTR_SUBHEAD.innerHTML:"");var l=ta.id("ATTR_SUBHEAD_ABOVE_FILTERS");l&&(l.innerHTML=e.children.ATTR_SUBHEAD_ABOVE_FILTERS?e.children.ATTR_SUBHEAD_ABOVE_FILTERS.innerHTML:"")}else{s=ta.id("ATTRACTION_OVERVIEW"),s&&(s.innerHTML=e.children.TtD.innerHTML);var c=ta.remove("hideFilters"),d=ta.retrieve("filtersVisible");d||null==a||null==c||ta.servlet.Attractions.hideFilters()}var v=ta.id("ATTR_MAP");v&&v.fireEvent("onMapUpdate"),ta.servlet.Attractions.getFilterWaitOverlay().hide();var u=document.getElementById("AL_LIST_CONTAINER");u&&ta.prwidgets.initWidgets(u),window.fireEvent("onAttractionFilterChange");var A=ta.retrieve("sort_bar_triggered_reload_position");A&&A>0&&window.scrollTo(0,A),ta.remove("sort_bar_triggered_reload_position")},showFilters:function(t){ta.id("SHOW_FILTERS").addClass("hidden"),ta.id("HIDE_FILTERS").removeClass("hidden"),ta.id("TAB_FILTER_CONTROLS").removeClass("hidden"),ta.store("filtersVisible",!0)},getFilterWaitOverlay:function(){var t=ta.retrieve("filters.waitDialog"),e="mg s1 fatNotice";return(ta.isAttractionsRedesign2012()||ta.retrieve("attractions.isRollupVersion"))&&(e+=" fatNotice_2011"),t||(t=new ta.overlays.CenteredOverlay({style:e,showCloseButton:!1,autoShow:!1}),t.inner.set("html","<b>"+JS_UpdatingYourResults+"</b>"),ta.store("filters.waitDialog",t)),t},hideFilters:function(t){ta.id("HIDE_FILTERS").addClass("hidden"),ta.id("SHOW_FILTERS").removeClass("hidden"),ta.id("TAB_FILTER_CONTROLS").addClass("hidden"),ta.store("filtersVisible",!1)},loadGMaps:function(t,e){t.preventDefault(),ta.util.load.mapsLazy(ta.servlet.Attractions.initGeocoder)},initGeocoder:function(){var t=new ta.maps.Geocoder,e=parseFloat(ta.id("GEO_LAT").value),a=parseFloat(ta.id("GEO_LNG").value),r=(new ta.maps.Location(e-1,a-1),new ta.maps.Location(e+1,a+1),new ta.maps.Bounds(e+1,a-1,e-1,a+1)),n=ta.id("distance_submit"),i=ta.id("DISTANCE_FORM");t.setViewport(r),ta.servlet.Attractions.getLocationLatLng=ta.servlet.Attractions.getLocationLatLng.bind(t),n.onclick="ta.call('ta.servlet.Attractions.getLocationLatLng', event, this)",i.onsubmit="ta.call('ta.servlet.Attractions.getLocationLatLng', event, this)",ta.servlet.Attractions.getLocationLatLng()},getLocationLatLng:function(t,e){t&&t.preventDefault();var a=ta.id("geocode_search").value;""!=a&&this.getLatLng(a,function(t){if(t&&this.getViewport().containsLatLng(t))ta.id("CUR_LAT").value=t.lat(),ta.id("CUR_LNG").value=t.lng(),ta.servlet.Attractions.isDistanceSet=!0,ta.servlet.Attractions.makeRequest();else{var e=ta.id("MESSAGES");e.removeClass("hidden"),ta.id("ATTRACTION_OVERVIEW").innerHTML="",ta.id("ATTRACTION_OVERVIEW").adopt(e),ta.id("distance_reset").removeClass("hidden")}}.bind(this))},onSelectAttractionTypeAhead:function(t,e,a){var r=e?e.coords:null;if(r){var n=r.split(",");ta.id("CUR_LAT").value=n[0],ta.id("CUR_LNG").value=n[1],ta.servlet.Attractions.isDistanceSet=!0,ta.servlet.Attractions.makeRequest()}else{var i=ta.id("MESSAGES");i.removeClass("hidden"),ta.id("ATTRACTION_OVERVIEW").innerHTML="",ta.id("ATTRACTION_OVERVIEW").adopt(i),ta.id("distance_reset").removeClass("hidden")}},resetDistanceFilter:function(t){ta.servlet.Attractions.isDistanceSet=!1,ta.servlet.Attractions.makeRequest()},addNameFilter:function(t){t&&t.preventDefault();var e=ta.id("name_filter").value;""!=e&&(ta.id("CUR_NAME").value=e,ta.servlet.Attractions.isNameSet=!0,ta.servlet.Attractions.makeRequest())},resetNameFilter:function(t){ta.servlet.Attractions.isNameSet=!1,ta.servlet.Attractions.makeRequest()},onCategoryLinkClick:function(t,e){t.preventDefault(),e.checked=!e.checked,ta.servlet.Attractions.updateCategoryList(t,e)},updateCategoryList:function(t,e){var a=ta.servlet.Attractions.selectedCategories,r=parseInt(e.value,10);a.contains(r)?a.erase(r):(a.include(r),"cat_0"==e.name?$$("#ATTRTYPE_BOX input").each(function(t){t!=this[0]&&(t.checked=!1,this[1].erase(parseInt(t.value,10)))}.bind([e,a])):(a.erase(0),ta.id("cat_0").checked=!1)),0==a.length&&(a.include(0),ta.id("cat_0").checked=!0),ta.servlet.Attractions.makeRequest()},isCurrentSortBookable:function(){return this.sort==this.BOOKABLE_SORT},initGeobroadenListener:function(){ta.on("geobroaden_banner_click",function(t,e){ta.servlet.Attractions.makeRequest(null,null,null,!0)})}};
require(["ta/rollupAmdShim"],function(a){a.install(["common/geobroaden","ta/common/behavior/ScrollAd","ta/util/Qualaroo","ta/support/Qualtrics","ta/util/Object","widget/saves"],["ta","page-model","page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"ta-attractions-en_IN",files:{js3_secure:{ssl:{ta:{util:{Qualaroo:1},Core:{"TA.Record":1}}}},"js-amd":{src:{mixins:{Events:1},widget:{saves:1},common:{trackingStreams:1,geobroaden:1},"ns-exporter":1,amdloaders:1,utils:{urlutils:1,throttle:1,urlDecoder:1,"asdf-encoder":1,browserutils:1,stopevent:1,decoder:1,"is-element":1,ajax:1,"to-array":1,"form-to-json":1,objutils:1,"json-to-url":1,object:{"set-props":1,"shallow-copy":1}},"api-mod":1,purify:1,"ajax-request":1,vanillajs:1}},js3:{lib:{"jquery-amd":1},src:{ta:{common:{behavior:{ScrollAd:1}},util:{Cookie:1,Error:1,Object:1},registration:{RegEvents:1},support:{Qualtrics:1},Core:{"TA.FireEvent":1,"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("lib/jquery-amd",[],function(){return window.Zepto||ta.jquery||window.jQuery});
define("vanillajs",[],function(){return{}});
define("utils/to-array",["vanillajs"],function(){return function(n){return"number"!=typeof n.length?[n]:Array.prototype.slice.call(n)}});
define("amdloaders",["utils/to-array"],function(e){var t=[],n=[],r=[],o=[],d=[],u=null,a=null,i={},s={},c={},l={},f=null,p=!1,h=!1,m={},v=function(e,t,r){"@ta/"!==e.substring(0,4)&&(i[e]||(i[e]=!0,n.push(e)),d.push(function(n){n||!t.parsed||t.parsed(e)||(n=new Error("Dynamic load failed to define module '"+e+"'")),n&&r.error&&r.error(n)}),L())},g=function(e,t,r){i[e]||(i[e]=!0,s[e]||t.specified(e)||n.push(e)),d.push(function(n){var o=t.parsed(e);n||s[e]||o||(n=new Error("Dynamic load failed to define '"+e+"'")),n?r.error&&r.error(n):o||define(e,[],H(!0))}),t([e],r,r.error),L()},w=function(e,n,r){t.push(e),d.push(function(e){e?r.error&&r.error(e):r(!0)}),L()},y=function(e,t,n){r.push(e),d.push(function(r){r||t.specified("trhtml!"+e)||(r=new Error("Dynamic load failed to define content '"+e+"'")),r&&n.error&&n.error(r)}),L()},C=function(e,t,n){c[e]||(c[e]=!0,l[e]||o.push(e)),d.push(function(e){e?n.error&&n.error(e):n(!0)}),L()},C=function(e,t,n){c[e]||(c[e]=!0,l[e]||o.push(e)),d.push(function(e){e?n.error&&n.error(e):n(!0)}),L()},L=function(){!f&&p&&!h&&(d.length||t.length||n.length||r.length||o.length)&&(f=setTimeout(T,0))},S=function(e,t){var n=e.getAttribute("data-rup");if(n){var r;n=n.split(",");for(var o=0;o<n.length;o++)r=n[o].trim(),r&&t(r)}},R=m.getJSRollupsLoaded=function(){var t=a||e(document.getElementsByTagName("SCRIPT")).reduce(function(e,t){return t.hasAttribute("data-is-dust")||S(t,function(t){e.dedup[t]||(e.rups.push(t),i[t]=s[t]=e.dedup[t]=!0)}),e},{rups:[],dedup:{}}).rups;return!a&&p&&(a=t),t},E=m.getCSSRollupsLoaded=function(){var t=u||(document.head?e(document.head.querySelectorAll("LINK, STYLE")).reduce(function(e,t){return S(t,function(t){e.dedup[t]||(e.rups.push(t),e.dedup[t]=!0)}),e},{rups:[],dedup:{}}).rups:[]);return!u&&p&&(u=t),t},A=m.getLoadedFilesParams=function(){return{haveJses:String(R()),haveCsses:String(E())}},T=function(){if(f=null,p&&!h){var e=t,u=d,a=r,i=o,c=A(),l=n.filter(function(e){return e&&!s[e]&&!require.parsed(e)});if(d=[],t=[],n=[],r=[],o=[],!(l.length||e.length||a.length||i.length))return void b(u);var m="haveJses="+encodeURIComponent(c.haveJses)+"&haveCsses="+encodeURIComponent(c.haveCsses)+"&needJses="+encodeURIComponent(String(l||""))+"&needCsses="+encodeURIComponent(String(e||""))+"&needDusts="+encodeURIComponent(String(i||""));a.length>0&&(m+="&needContent="+encodeURIComponent(String(a))),window.pageServlet&&(m+="&metaReferer="+encodeURIComponent(window.pageServlet));var v=null;try{v=new XMLHttpRequest}catch(e){try{v=new ActiveXObject("MSXML2.XMLHTTP")}catch(e){try{v=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw new Error("Can't create XMLHttpRequest or similar")}}}var g=!1;v.onreadystatechange=function(){g||4!==v.readyState||(g=!0,v.status>=200&&v.status<=299?q(u,v.responseText):b(u,new Error("XHR returned "+v.status)))},v.open("POST","/DemandLoadAjax",!0);try{v.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}catch(e){}try{v.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(e){}try{v.setRequestHeader("Accept","text/html, */*")}catch(e){}h=!0,v.send(m)}},b=function(e,t){if(h=!1,L(),e.length)for(var n=0;n<e.length;++n)try{e[n](t)}catch(e){window.IS_DEBUG&&console.error&&console.error("Error in async callback: ",e)}},I=m.installStyles=function(e){document.head.appendChild(e.reduce(function(e,t){return S(t,function(e){u.push(e),define("trcss!"+e,[],H(void 0))}),e.appendChild(t),e},document.createDocumentFragment()))},D=m.installScripts=function(e){return Promise.all(e.map(function(e){return S(e,function(t){e.hasAttribute("data-is-dust")?l[t]=!0:(a&&a.push(t),s[t]=!0)}),new Promise(function(t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("data-rup",e.getAttribute("data-rup")),e.src?(n.src=e.src,n.async=!0,n.onload=n.onerror=t,document.head.appendChild(n)):e.text&&(n.text=e.text,document.head.appendChild(n),document.head.removeChild(n),t())})}))},q=function(t,n){if(!n||!n.substr)return void b(t,new Error("no data returned from /DemandLoadAjax"));var r,o=Promise.resolve();try{var d=document.createElement("DIV");d.innerHTML=n,I(e(d.querySelectorAll("STYLE, LINK"))),o=D(e(d.getElementsByTagName("SCRIPT")));for(var u,a;u=d.firstChild;)d.removeChild(u),1===u.nodeType&&(a=u.getAttribute("data-content"),a&&define("trhtml!"+a,[],H(u)))}catch(e){r=e}o.then(b.bind(null,t,r))},H=function(e){return function(){return e}},M=m.activate=function(){p||(p=!0,define.depLoader&&!define.depLoader.isDefault||(define.depLoader=v),L())};return define("trjs",[],function(){return{load:g}}),define("trcss",[],function(){return{load:w}}),define("trhtml",[],function(){return{load:y}}),define("trdust",[],function(){return{load:C}}),"undefined"!=typeof window&&(document.addEventListener&&!window.taRollupsAreAsync&&document.addEventListener("DOMContentLoaded",M,!1),window.addEventListener?window.addEventListener("load",M,!1):window.attachEvent&&window.attachEvent("onload",M)),m});
define("common/trackingStreams",["vanillajs","amdloaders"],function(){function l(l,e,t){if(e=Array.prototype.slice.call(e),l.handler)try{l.handler.apply(null,e),t()}catch(l){}else if(l.list){l.list.length>=l.limit&&(l.list=l.list.slice(0,l.list.length-1),l.callbacks=l.callbacks.slice(0,l.callbacks.length-1)),l.list.unshift(e),l.callbacks.unshift(t);var r=l.handlerModule;r&&l.handlerMethod&&(l.handlerModule=null,require([r+""],function(e){n(l,e[l.handlerMethod],0)}))}}function e(l,e){if(e=Array.prototype.slice.call(e),l.handler)try{l.handler.apply(null,e)}catch(l){}else if(l.list&&l.list.length<l.limit&&(l.list.push(e),l.handlerModule&&l.handlerMethod)){var t=l.handlerModule;l.handlerModule=null,require([t+""],function(e){n(l,e[l.handlerMethod],0)})}}function n(l,n,t){if(t=t||0,l.handler&&l.priority>=t)return!1;l.handler=n,l.priority=t;var a=l.list;l.list=null;for(var i=0;i<a.length;++i)try{n.apply(null,a[i]),l.callbacks&&l.callbacks[i]&&l.callbacks[i]()}catch(n){l!==r&&e(r,[n,l.name+" dispatch error"])}}var t="trjs!ta/Core/TA.Record",r={name:"errorQ",limit:3,handler:null,handlerModule:"trjs!ta/util/Error",handlerMethod:"record",list:[]},a={name:"GARecordQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackEventOnPage",list:[]},i={name:"GARecordOnPageOnceQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackEventOnPageOnce",list:[]},d={name:"SetCookieQ",limit:100,handler:null,handlerModule:t,handlerMethod:"setEvtCookie",list:[]},c={name:"UnifiedUserTrackingQ",limit:100,handler:null,handlerModule:t,handlerMethod:"trackUnifiedEvent",list:[]},o={name:"redirectCallback",limit:1,handler:null,handlerModule:t,handlerMethod:"setEvtCookie",list:[],callbacks:[]};return{error:function(){e(r,arguments)},setErrorHandler:function(l,e){n(r,l,e)},trackEvent:function(){e(a,arguments)},trackEventOnPageOnce:function(){e(i,arguments)},setTrackEventHandler:function(l,e){n(a,l,e)},setEvtCookie:function(){e(d,arguments)},trackUnifiedEvent:function(l,n,t){e(c,arguments)},redirectWithEvt:function(){var e=Array.prototype.slice.call(arguments);e.length>0&&"function"==typeof e[0]&&l(o,e.slice(1),e[0])}}});
define("ns-exporter",["vanillajs"],function(r){function n(r){if("undefined"==typeof window)return null;if("undefined"==typeof r&&(r=window),!r)return require.defined("ta/util/Error")&&require("ta/util/Error").record(null,"Using ns-exporter:exportTo without a namespace"),null;if("string"==typeof r){var n=window;n.ta||(ta={}),r.split(".").forEach(function(r){n[r]||(n[r]={}),n=n[r]}),r=n}return r}return{exportTo:function(r,e,t){if(e=n(e),!e)return!1;for(var i in r)!r.hasOwnProperty(i)||t&&i in e||(e[i]=r[i]);return!0},createNs:function(r,e,t){return!!(e=n(e))&&void(e[t]=r)}}});
define("ta/Core/TA.FireEvent",["vanillajs"],function(){var n={},e={};return n.on=function(n,t){var r=e[n];r||(r=e[n]=[]),r.push(t)},n.fireEvent=function(n,t){var r=Array.prototype.slice.call(arguments),i=e[n];r.shift(),i&&i.slice(0).forEach(function(n){try{n.apply(null,r)}catch(n){}})},n.off=function(n,t){if(t){var r,i=e[n];i instanceof Array&&(r=i.indexOf(t),r>=0&&i.splice(r,1))}else delete e[n]},n.hasEventListener=function(n){return!!e[n]},n});
define("ta/Core/TA.Event",["vanillajs","common/trackingStreams","ns-exporter","ta/Core/TA.FireEvent"],function(vanilla,tracks,nsExporter,fireEvent){function _makeClosure(e,t){var n=this;return t=Array.prototype.slice.call(t),function(){e.apply(n,t)}}function QueueTimer(e,t){var n=0,r=0,o=[],a=0,u=!1;this.start=function(){n&&clearTimeout(n),a=Date.now()},this.end=function(i){var c=Date.now(),f=c-a;r+=f;var l=""+f+"ms ["+(i||"")+"]",s=e+(t?"-after":"");u?console.error("Straggler for "+s+": "+l):(o.push(l),n=setTimeout(function(){console.error("Timing for "+s+": "+r+"ms\n"+o.sort(function(e,t){return parseInt(e)-parseInt(t)}).join("\n")),u=!0},2e3))}}var exports={on:fireEvent.on,off:fireEvent.off,fireEvent:fireEvent.fireEvent,hasEventListener:fireEvent.hasEventListener};exports.call=function(e,t,n,r){if(null==t)return IS_DEBUG&&alert("You must pass the event.\n\nUsage:\nta.call('ta.namespace.Class.function', event);"),!1;if(null==e)return IS_DEBUG&&alert("ta.call of undefined function"),!1;var o=e;if("function"==typeof e)e="<func>";else if(!/^ta\.[\w\d\.]+$/.test(e))return IS_DEBUG&&alert("Invalid function name. Must be of the form: ta.namespace.Class.function"),!1;var a=t||window.event;["stopPropagation","preventDefault"].forEach(function(e){a[e]||(a[e]=function(){})}),a.stop||(a.stop=function(){a.preventDefault(),a.stopPropagation()}),n||(n=a.target||a.srcElement),n||tracks.error(null,"ta.call re-wrap fail (non-DOM element) - "+e,t,{"funcName":e});var u=arguments,i=Array.prototype.slice.call(u,3);i.splice(0,0,a,n);try{return i.unshift({callback:_ta_call_defer,evt:a}),i.unshift(o),exports.run.apply(null,i)}catch(n){tracks.error(n,"ta.call - "+e,t)}return!1};var _ta_call_defer=function(e,t){t&&delete t.evt,exports.run.apply(null,arguments)};exports.run=function(e,t){var n=arguments,r=Array.prototype.slice.call(n,2);try{var o=exports.fn(e);if("function"==typeof o){var a=o.apply(window,Array.prototype.slice.call(r));if(t&&t.onComplete){var u=exports.fn(t.onComplete);u&&u(a)}return a}t&&t.evt&&(t.evt.stopPropagation?t.evt.stopPropagation():t.evt.cancelBubble=!0,t.evt.preventDefault?t.evt.preventDefault():t.evt.returnValue=!1);var i=_makeClosure(t&&t.callback||exports.run,arguments);require(["trjs!ta/Core/TA.Load"],function(t){try{t.load(e,i)}catch(t){tracks.error(t,"ta.run - "+e)}})}catch(t){tracks.error(t,"ta.run - "+e)}return!1};var OneTimeFunctionQueue=function(e,t,n){function r(){u=!0,c()}var o,a=[],u=!!n,i=function(n,r){o&&o.start();try{n()}catch(n){try{tracks.error(n,"OneTimeFunctionQueue "+e+(t?"-after":"")+(r?"-"+r:""))}catch(e){}}o&&o.end(r)},c=function(){if(a.sort(function(e,t){return e.priority-t.priority||e.subpriority-t.subpriority}),t){var e=1;a.forEach(function(t){setTimeout(i.bind(null,t.func,t.name),e++)})}else a.forEach(function(e){i(e.func,e.name)});a=[]};null!=e&&(window.addEventListener?window.addEventListener(e,r,!1):window.attachEvent&&("DOMContentLoaded"==e?window.attachEvent("onload",r):"load"==e?window.attachEvent("on"+e,function(){setTimeout(r,1)}):window.attachEvent("on"+e,r))),this.addToQueue=function(t,n,r){return t?("string"==typeof n&&(r=n,n=!1),void(u?i(t,r):(n=n||100+a.length,a.push({func:t,priority:n,name:r,subpriority:a.length})))):void tracks.error(null,"addToQueue for "+e+" queue - no function")},this.executeQueue=function(){c()}},loaded="undefined"!=typeof document&&"complete"===document.readyState,ready="undefined"!=typeof document&&"interactive"===document.readyState||loaded,_readyQ=new OneTimeFunctionQueue("DOMContentLoaded",!1,ready),_loadQ=new OneTimeFunctionQueue("load",!1,loaded),_afterLoadQ=new OneTimeFunctionQueue("load",!0);ready||_loadQ.addToQueue(function(){_readyQ.executeQueue()},-999999999,"checkReadyQueue"),_loadQ.addToQueue(function(){_afterLoadQ.executeQueue()},999999999,"afterLoadQueue"),exports.queueForReady=function(e,t,n){_readyQ.addToQueue(e,t,n)},exports.queueForLoad=function(e,t,n){_loadQ.addToQueue(e,t,n)},exports.queueForAfterLoad=function(e,t){_afterLoadQ.addToQueue(e,0,t)},exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=!1;try{f=eval(fn)}catch(e){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(e){}}if(f&&"function"==typeof f)return f}return null},exports.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},exports.throttle=function(e,t,n,r){function o(){delete m_throttles[t],a.cb()}var a,u=(new Date).getTime();if(t in m_throttles){if(a=m_throttles[t],u-a.lastReset<a.minResolution)return void(a.cb=e)}else a=m_throttles[t]={start:u,minResolution:Math.max(Math.floor(n/10),50)};a.cb=e,a.timeout&&clearTimeout(a.timeout),r&&u-a.start>r?o():(a.lastReset=u,a.timeout=setTimeout(o,n))};var m_throttles={};return nsExporter.exportTo(exports,ta),exports});
define("common/geobroaden",["lib/jquery-amd","ta/Core/TA.Event"],function(e,n){function o(e){r("click",e)}function t(e,n){r("navigate",e.gbBannerAction,n)}function r(o,t,r){var a=e("#geobroaden_opt_out"),d=e("#geobroaden_opt_in"),s={"opt_in":!0,"opt_out":!0},u={"click":!0,"navigate":!0};a.length&&d.length&&t in s&&o in u&&("opt_out"===t?(r&&"navigate"===o&&(r.ops.geobroaden=!0),a.removeClass("visible").addClass("hidden"),d.removeClass("hidden").addClass("visible")):"opt_in"===t&&(r&&"navigate"===o&&(r.ops.geobroaden=!1),d.removeClass("visible").addClass("hidden"),a.removeClass("hidden").addClass("visible")),"click"===o&&(i(),n.fireEvent("geobroaden_banner_click",t)))}function a(){if(u)return!1;var e=document.getElement(".geobroaden_state");return!!e&&"true"==e.getAttribute("data-useroverride")}function i(){if(!u){var e=document.getElement(".geobroaden_state");e&&e.setAttribute("data-useroverride",!0)}}function d(e){var n=document.getElementById(e);if(n){var o=window.getComputedStyle(n);if("none"===o.display)return!1}return!0}function s(e,n){if(u){var o=RegExp("geobroaden[.=](true|false)"),t=window.location.href,r=t.match(o);if(r&&r.length>1){var i=r[1];return["true"===i]}return[]}if(a()){if(!d("geobroaden_opt_out"))return[!1];if(!d("geobroaden_opt_in"))return[!0]}}var u=!!window.Zepto,g={};return g.geobroadenBannerClick=o,g.gbBannerFromNavigation=t,g.geobroadenBannerInteraction=r,g.getGeobroadenUseroverride=a,g.setGeobroadenUseroverride=i,g.isGBBannerDisplayed=d,g.getGeobroadenState=s,g});
!function(t){t.util.waypoints={showWaypointFilterPopup:function(i,e){var n=e||"airport_filter_popup";setTimeout(function(){function e(){var i=t.id(n);i&&(o.contains(i)||o.adopt(i),i.addEvent("click",function(t){return t.stopPropagation(),!1}),i.getElement(".close").addEvent("click",function(){i.hide()}),i.setStyle("visibility","visible"),i.fade("in"),setTimeout(function(){i.fade("out")},5e3))}var o=t.find(i);o&&(t.util.element.isScrolledIntoView(o)?e():t.util.element.doIfElementIsVisible(o,e,null,{bottom:20}))})}}}(ta);
ta.maps.sidebar=ta.maps.Sidebar={icons:{"hotel":"/img2/maps/icons/pinHotel.gif","restaurant":"/img2/maps/icons/pinRestaurant.gif","attraction":"/img2/maps/icons/pinThingToDo.gif"},_addHotelRestaurantAttraction:function(a,e){var t=ta.retrieve("maps.map"),r=ta.retrieve("zft")||[];r.contains(e)||(r.push(e),ta.store("zft",r)),ta.servlet.HACSearch.filtersChanged(),t&&t.showType(a)},hotels:function(a,e){var t=ta.retrieve("maps.map"),r=ta.retrieve("zft")||[];return $(e).checked?ta.maps.Sidebar._addHotelRestaurantAttraction("hotel",1):(r.erase(1),ta.store("zft",r),t.hideType("hotel")),ta.servlet.HACSearch.filter.update(),!0},restaurants:function(a,e){var t=ta.retrieve("maps.map"),r=ta.retrieve("zft")||[];return document.id(e).checked?(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_check","restaurants"),ta.store("lma","BCACMap_Restaurants"),ta.maps.Sidebar._addHotelRestaurantAttraction("restaurant",3)):(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_uncheck","restaurants"),r.erase(3),ta.store("zft",r),t.hideType("restaurant")),ta.servlet.HACSearch.filter.update(),!0},attractions:function(a,e){var t=ta.retrieve("maps.map"),r=ta.retrieve("zft");return document.id(e).checked?(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_check","attractions"),ta.store("lma","BCACMap_ThingsToDo"),ta.maps.Sidebar._addHotelRestaurantAttraction("attraction",2)):(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_uncheck","attractions"),r.erase(2),ta.store("zft",r),t.hideType("attraction")),ta.servlet.HACSearch.filter.update(),!0},offers:function(a,e){return e&&document.id(e).checked?(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_check","special_offers"),ta.store("maps.offersOnly",!0)):(ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_uncheck","special_offers"),ta.remove("maps.offersOnly")),ta.servlet.HACSearch.filtersChanged(),!0},disneyMarkerToggle:function(a,e){var t=e.id,r=ta.retrieve("maps.map");return $(e).checked?r.showType(t):r.hideType(t),!0},landmarkData:{"coffee":{query:"Coffee",iconIndex:4,action:"BCACMap_Coffee"},"copy":{query:"Copy Center",iconIndex:5,action:"BCACMap_Copy"},"shipping":{query:"Fedex, Shipping",iconIndex:6,action:"BCACMap_Shipping"},"rail":{query:"Rail stations",iconIndex:10,action:"BCACMap_Rail"}},_landmarkSearchCallback:function(a,e,t){for(var r=ta.retrieve("maps.map"),o=r.mapBounds(),n=[],i=0;i<e.results.length;i++){var d=e.results[i],s=new Element("div"),c=d.titleNoFormatting;d.addressLines&&(d.addressLines.each(function(a){s.adopt(new Element("div").set("text",a))}),c=d.addressLines.join(", ")),s.adopt(new Element("a",{"href":map_gmaps_address_url+encodeURIComponent(c)}).set("text",map_drivingdirections));var l={lat:d.lat,lng:d.lng,customHover:{title:d.titleNoFormatting,titleUrl:d.url,contents:s}},p=r.createLocation(d.lat,d.lng);o.containsLatLng(p)&&n.push(l)}r.replaceMarkers(n,a,Object.merge({},ta.maps.MARKER_HOTEL,{anchorX:5,anchorY:30,pinIndex:7,iconIndex:ta.maps.Sidebar.landmarkData[a].iconIndex}))},_landmarkSearch:function(a,e){var t=ta.retrieve("maps.map");if(!google.search.LocalSearch)return void ta.maps.Sidebar._landmarkSearch.delay(1e3,this,[a,e]);var r=new google.search.LocalSearch;r.setCenterPoint(t.mapCenter()),r.setResultSetSize(google.search.Search.LARGE_RESULTSET),r.setSearchCompleteCallback(this,function(){ta.maps.Sidebar._landmarkSearchCallback(a,r,e)});var o=function(){r.execute(ta.maps.Sidebar.landmarkData[a].query)};o.delay(250)},addLandmark:function(a){var e=ta.retrieve("maps.landmarks"),t=ta.retrieve("maps.map");t&&t.showType(a),e.contains(a)||e.push(a),ta.store("maps.landmarks",e),ta.maps.Sidebar._landmarkSearch(a,1)},toggleLandmark:function(a,e){var t=ta.retrieve("maps.map"),r=ta.retrieve("maps.landmarks"),o=e.getProperty("id").substr(8);return $(e).checked?(ta.maps.Sidebar.addLandmark(o),ta.trackEventOnPage("dynamic_large_map","sidebar_poi_check",o)):(r.erase(o),ta.store("maps.landmarks",r),t.hideType(o),ta.trackEventOnPage("dynamic_large_map","sidebar_poi_uncheck",o)),ta.servlet.HACSearch.filter.update(),!0},reloadLandmarks:function(){var a=ta.retrieve("maps.landmarks");a&&a.each(function(a){ta.maps.Sidebar._landmarkSearch(a)})},togglePOI:function(a,e,t){var r=ta.retrieve("maps.map"),o=e.marker,n=e.poiType,i=ta.retrieve("maps."+n),d=null,s=-1;s="airports"==n?9:8,document.id(e).checked?(i.contains(o)||(i.push(o),d=r.createLocation(o.lat,o.lng)),ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_check",n)):(i.erase(o),ta.trackEventOnPage&&ta.trackEventOnPage("dynamic_large_map","sidebar_poi_uncheck",n)),r&&(r.replaceMarkers(i,n,Object.merge({},ta.maps.MARKER_HOTEL,{anchorX:5,anchorY:30,pinIndex:7,iconIndex:s})),null!=d&&r.zoomAndPanToFit(d.lat(),d.lng()),r.showType(n)),t||ta.servlet.HACSearch.filter.update()},_openAccordion:function(a,e,t){if(a){a.hasClass("on")||a.toggleClass("on");var r=a.getNext("div");r.removeClass("hidden"),r.init||ta.maps.Sidebar._populatePoiAccordion(r,e,t)}},_populatePoiAccordion:function(a,e,t){ta.retrieve("maps."+e)||ta.store("maps."+e,[]);var r=ta.retrieve("maps.nearbyPOIs")[e],o=0;null!=r&&r.markers.each(function(r){var n=r.customHover.title.match(/[A-Z]{3}/)||++o,i=t;i=r.locId?t+r.locId+"_"+n:t+n;var d=new Element("input",{"type":"checkbox","name":i,"id":i}).addEvent("click",function(a){ta.call("ta.maps.Sidebar.togglePOI",a)}),s=new Element("label",{"for":i}).set("text",r.customHover.title),c=new Element("div",{"class":"poiContainer"}),l=new Element("div",{"class":"checkbox"}),p=new Element("div",{"class":"label"});l.adopt(d),p.adopt(s),d.marker=r,d.poiType=e,c.adopt(l),c.adopt(p),a.adopt(c)}),a.init=!0},_closeAccordion:function(a,e){if(a){a.hasClass("on")&&a.toggleClass("on");var t=$(a.getNext("div"));t.addClass("hidden")}},toggleAirports:function(a,e,t){"div"!=e.get("tag")&&(e=e.getParent("div")),e.hasClass("on")?ta.maps.Sidebar._closeAccordion($("toggle_airports"),"airports"):(ta.maps.Sidebar._closeAccordion($("toggle_convention_centers"),"conventionCenters"),$("toggle_nearby_cities")&&ta.maps.Sidebar._closeAccordion($("toggle_nearby_cities"),"nearbyCities"),ta.maps.Sidebar._openAccordion($("toggle_airports"),"airports","airport_")),t&&ta.servlet.HACSearch.filter.update()},toggleConventionCenters:function(a,e){"div"!=e.get("tag")&&(e=e.getParent("div")),e.hasClass("on")?ta.maps.Sidebar._closeAccordion($("toggle_convention_centers"),"conventionCenters"):(ta.maps.Sidebar._closeAccordion($("toggle_airports"),"airports"),$("toggle_nearby_cities")&&ta.maps.Sidebar._closeAccordion($("toggle_nearby_cities"),"nearbyCities"),ta.maps.Sidebar._openAccordion($("toggle_convention_centers"),"conventionCenters","convention_center_")),ta.servlet.HACSearch.filter.update()},toggleNearbyCities:function(a,e){"div"!=e.get("tag")&&(e=e.getParent("div")),e.hasClass("on")?ta.maps.Sidebar._closeAccordion($("toggle_nearby_cities"),"nearbyCities"):ta.maps.Sidebar.openNearbyCities(),ta.servlet.HACSearch.filter.update()},openNearbyCities:function(a,e){ta.maps.Sidebar._closeAccordion($("toggle_airports"),"airports"),ta.maps.Sidebar._closeAccordion($("toggle_convention_centers"),"conventionCenters"),ta.maps.Sidebar._openAccordion($("toggle_nearby_cities"),"nearbyCities","cities_")},mapMorphed:function(a,e){if(0==a){var t=ta.retrieve("maps.landmarks");t.each(function(a){e.hideType(a)}),$("MAPPROMO").setStyle("display","block")}else if(1==a){var t=ta.retrieve("maps.landmarks");t.each(function(a){e.showType(a)}),$("MAPPROMO").setStyle("display","none");var r=ta.remove("maps.morphBigSource")||"t";ta.store("lma","BCACMap_"+r+"_open")}var o=ta.servlet.HACSearch.mapMorphed(a,e);return o},mapMoved:function(a,e){return ta.maps.Sidebar.reloadLandmarks(),ta.servlet.HACSearch.mapMoved(a,e)},mapZoomed:function(a,e){return ta.maps.Sidebar.reloadLandmarks(),ta.servlet.HACSearch.mapZoomed(a,e)},mapReset:function(){return ta.maps.Sidebar.reloadLandmarks(),"BusinessCenter"!=pageServlet&&ta.maps.Sidebar._clearLocation(),ta.servlet.HACSearch.mapReset()},_removeLocation:function(){var a=ta.retrieve("maps.map");a&&a.hideType("location")},addLocationPopup:function(a,e){$("add_location_text").get("text")==map_removeaddress?(ta.maps.Sidebar._removeLocation(),$("add_location_text").set("text",map_addaddress)):$("add_location").removeClass("hidden")},closeAddLocationPopup:function(a,e){$("add_location").addClass("hidden");var t=$("add_location_input");t&&(t.value=map_addresstemplate,t.addClass("unfocused"));var r=$("add_location_input_filter");r&&(r.value="",r.addClass("unfocused")),document.id("add_location_error")&&(document.id("add_location_error").set("text",""),document.id("add_location_error").addClass("hidden")),document.id("add_location_header")&&document.id("add_location_header").removeClass("error")},clearAddLocationBox:function(a,e){e.hasClass("unfocused")&&(e.value="",e.removeClass("unfocused"))},_addLocation:function(a,e,t){var r=ta.retrieve("maps.map");if(!$("add_location")){var o=$("add_location_input");o&&(o.value=a,o.removeClass("unfocused"));var n=$("add_location_input_filter");n&&(n.value=a,n.removeClass("unfocused"))}var i=document.id("REST_MAP"),d=document.id("ATTR_MAP");!r&&i?(r=i.map,ta.store("maps.map",r)):!r&&d&&(r=d.map,ta.store("maps.map",r)),e?ta.maps.Sidebar._addLocationCallback(e,null,t):ta.util.load.mapsLazy(function(){var e,t=new ta.maps.Geocoder;e=r?r.mapBounds():ta.maps.Sidebar._getStaticMapBounds(),e&&t.setViewport(e),t.getLatLng(a,ta.maps.Sidebar._addLocationCallback)})},_getStaticMapBounds:function(){var a=null;if(ta.maps.Bounds)try{var e=document.id("STATIC_MAP_BOUNDS");if(e){var t=e.className,r=/n(-?\d*\.\d+)/,o=parseFloat(r.exec(t)[1]);r=/s(-?\d*\.\d+)/;var n=parseFloat(r.exec(t)[1]);r=/w(-?\d*\.\d+)/;var i=parseFloat(r.exec(t)[1]);r=/e(-?\d*\.\d+)/;var d=parseFloat(r.exec(t)[1]);o&&n&&d&&i&&(a=new ta.maps.Bounds(o,i,n,d))}}catch(e){ta.util.error.record(e,"Sidebar - _getStaticMapBounds"),a=null}return a},clearLocation:function(a,e){ta.maps.Sidebar._clearLocation()},addLocation:function(a,e,t,r,o){var n,i="";n=document.id("add_location_input"),n&&(i=n.value);var d=document.id("add_location_input_filter");return d&&(i=d.value),document.id("add_location")||0!=i.length&&i!=map_enteraddress?(i!=map_enteraddress&&(ta.store("maps.address",i),ta.maps.Sidebar._addLocation(i,t,r),document.id("REST_MAP")||document.id("ATTR_MAP")||!ta.servlet.HACSearch.filter||ta.servlet.HACSearch.filter.update()),!1):(ta.maps.Sidebar._clearLocation(),document.id("REST_MAP")||document.id("ATTR_MAP")||!ta.servlet.HACSearch.filter||ta.servlet.HACSearch.filter.update(),!1)},_clearLocation:function(){ta.maps.Sidebar._removeLocation(),ta.maps.Sidebar._clearLocationError();var a=$("add_location_input");a&&(a.value=map_enteraddress,a.addClass("unfocused"));var e=$("add_location_input_filter");e&&(e.value="",e.addClass("unfocused"))},_getVRAddressBar:function(){return document.getElement(".vrAddress")},_setLocationError:function(a){if(document.id("add_location_header")&&document.id("add_location_error")&&document.id("add_location_error").set("text",a).removeClass("hidden"),$("add_location_header"))$("add_location_header").addClass("error");else{var e=$("add_location_input");e&&e.addClass("error");var t=$("add_location_input_filter");t&&t.addClass("error"),$("add_location_text")&&$("add_location_text").addClass("error")}document.id("SEARCH_WRAP")&&document.id("add_location_error").set("html",a).removeClass("hidden");var r=ta.maps.Sidebar._getVRAddressBar();r&&r.addClass("error")},_clearLocationError:function(){if(document.id("add_location_error")&&$("add_location_error").addClass("hidden"),$("add_location")){$("add_location_text")&&$("add_location_text").set("text",map_removeaddress),$("add_location").addClass("hidden"),$("add_location_header").removeClass("error");var a=$("add_location_input");a&&(a.value=map_addresstemplate);var e=$("add_location_input_filter");e&&(e.value="")}else{var a=$("add_location_input");a&&a.removeClass("error");var e=$("add_location_input_filter");e&&e.removeClass("error"),$("add_location_text")&&$("add_location_text").removeClass("error")}var t=ta.maps.Sidebar._getVRAddressBar();t&&t.removeClass("error")},_addLocationCallback:function(a,e,t){if(null==a)return document.id("SEARCH_WRAP")?(ta.maps.Sidebar._setLocationError('<div class="triangle"></div>'+map_addressnotfound3.replace("{0}",geoName)),document.id("add_location_input").blur(),void ta.trackEventOnPage("Search_Near_Map","submit","err_invalid")):void ta.maps.Sidebar._setLocationError(map_addressnotfound);ta.store("map.poi.changed",!0),ta.store("map.poi",a.toUrlValue());var r=ta.retrieve("maps.map");if(!r)return ta.store("map.delayedLoc",!0),ta.store("map.delayedLoc.point",a),ta.store("map.delayedLoc.data",t),void ta.servlet.HACSearch.filtersChanged();var o={},n={},i="",d=ta.retrieve("maps.address");o=r.mapCenter(),n=new ta.maps.Location(o.lat(),o.lng()),i=r.getAddressUrl(d);var s=n.distanceFrom(a)/1609.344;if(s>100)return document.id("SEARCH_WRAP")?(ta.maps.Sidebar._setLocationError('<div class="triangle"></div>'+map_addressnotfound3.replace("{0}",geoName)),document.id("add_location_input").blur(),void ta.trackEventOnPage("Search_Near_Map","submit","err_out_of_bounds")):void ta.maps.Sidebar._setLocationError(map_addressnotfound2.replace("{0}",geoName));if(ta.maps.Sidebar._clearLocationError(),t)if("AIRPORT"==t.type)var c="/BusinessCenter-g"+t.value+"-t4-",l=[{infoOnLoad:!0,lat:a.lat(),lng:a.lng(),locId:t.value,customHover:{title:t.name,contents:new Element("div").adopt(new Element("a",{"href":c,"target":"_blank","rel":"nofollow"}).set("text",map_findflights)).appendText(" | ").adopt(new Element("a",{"href":i,"target":"_blank","rel":"nofollow"}).set("text",map_drivingdirections))}}];else var p=pageServlet.replace("Redesign",""),l=[{infoOnLoad:!0,lat:a.lat(),lng:a.lng(),locId:t.value,customHover:{title:t.name,titleUrl:t.url,url:"GMapsLC:info,g"+t.value+",ext,from="+p+",logAction=HACMap_info"}}];else var l=[{infoOnLoad:!0,lat:a.lat(),lng:a.lng(),customHover:{title:map_myaddress,address:d,titleUrl:i,contents:new Element("div").set("text",d).adopt(new Element("br")).adopt(new Element("a",{"target":"_blank","rel":"nofollow","href":i}).set("text",map_drivingdirections))}}];var m={anchorX:5,anchorY:30,pinSize:new ta.support.Size(23,28),pinOffset:102,pinIndex:1,hoverIndex:2,shadowSize:new ta.support.Size(23,28),shadowOffset:102,shadowIndex:0,iconSize:new ta.support.Size(19,23),iconOffset:18,iconIndex:0,iconOffsetX:2,iconOffsetY:2};ta.has("storeLocation")&&(ta.store("map.location.marker",l),ta.store("map.location.options",m)),r.replaceMarkers(l,"location",m),r.showType("location"),r.move(a.lat(),a.lng(),r.getZoom()),(document.id("REST_MAP")||document.id("ATTR_MAP"))&&updateList(null,null,ACTION_MAPCHANGED),ta.store("hac.sortChanged","distLow"),ta.servlet.HACSearch.filtersChanged()},morphBigPromo:function(a,e){return ta.store("maps.morphBigSource","p"),ta.servlet.HACSearch.morphBig(a,e)},onTypeChange:function(){this.setOption("mt",this.gmap2.getCurrentMapType().getName()),this.saveOptions()},clearFieldFocus:function(a,e,t){try{t&&e.value.trim()==e.defaultValue.trim()?(e.value="",document.id(e).removeClass("unfocused")):t||""!=e.value||(e.value=e.defaultValue,document.id(e).addClass("unfocused"))}catch(a){ta.util.error.record(a,"clearFieldFocus")}}};
define("ta/util/Object",["vanillajs","ns-exporter"],function(t,e){var r={};return r.typeOf=function(t){return Object.prototype.toString.call(t).match(/(\w+)\]$/)[1].toLowerCase()},r.merge=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n){t||(t="array"===r.typeOf(n)?[]:{});for(var o in n){var a=n[o];if(n.hasOwnProperty(o)&&"undefined"!==r.typeOf(a)){var i=r.typeOf(a);if("string"===i||"number"===i||"boolean"===i||"function"===i||null===a){t[o]=a;continue}t[o]=r.merge(t[o],a)}}}}return t},e.exportTo(r,"ta.util"),r});
define("ta/Core/TA.Store",["vanillajs","ns-exporter","ta/util/Object"],function(e,r,t){"use strict";var n={},a={};return a.store=function(e,r){return n[e]=r,r},a.retrieve=function(e){return n[e]},a.has=function(e){return"undefined"!=typeof n[e]},a.retrieveOrStore=function(e,r){var t=n[e];return"undefined"==typeof t&&(n[e]=r,t=r),t},a.remove=function(e){var r=n[e];return delete n[e],r},a.keep=function(e,r){var t,n=a.retrieve(e);t=n?n instanceof Array?n:[n]:[],r instanceof Array?r.forEach(function(e){t.contains(e)||t.push(e)}):t.push(r),a.store(e,t)},a.merge=function(e,r){a.store(e,t.merge(a.retrieve(e)||{},r))},a.asInt=function(e,r){var t=parseInt(a.retrieve(e));return isNaN(t)?r||0:t},a.asFloat=function(e,r){var t=parseFloat(a.retrieve(e));return isNaN(t)?r||0:t},a.executeCallbacks=function(e){if(a.has(e)){var r=a.retrieve(e);if(!r instanceof Array)return;for(var t=0;t<r.length;t++)r[t]()}},r.exportTo(a,"ta"),a});
define("utils/browserutils",["vanillajs"],function(e){"use strict";var o={},n=window.navigator?window.navigator.userAgent.toLowerCase():"",a=window.navigator?window.navigator.platform.toLowerCase():"",r=n.match(/(opera|ie|firefox|chrome|crios|trident|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],i="ie"==r[1]&&document.documentMode;return"trident"===r[1]&&(r[1]="ie",r[2]=parseInt(r[2],10)+4),o.name="version"==r[1]?r[3]:r[1],o.version=i||parseFloat("opera"==r[1]&&r[4]?r[4]:r[2]),o.Platform={name:n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]},o[o.name]=!0,o[o.name+parseInt(o.version,10)]=!0,o.Platform[o.Platform.name]=!0,o});
define("utils/stopevent",["vanillajs"],function(){return function(e){return e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1),!1}});
define("utils/form-to-json",["vanillajs"],function(){"use strict";function e(e,n,r){e in r?(Array.isArray(r[e])||(r[e]=[r[e]]),r[e].push(n)):r[e]=n}return function(n){for(var r={},i={file:1,reset:1},t={DATALIST:1,OUTPUT:1},a={checkbox:1,radio:1},o=0;o<n.elements.length;o++){var l=n.elements[o],s=l.name;if(s){var u=l.nodeName,f=l.type;if("SELECT"===u)for(var v=0;v<l.options.length;v++){var c=l.options[v];c.selected&&e(s,c.value,r)}else"INPUT"===u?f in a?l.checked&&e(s,l.value,r):f in i||e(s,l.value,r):u in t||e(s,l.value,r)}}return r}});
define("utils/is-element",["vanillajs"],function(){return function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}});
define("api-mod",["lib/jquery-amd","utils/browserutils","utils/stopevent","utils/form-to-json","utils/to-array","utils/is-element"],function($,browser,stopEvent,formToJson,toArray,isElement){"use strict";var exports={};return exports.fn=function(fn){switch(typeof fn){case"function":return fn;case"string":var f=null;try{f=eval(fn)}catch(t){}if(!f){var ns=fn.split("."),n=ns.pop();try{ns=eval(ns.join(".")),f=ns&&ns._magic&&ns._magic.partial(n)}catch(t){}}if(f&&"function"==typeof f)return f}return null},exports.bind=function(t,e){return Function.prototype.bind.apply(t,Array.prototype.slice.call(arguments,1))},exports.inDocument=function(t){return t=exports.find(t),!!t.parentNode&&11!==t.parentNode.nodeType},exports.addEvent=function(t,e,r){$(t).on(e,r)},exports.fireEvent=function(t,e,r){$(t).trigger(e,r)},exports.removeEvent=function(t,e,r){$(t).off(e,r)},exports.removePropertyEvent=function(t,e,r){"on"!==e.substr(0,2)&&(e="on"+e);var o=t.getAttribute(e);if(o){var n,s=r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");n=o.replace(new RegExp(s+"\\s*\\([^)]*\\);?|(ta\\.call|requireCallLast|requireCallIfReady)\\s*\\(\\s*['\"]\\s*"+s+"[^)]*\\);?"),""),t[e]=n.trim()}},exports.store=function(t,e,r){$(t).data(e,r)},exports.retrieve=function(t,e){return $(t).data(e)},exports.getSize=function(t){if(t=exports.find(t),!t)return null;if(/^(?:body|html)$/i.test(t.tagName)||t===window||t===document){var e=document.compatMode&&"CSS1Compat"!==document.compatMode?document.body:document.body.parentNode;return{x:e.clientWidth,y:e.clientHeight}}return{x:t.offsetWidth,y:t.offsetHeight}},exports.getPosition=function(t,e){if(e=$(e),t=$(t),e.length){var r=e.offset(),o=t.offset();return{left:o.left-r.left,top:o.top-r.top}}return t.offset()},exports.getCoords=function(t){if(t=exports.find(t),!t)return null;var e=this.getSize(t),r=this.getPosition(t);return{top:r.top,left:r.left,bottom:r.top+e.y,right:r.left+e.x,height:e.y,width:e.x}},exports.getOffsetParent=function(t){return $(t).offsetParent().get(0)},exports.getParent=function(t,e){if(t=exports.find(t),!t)return null;if(e){for(;t&&"html"!=t.tagName;t=t.parentNode)if(exports.hasClass(t,e))return t;return null}return t.parentNode},exports.elementOrParentMatches=function(t,e){if(e)for(;t;t=t.parentElement)if(e(t))return!0;return!1},exports.containsElement=function(t,e){if(t=exports.find(t),e=exports.find(e),!t||!e)return!1;for(;null!=e;){if(e===t)return!0;e=e.parentElement}return!1},exports.checkBrowser=function(t){var e=Array.prototype.slice.call(arguments);return e.some(function(t){return!!browser[t]})},exports.containsEvent=function(t,e){if(t=exports.find(t),!e||!t)return!1;var r=e.pageX,o=e.pageY,n=this.getCoords(t);return"fixed"!==$(this.getOffsetParent(t)||t).css("position")&&"undefined"!=typeof r&&"undefined"!=typeof o||(r=e.clientX,o=e.clientY),o>=n.top&&o<=n.bottom&&r>=n.left&&r<=n.right},exports.select=function(t,e){var r=Array.prototype.slice.call(arguments),o=r.length>1&&("string"==typeof r[0]?r.pop():r.shift())||document,n=r.shift();try{return $(n,o).get()}catch(t){return[]}},exports.addClass=function(t,e){$(t).addClass(e)},exports.removeClass=function(t,e){$(t).removeClass(e)},exports.toggleClass=function(t,e,r){$(t).toggleClass(e,r)},exports.hasClass=function(t,e){return t&&$(t).hasClass(e)},exports.destroy=function(t){$(t).remove().get()},exports.find=function(t,e){try{return $(t,e||document)[0]}catch(t){}},exports.scrollTop=function(){var t=void 0!==window.pageYOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop},exports.scrollLeft=function(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft},exports.createElement=function(t,e){var r=document.createElement(t);return e&&$(r).attr(e),r},exports.isElement=isElement,exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.adopt=function(t,e){$(t).append(Array.prototype.slice.call(arguments,1))},exports.setStyle=function(t,e,r){$(t).css(e,r)},exports.stopEvent=stopEvent,exports.mixin=function(t,e){return Array.prototype.slice.call(arguments,1).forEach(function(e){for(var r in e)t[r]=e[r]},t),t},exports.merge=function(t,e){for(var r=Array.prototype.slice.call(arguments,1),o=0,n=r.length;o<n;o++)for(var s in r[o])r[o].hasOwnProperty(s)&&(t[s]=r[o][s]);return t},exports.getFormData=function(t){return formToJson($(t).get(0))},exports.toFormQueryString=function(t){var e=[];t&&"FORM"===t.nodeName&&(t=exports.getFormData(t));for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o&&"object"==typeof o)for(var n=0;o.length&&n<o.length;++n){var s=o[n];s="object"==typeof s?"":String(s),e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}else e.push(encodeURIComponent(r)+"="+encodeURIComponent(String(o)))}return e.join("&")},exports.toArray=toArray,exports.forceReflow=function(t){$(t).each(function(t,e){e.offsetWidth})},exports.stripTags=function(t,e,r){e=e||"";var o=r?"<"+e+"(?!\\w)[^>]*>([\\s\\S]*?)</"+e+"(?!\\w)>":"</?"+e+"([^>]+)?>";return t.replace(new RegExp(o,"gi"),"")},exports});
define("purify",["vanillajs"],function(e){function n(e,n){return e?t(e)?(window.IS_DEBUG&&console.error("You're using a jQuery object where you shouldn't. Check the stack trace and fix it!"),n&&e.length>1?e.get():e.get(0)):e.forEach&&(e.length<=1||!n)?e[0]:e:e}function t(e){return!!(e.animate&&e.get&&e.eq&&e.each)}return n});
define("utils/json-to-url",["vanillajs"],function(){"use strict";return function(n){return n?Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"):""}});
define("utils/asdf-encoder",["ns-exporter","vanillajs"],function(e){"use strict";var t={};return t.getOffset=function(e){return e>=97&&e<=122?e-61:e>=65&&e<=90?e-55:e>=48&&e<=71?e-48:-1},t.asdf=function(e){for(var t={"":["&","=","p","6","?","H","%","B",".com","k","9",".html","n","M","r","www.","h","b","t","a","0","/","d","O","j","http://","_","L","i","f","1","e","-","2",".","N","m","A","l","4","R","C","y","S","o","+","7","I","3","c","5","u",0,"T","v","s","w","8","P",0,"g",0],"q":[0,"__3F__",0,"Photos",0,"https://",".edu","*","Y",">",0,0,0,0,0,0,"`","__2D__","X","<","slot",0,"ShowUrl","Owners",0,"[","q",0,"MemberProfile",0,"ShowUserReviews",'"',"Hotel",0,0,"Expedia","Vacation","Discount",0,"UserReview","Thumbnail",0,"__2F__","Inspiration","V","Map",":","@",0,"F","help",0,0,"Rental",0,"Picture",0,0,0,"hotels",0,"ftp://"],"x":[0,0,"J",0,0,"Z",0,0,0,";",0,"Text",0,"(","x","GenericAds","U",0,"careers",0,0,0,"D",0,"members","Search",0,0,0,"Post",0,0,0,"Q",0,"$",0,"K",0,"W",0,"Reviews",0,",","__2E__",0,0,0,0,0,0,0,"{","}",0,"Cheap",")",0,0,0,"#",".org"],"z":[0,"Hotels",0,0,"Icon",0,0,0,0,".net",0,0,"z",0,0,"pages",0,"geo",0,0,0,"cnt","~",0,0,"]","|",0,"tripadvisor","Images","BookingBuddy",0,"Commerce",0,0,"partnerKey",0,"area",0,"Deals","from","\\",0,"urlKey",0,"'",0,"WeatherUnderground",0,"MemberSign","Maps",0,"matchID","Packages","E","Amenities","Travel",".htm",0,"!","^","G"]},r="",a=0;a<e.length;a++){var n=e.charAt(a),o=n;t[n]&&a+1<e.length?(a++,o+=e.charAt(a)):n="";var s=getOffset(e.charCodeAt(a));r+=s<0||"String"==typeof t[n][s]?o:t[n][s]}return r},e.exportTo(t),t});
define("utils/urlutils",["vanillajs","utils/asdf-encoder"],function(e,n){"use strict";function t(e,n,t){var o=new RegExp("(-"+n+"([0-9]+))|([?&]"+t+"=([0-9]+))"),r=o.exec(e);if(r){if("undefined"!=typeof r[2])return Number(r[2]);if("undefined"!=typeof r[4])return Number(r[4])}}function o(e){return t(e,"d","detail")||t(e,"g","geo")}function r(e){for(var n={},t=e.split("#")[0].split("?")[1]||"",o=t.split("&"),r=0;r<o.length;r++){var i=o[r].split("=");i[0]&&(n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]))}return n}function i(e){var n=[];for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];if(o&&"object"==typeof o)for(var r=0;o.length&&r<o.length;++r){var i=o[r];i="object"==typeof i?"":String(i),n.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}else n.push(encodeURIComponent(t)+"="+encodeURIComponent(String(o)))}return n.join("&")}function f(e){return location.protocol+"//"+location.hostname+e}function u(e){return e=e||"",e.indexOf("http")===-1&&(e=f(e)),e.replace("http://","https://")}function a(e){var n=d.exec(e);return{protocol:n?n[1]:"",host:n?n[2]:""}}var d=/^([^:]+:)\/\/([^\/\?]+)/,l="undefined"!=typeof window&&window.asdf||("undefined"!=typeof global&&global.asdf?global.asdf:n.asdf);return{asdf:l,getUrlArgNumeric:t,getUrlPageLoc:o,getUrlQueryArgs:r,toQueryString:i,https:u,getParts:a}});
define("ajax-request",["utils/json-to-url","utils/urlutils"],function(t,e){function r(t){var r=document.createElement("a");r.href=t;var s=e.getParts(r.href);return s.protocol!==window.location.protocol||s.host!==window.location.hostname}function s(t,e,s){try{r(t)||e.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(t){}try{var n=s["content-type"]||"application/x-www-form-urlencoded; charset=utf-8";e.setRequestHeader("Content-Type",n)}catch(t){}try{var o=s.accept||"text/html, */*";e.setRequestHeader("Accept",o)}catch(t){}try{var a=s["x-requested-by"];a&&e.setRequestHeader("X-Requested-By",a)}catch(t){}}function n(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){throw new Error("Can't create XMLHttpRequest or similar")}}}}return function(e,r){"object"==typeof e&&(r=e,e=r.url),r=r||{};var o=r.method||r.type||"GET",a="string"==typeof r.data?r.data:t(r.data);return new Promise(function(t,c){var u=n(),i=!1;u.onreadystatechange=function(){i||u.readyState!==XMLHttpRequest.DONE||(i=!0,u.status>=200&&u.status<=299?(r.success&&r.success(this.responseText,this.status,u),t(this.responseText)):u.status>0&&(r.error&&r.error(u,this.status,this.statusText),c(this.responseText)),r.complete&&r.complete(u,this.statusText))},"get"===o.toLowerCase()&&"string"==typeof a&&a.length>0&&(e+=("?"===a[0]?"":"?")+a,a=null),u.open(o,e,!r.synchronous),s(e,u,r),u.send(a)})}});
define("utils/object/set-props",["vanillajs"],function(){"use strict";return function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n}});
define("utils/object/shallow-copy",["utils/object/set-props","vanillajs"],function(t){"use strict";return function(r){var e;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){e=[];for(var n=0;n<r.length;++n)e.push(r[n])}else e=t({},r);return e}});
define("utils/objutils",["utils/object/set-props","utils/object/shallow-copy","vanillajs"],function(r,t){"use strict";function e(){var r,t,n,o,i,f,u=arguments[0]||{},c=1,l=arguments.length,a=!1;for("boolean"==typeof u&&(a=u,u=arguments[c]||{},c++),"object"==typeof u||h(u)||(u={});c<l;c++)if(null!=(r=arguments[c]))for(t in r)n=u[t],o=r[t],u!==o&&(a&&o&&(j(o)||(i=y(o)))?(i?(i=!1,f=n&&y(n)?n:[]):f=n&&j(n)?n:{},u[t]=e(a,f,o)):void 0!==o&&(u[t]=o));return u}function n(r){if("object"!=typeof r||null===r||w(r))return r;for(var t in r)r.hasOwnProperty(t)&&(r[t]=n(r[t]));return d(r)}function o(r){if("object"!=typeof r||null===r)return r;for(var t in r)if(r.hasOwnProperty(t)){var e=r[t];null===e?delete r[t]:o(e)}return r}function i(r){var t;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){t=[];for(var e=0;e<r.length;++e)t.push(i(r[e]))}else{t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=i(r[n]))}return d(t)}function f(r){var t;if("object"!=typeof r||null===r)return r;if(r.constructor===Array){t=[];for(var e=0;e<r.length;++e)t.push(f(r[e]))}else{t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=f(r[n]))}return t}function u(r){var t;if("object"!=typeof r||null===r)return r;if(t=r,r.constructor===Array){P(r)&&(t=[],t.length=r.length);for(var e=0;e<r.length;++e)t[e]=u(r[e])}else{P(r)&&(t={});for(var n in r)r.hasOwnProperty(n)&&(t[n]=u(r[n]))}return t}function c(r,t){if(r!==t){if(!r)return!t;if(!t||r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1}return!0}function l(r,t){if(r!==t){if(!r)return!t;if(!t)return!1;if(y(r)&&y(t))return c(r,t);var e=Object.keys(r);if(!c(e,Object.keys(t)))return!1;for(var n=0;n<e.length;n++)if(r[e[n]]!==t[e[n]])return!1}return!0}function a(r,t){var e,n,o={};for(e=0;e<r.length;++e)n=r[e],o[n[t]]=n;return o}function s(r,t){var e=r[t];if(!e&&!r.propertyIsEnumerable(t))throw"missing property: "+t;return e}function p(r,t){for(var e in r)r.hasOwnProperty(e)&&!t(r,r[e])&&delete r[e];return r}function y(r){return Array.isArray?Array.isArray(r):"[object Array]"===Object.prototype.toString.call(r)}function b(r,t,e){var n;if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,r,e);for(n=t.length,e=e?e<0?Math.max(0,n+e):e:0;e<n;e++)if(e in t&&t[e]===r)return e}return-1}function h(r){var t={};return r&&"[object Function]"===t.toString.call(r)}function j(r){var t,e;return!(!r||"[object Object]"!==Object.prototype.toString.call(r))&&(!(t=Object.getPrototypeOf(r))||(e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor,"function"==typeof e&&Object.toString.call(e)===Object.toString.call(Object)))}function v(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(e);return t}function O(r,t){for(var e in r)if(r.hasOwnProperty(e)&&t(r[e],e,r))return r[e]}function g(r,t,e){var n,o=0,i=r.length,f=void 0===i||h(r);if(e)if(f){for(n in r)if(t.apply(r[n],e)===!1)break}else for(;o<i&&t.apply(r[o++],e)!==!1;);else if(f){for(n in r)if(t.call(r[n],n,r[n])===!1)break}else for(;o<i&&t.call(r[o],o,r[o++])!==!1;);return r}var d=function(r){return r},w=function(r){return!0},P=function(r){return!1};return"function"==typeof Object.freeze&&(d=Object.freeze.bind(Object),P=Object.isFrozen.bind(Object),w=Object.isFrozen.bind(Object)),{setProps:r,deepFreeze:n,deepFreezeCopy:i,unfreezeForDust:u,undefineNulls:o,shallowCopy:t,deepCopy:f,shallowEquals:l,index:a,need:s,filterProps:p,keys:v,isArray:y,inArray:b,isFunction:h,isPlainObject:j,each:g,extend:e,find:O}});
define("utils/decoder",["common/trackingStreams"],function(r){function e(e){if(e=e.replace(/\-/g,"+").replace(/\_/g,"/"),e.length%4!==0)for(var n=4-e.length%4,t=0;t<n;t++)e+="=";for(var i,a,o,c,f,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="",h="",l="",s=0;s<e.length;s+=4){if(o=d.indexOf(e.charAt(s)),c=d.indexOf(e.charAt(s+1)),f=d.indexOf(e.charAt(s+2)),l=d.indexOf(e.charAt(s+3)),o==-1||c==-1||f==-1&&l==-1)return void r.error({"string":e},"string contains invalid base64 letter");i=o<<2|c>>4,a=(15&c)<<4|f>>2,h=(3&f)<<6|l,g+=String.fromCharCode(i),64!=f&&(g+=String.fromCharCode(a)),64!=l&&(g+=String.fromCharCode(h)),i=a=h="",o=c=f=l=""}return unescape(g)}return{base64Decoder:e}});
define("utils/urlDecoder",["utils/decoder"],function(e){function t(t){if(!t)return null;var n=4;return t=e.base64Decoder(t),t=t.substring(n,t.length-n)}function n(e){return e.getAttribute("href")||t(e.getAttribute("data-params"))}function r(e,n,r,o){new Event(e).preventDefault();var u=n.getAttribute("data-params");return!!u&&(!!(u=t(u))&&(r&&(u+=r),o?window.open(u,"_blank"):window.location=u,!1))}function o(e){if(!u(e))return e;var n=e.substring(c,e.length);return t(n)}function u(e){return e&&"string"==typeof e&&0==e.indexOf(d)&&e.length>c}function i(e){var t=/TAP\|.+?(?=%2F)/.exec(e),n=t[0],r=o(n),u=e.replace(n,r);window.open(u)}var d="TAP|",c=d.length;return{decodeUrl:t,getUrl:n,goToLink:r,decodeProductCode:o,isObfuscatedProductCode:u,goToCommerceLinkWithProductCode:i}});
define("ta/Core/TA.Record",["vanillajs","ns-exporter","ta/Core/TA.Store","purify","ajax-request","utils/objutils","utils/urlDecoder"],function(e,t,n,r,a,o,i){"use strict";var u={},l={},c=[],s=8,d="impressionTrackingTree",g=0,f=1,v=2,p="UserTracking",m="impression",h="action",k="pageview",y="search",E=[],T=60,P=function(e){return"function"==typeof e},b=function(e,t){try{if(!e||"object"!=typeof t)return;if(window.JSON&&JSON.stringify){var n=JSON.stringify(t);n&&n.length<1e5&&(E.push([e,n]),E.length>T&&E.shift())}}catch(e){}},_=function(e,t,n,r){a(e,t).then(n,r),b(e,t)},S=function(){if(require.defined("ta/util/Error")){var e=require("ta/util/Error");e.record.apply(e,arguments)}else ta&&ta.m&&P(ta.m.recordJSError)&&ta.m.recordJSError(arguments)},C=function(e){return"undefined"==typeof e||null==e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},w=function(e){var t=[];for(var n in e){var r=e[n];t.push(C(n)+"."+C(r))}return t.join("*")},A=function(e){return"undefined"==typeof e||null===e?"":("string"!=typeof e&&(e=e.toString()),e.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*").replace(/\~/g,"!~"))},N=function(e){var t=[];for(var n in e){var r=e[n];t.push(A(n)+"."+A(r))}return t.join("*")},R=function(e){var t=/(https?:\/\/[^\/]+)?\/([^#.?-]*)/,n=t.exec(e);return n&&"undefined"!=typeof n[2]?n[2]?n[2]:"Home":null},O=function(){var e=u.getPageData();if(e&&e.url)return e.url.substring(1);var t=/\/([^-]*)/.exec(window.location.pathname);return t?t[1]:null},I=function(e,t,n){var r=new RegExp("(-"+t+"([0-9]+))|([?&]"+n+"=([0-9]+))"),a=r.exec(e);if(a){if("undefined"!=typeof a[2])return a[2];if("undefined"!=typeof a[4])return a[4]}return null},M=function(e){return I(e,"d","detail")||I(e,"g","geo")},x=function(e){var t=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return!!t&&(t=t[1],0===t.indexOf("%1%")&&(t=t.substring(3)),decodeURIComponent(t))},L=function(e,t,n){try{var r;n.encode&&(t=encodeURIComponent(t)),n.domain&&(t+="; domain="+n.domain),n.path&&(t+="; path="+n.path),n.duration&&(r=new Date,r.setTime(r.getTime()+1e3*n.duration),t+="; expires="+r.toGMTString()),n.secure&&(t+="; secure"),document.cookie=e+"="+t}catch(e){S(e,"_setCookieInSeconds",null,arguments)}},q=function(){return ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")?ta.m.store.get("bookingSessionId"):null},D=function(){var e=!1;return"boolean"==typeof ta.userLoggedIn&&(e="boolean"==typeof ta.userSecurelyLoggedIn?ta.userLoggedIn?ta.userSecurelyLoggedIn?v:f:g:ta.userLoggedIn),e},H=function(e,t){var r={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:M(document.location.href),gads:R(t),gadl:M(t),gapu:ta.uid,gams:D()},a=q();if(!r.gass)throw new Error("Src servlet undefined, gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);if(!r.gads)throw new Error("Dst servlet undefined. gac:"+r.gac+", gaa:"+r.gaa+", gal:"+r.gal);n.has("gatt")&&(r.gatt=n.retrieve("gatt")),a&&(r.bsid=a),L("EVT",w(r),{domain:cookieDomain,duration:5,encode:!0,path:"/"})},U=function(e){if(!e||!e.className||!e.firstChild)return!1;var t=new RegExp("\\b"+d+"\\b"),n=e.firstChild.nodeType,r=e.firstChild.nodeValue;return t.test(e.className)&&n===s&&""!==r},j=function(){};require.defined("page-model")&&require(["page-model"],function(e){var t=e.session,r=t.analyticsInfo;r&&(n.keep("partials.pageProperties",r.pagePropertyStringForCurrentPageview),n.store("gaMemberState",r.memberState),t.analyticsInfo&&require.defined("ta/Core/TA.Prerender")&&require("ta/Core/TA.Prerender")._init(!0)),j=function(){r&&c.push(JSON.parse(r.jsonForCurrentPageview)),j=function(){}}}),u.getPageData=function(){return j(),c[c.length-1]},u.pushPageData=function(e){j(),e&&c.push(e)},u._GARecordRequest=function(e,t){var r,a={gac:e[1],gaa:e[2],gal:e[3],gav:e[4],gani:e[5],gass:O(),gasl:document.location?M(document.location.href):null,gapu:ta.uid,gams:D()},o=q();return t&&(a.gacl=t),n.has("gatt")&&(a.gatt=n.retrieve("gatt")),o&&(a.bsid=o),r=require.defined("utils/BatchRequest")?{get:function(){require("utils/BatchRequest").queue("/GARecord",a)}}:{get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/GARecord?"+J(a),!0),e.send(null)},1)}},b("/GARecord",a),r};var J=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};l.urlArgLookup=function(e,t){var n=new RegExp("[\\?&]"+e+"=(\\w+)"),r=n.exec(t);return r&&"undefined"!=typeof r[1]?r[1]:null},u._validatedTrackEventArray=function(e,t,n,r,a){return e&&"string"!=typeof e&&(e=e.toString()),t&&"string"!=typeof t&&(t=t.toString()),n&&"string"!=typeof n&&(n=n.toString()),r?"number"!=typeof r&&(r=parseFloat(r),isNaN(r)&&(r=0)):r=0,"boolean"!=typeof a&&(a=a===!0),["_trackEvent",e,t,n,r,a]},u._toEvtParams=function(e){try{var t={gac:e.module,gaa:e.action,gal:e.context,gav:e.value,gani:e.noninteraction};return t.gass=O(),t.gasl=M(document.location.href),t.gapu=ta.uid,t.gams=D(),t}catch(t){S(t,"analytics._toEvtParams",null,e)}},u._trackEventAfterAjax=function(e){try{l.trackDMPBehavior(e.module,e.action,e.context,e.value,e.noninteraction)}catch(t){S(t,"analytics._trackEventAfterAjax",null,e)}},l.getEventPathOptions=function(e,t,n){try{var r=Z(n,e);if(!r)return void S(null,"ta.getEventPathOptions - invalid element",null,arguments);var a=z(r);return t&&(a.noninteraction=t),a}catch(e){S(e,"ta.getEventPathOptions",null,arguments)}},u._trackEventPathAfterAjax=function(e){try{l.trackEventOnPage(e.category,e.action,e.label,e.value,e.noninteraction)}catch(e){S(e,"analytics._trackEventPathAfterAjax",null,arguments)}},l.trackPhysicalCommerce=function(e,t,n,r){try{var a=u._validatedTrackEventArray(e,"Commerce-Physical",t,n,!1);u._GARecordRequest(a,r).get()}catch(e){S(e,"ta.trackPhysicalCommerce",null,arguments)}},l.trackAttemptedCommerce=function(e,t,n){try{l.trackDMPBehavior(e,t,n,null,null)}catch(e){S(e,"ta.trackAttemptedCommerce",null,arguments)}},l.trackPhysicalAndAttemptedCommerce=function(e,t,n,r,a){l.trackPhysicalCommerce(e,t,r,a),l.trackAttemptedCommerce(e,t,n,r)},l.trackImpressionEventOnPage=function(e,t,n,r){e=e||"",t=t||"",n=n||"",r=r||0,l.trackEventOnPage(e,t,n,r,!0)},l.trackEventOnPage=function(e,t,n,r,a){i.isObfuscatedProductCode(e)&&(e=i.decodeProductCode(e)),i.isObfuscatedProductCode(t)&&(t=i.decodeProductCode(t)),i.isObfuscatedProductCode(n)&&(n=i.decodeProductCode(n));try{var o=u._validatedTrackEventArray(e,t,n,r,a);u._GARecordRequest(o).get()}catch(e){S(e,"ta.trackEventOnPage",null,arguments)}},l.trackEventOnPageOnce=function(e,t,r,a){var o,i="eventsAlreadyTracked";o="object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.get(i):n.retrieve(i),o||(o={},"object"==typeof ta&&ta.m&&ta.m.store?ta.m.store.add(i,o):n.store(i,o));var u=e+"|"+t+"|"+r;o[u]||(l.trackEventOnPage(e,t,r,0,a),o[u]=!0)},l.trackDMPBehavior=function(e,t,n,r,a){},l.setEvtCookie=function(e,t,n,r,a){try{var o=u._validatedTrackEventArray(e,t,n,r,!1);if(H(o,a),require.defined("ta/common/behavior/dmp/DMP")){var i=require("ta/common/behavior/dmp/DMP");i.isEnabled()&&i.sendEventBehavior(e,t,n,r,X())}}catch(e){S(e,"ta.setEvtCookie",null,arguments)}};var W=function(e){var t;try{if(t=x("MEVT")||"",t.length>0&&(t+="~"),t+=N(e),t.length>1024)throw"MEVT Cookie is full";L("MEVT",t,{domain:cookieDomain,duration:5,encode:!0})}catch(e){return S(e,"_appendMevtCookie",null,arguments),!1}return!0},G="trk",B=G.length,V="etk",F=/^([A-Z]{1,2}:)?[A-Za-z_0-9\-\.]+$/,X=function(){var e="undefined"!=typeof event?event:window.event;return e?e.target||e.srcElement:document.activeElement};u.getCommentTrackingPath=function(e,t){return Z(e,t)};var Z=function(e,t){if(e=r(e),!e&&(e=X(),!e))return S(null,"_getCommentTrackingPath - no element provided or event target element",null,arguments),null;if(1!=e.nodeType)return null;var n=[];if(t&&"string"==typeof t&&""!==t&&F.test(t)){if("P:"==t.substring(0,2))return n.push(t.substring(2)),n;n.push(t)}if("undefined"==typeof e.previousSibling)return S(null,"_getCommentTrackingPath - browser does not support previousSibling",null,arguments),n;e:for(var a=e;a!=document.body;a=a.parentNode){if(null==a){S(null,"_getCommentTrackingPath - LOOP_PARENT_NODES got unexpected null node",null,arguments);break}for(var o=0,i=a.previousSibling;null!=i;i=i.previousSibling)if(i.nodeType==s){var u=i.nodeValue;if(u==V){o++;continue}if(u.substring(0,B)!=G)continue;if(o>0){o--;continue}var l=u.substring(B).split("/");l||S(null,'ta._getCommentTrackingPath - cannot split context class: "'+u+'"',null,arguments);for(var c=l.length-1;c>=0;c--){var d=l[c],g=F.exec(d);if(g){if("P:"==g[1]){var f=g[0].substring(2);n.push(f);break e}n.push(g[0])}else S(null,'ta._getCommentTrackingPath - tracking prefix used with invalid context: "'+l[c]+'"',null,arguments)}}}return n},z=function(e){if(0===e.length)return null;var t={action:e[0],label:"",value:"1",category:e[e.length-1]};e.shift();for(var n=e.length-2;n>=0;n--)t.label+=e[n],n>0&&(t.label+="/"),"N:"==e[n].substring(0,2)&&(t.value=e[n].substring(2));return""===t.label&&(t.label="Unknown"),t};l.trk=function(e,t,n,a){n=r(n);try{var o=n?n.getAttribute("data-trk-path"):null;if(o)o=o.replace("P:",""),o=o.split("/"),o.reverse();else if(o=Z(n,e),!o||!o.length){var i="";if(n)if(n.outerHTML){var u=document.createTextNode(n.outerHTML),c=document.createElement("div");c.appendChild(u),i=c.innerHTML.substring(0,100)}else n.nodeName?i=n.nodeName:i+=n;else void 0===n?i="undefined":null===n&&(i="null");return e||(e=null===o?"null path":void 0===o?"undefined path":o.hasOwnProperty("length")?0===o.length?"empty path":o.join(","):"path: "+o),void S(null,"ta.trk - invalid element for "+e+" from "+i,null,arguments)}l.trkWithPath(o,t,a)}catch(e){S(e,"ta.trk",null,arguments)}},l.trkWithPath=function(e,t,n){try{if(!e||!e.length)return void S(null,"ta.trkWithPath - no path in arguments",null,arguments);if(n&&n.length>0&&e.length&&e.splice)for(var r=n.length-1;r>=0;r--)"string"==typeof n[r]&&e.splice(1,0,n[r]);var a=z(e);l.trackEventOnPage(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.trkWithPath - "+e,null,arguments)}},l.trkImpTree=function(e){try{if(!U(e))return void S(null,"ta.trkImpTree called with invalid trackTreeElem!",null,arguments);var t=e.firstChild.nodeValue;te(t)}catch(e){S(e,"ta.trkImpTree",null,arguments)}},l.recordImpression=function(e,t){if(!e)return void(t&&t());try{te(Q(e),t)}catch(e){S(e,"ta.recordImpression",null,arguments),t&&t()}};var $="<!--",K="-->",Q=function(e){var t=e.indexOf($),n=0,r=e.indexOf(K);return t!==-1&&(n=t+$.length),r===-1&&(r=e.length),e.substring(n,r)};u.stripCommentsFromTree=Q;var Y="\\",ee="/";u.appendAscendTokens=function(e){var t=0,n=0,r=0;for(t=0;t<e.length;t++)if(e[t]===ee)r++;else if(e[t]===Y)for(n=t+1;n<e.length&&e[n]===Y;)r--,t=n,n++;if(r>0)for(t=0;t<r;t++)e+=Y;return e};var te=function(e,t){var n={tTreeStr:e&&e.trim(),tTreeUid:ta.uid&&ta.uid.trim(),tTreeLastReferrer:window.location.href,tTreeIsMemberSignedIn:D()};ta.m&&ta.m.store&&ta.m.store.has("bookingSessionId")&&(n.bsid=ta.m.store.get("bookingSessionId")),n.tTreeStr?n.tTreeUid||S(new Error("tTreeUid is null/undefined/empty."),"ta._sendTreeImpression",null):S(new Error("tTreeStr is null/undefined/empty."),"ta._sendTreeImpression",null),_("/ImpressionRecord",{method:"POST",url:"/ImpressionRecord",data:n},t)};l.setEvtCookieAndPath=function(e,t,n){try{n||(n=X());var r=Z(n,e);if(!r)return void S(null,"ta.setEvtCookieAndPath - invalid element for "+e,null,arguments);var a=z(r);if(!t){for(;"A"!=n.nodeName&&n!=document.body;)n=n.parentNode;if(t=n.href,!t)return void S(null,"ta.setEvtCookieAndPath - no url parameter and cannot find a.href",null,arguments)}l.setEvtCookie(a.category,a.action,a.label,a.value,t)}catch(e){S(e,"ta.setEvtCookieAndPath",null,arguments)}},l.recordPageview=function(e,t){if(e){var n=R(e),r="/PageviewRecord",a=t?t:{};n&&(a.servletName=n,_(r,{method:"POST",data:a}))}},l.recordTabView=function(e,t,n){if(e&&t){var r=e+"-"+t,a="/PageviewRecord",o=n?n:{};o.servletName=r,_(a,{method:"POST",data:o})}},l.resetPageDataUrl=function(){var e=u.getPageData();e&&(e.url="")},l.trackEngagementClick=function(e,t){return e&&t?P(t)?void t(e):void S(new Error("passed variable selectionFunction is not a function"),"ta.trackEngagementClick",null,t):void S(new Error("object/selectionFunction is null/undefined"),"ta.trackEngagementClick",null,arguments)},l.placementNodeSelectorTracker=function(e){if(!e||!e.element||!e.type)return void S(new Error("object/element/type is null/undefined"),"ta.placementNodeSelectorTracker",null,e);var t,n,r,a,o,i,c=e.element,s=e.type,d=u.getCommentTrackingPath(c);if(s+="_Click",!d)return void S(new Error("trackTreePath is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);if(d.length<1)return void S(new Error("trackTreePath is missing information"),"ta.placementNodeSelectorTracker",null,arguments);if(t=d[d.length-1],!t)return void S(new Error("placement is null/undefined"),"ta.placementNodeSelectorTracker",null,d);for(i=d.length-1;i>=0;i--)if(o=d[i],o&&0===o.indexOf("N:")){n=o;break}if("HH_MainList"===t||"Maps_MetaBlock"===t)n="N:1";else if(!n)return void S(new Error("positionNode is null/undefined"),"ta.placementNodeSelectorTracker",null,d);if(r=n.split(":"),!r||2!==r.length)return void S(new Error("positionSplit appears to be incorrect"),"ta.placementNodeSelectorTracker",null,arguments);if(a=r[1],!a)return void S(new Error("position is null/undefined"),"ta.placementNodeSelectorTracker",null,arguments);var g=parseInt(a,10);if(isNaN(g))return void S(new Error("position is not a number"),"ta.placementNodeSelectorTracker",null,a);var f=re(t);if(f!==-1){a=g+f,t=ne(t);var v,p=document.querySelectorAll(".ui_tab_bar .ui_tab.selected");1===p.length&&(p=p[0],v=p.getAttribute("data-currentSort")),l.trackEventOnPage(t,s,v,a)}};var ne=function(e){if(!e)return e;if("Hotels"!==O())return"Clicks_"+e;var t;return"Hotels_MainList"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e?t="Clicks_"+e:"sponsored_coupon_listing"===e&&(t="Clicks_Hotels_MainList_Sponsored"),document.getElementById("sponsoredCouponListingWrap")&&"Clicks_Hotels_MainList"===t&&(t+="_Sponsored"),t+=ta.widgets.calendar.getCheckRatesData()?"_PostDates":"_PreDates"},re=function(e){if(!e)return S(new Error("placement is null/undefined"),"ta._shiftOrdinalsWithSponsoredPlacement",null,e),-1;if("Hotels"!==O())return 0;var t=0,r=n.retrieve("hac.offset");if(r&&r>0&&(t=r),!document.getElementById("sponsoredCouponListingWrap"))return t;var a,o=document.querySelector("#HAC_RESULTS .pageNumbers .current");if(o){var i=o.getAttribute("data-page-number");if(a=parseInt(i,10),isNaN(a)||!a)return S(new Error("pageNumber is not a number"),"ta._shiftOrdinalsWithSponsoredPlacement",null,i),-1}return"Hotels_MainList"===e?t+=a:(r&&r>0&&("sponsored_coupon_listing"===e||"Hotels_MainList_Sponsored"===e||"Hotels_MainList_Discovery_Sponsored_Listing"===e)&&(t+=a-1),t)};l.getRecentTARecords=function(){return E},l.addTypeAheadMevt=function(e){return e.t="ta",W(e)},l.addGARecordMevt=function(e,t,r,a,o){try{var i=u._validatedTrackEventArray(e,t,r,a,!1),l={t:"ga",gac:i[1],gaa:i[2],gal:i[3],gav:i[4],gani:i[5],gass:O(),gasl:M(document.location.href),gads:R(o),gadl:M(o),gapu:ta.uid,gams:D()},c=q();if(!l.gass)throw new Error("Src servlet undefined, gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(!l.gads)throw new Error("Dst servlet undefined. gac:"+l.gac+", gaa:"+l.gaa+", gal:"+l.gal);if(n.has("gatt")&&(l.gatt=n.retrieve("gatt")),c&&(l.bsid=c),W(l),require.defined("ta/common/behavior/dmp/DMP")){var s=require("ta/common/behavior/dmp/DMP");s.isEnabled()&&s.sendEventBehavior(e,t,r,a,X())}}catch(e){S(e,"ta.addGARecordMevt",null,arguments)}},l.trackInteractions=function(e,t,n){var r={elmtSource:e,elmtType:n};r=o.extend(r,t),_("/UserInteractionRecord",{method:"POST",url:"/UserInteractionRecord",data:r},null,function(){S(null,"taRecord.trackInteractions",null,r)})},l.addInteractionsMEVT=function(e,t,n){var r={t:"ia",ias:e,iak:ae(t),iat:n};W(r)};var ae=function(e){var t="";return Object.keys(e).forEach(function(n){t=t+n+"^"+e[n]+"+"}),0==t.length?t:t.slice(0,-1)},oe=!1,ie=function(e,t){return oe||(oe=require.defined("page-model")?require("page-model").session:{}),!!oe.useERUserTracking&&!(oe.ERUserTrackingEventNames&&oe.ERUserTrackingEventNames.length>0&&oe.ERUserTrackingEventNames.indexOf(e)<0)},ue=function(e,t,n){if(ie(e,t)){var r=oe.uid&&{request_uid:oe.uid}||{},a={event_name:e,event_type:t,attr:JSON.stringify(o.extend(n,r))},i={get:function(){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET","/UserTrackingRecord?"+J(a),!0),e.send(null)},1)}};return i.get()}n.event_name=e,l.trackEventOnPage(p,t,JSON.stringify(n))};l.trackImpressionWithJson=function(e,t){ue(e,m,t)},l.trackActionWithJson=function(e,t){ue(e,h,t)},l.trackPageviewWithJson=function(e,t){ue(e,k,t)},l.trackSearchWithJson=function(e,t){ue(e,y,t)},l.trackUnifiedEvent=ue,t.createNs(u,"ta","analytics"),t.exportTo(l,"ta");var le={};return t.exportTo(u,le),t.exportTo(l,le),le});
define("utils/ajax",["lib/jquery-amd","ta/Core/TA.Record","utils/form-to-json"],function(e,t,i){function n(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}return function(r,a){r.substr||(a=r);var s=e.extend({},a,{dataFilter:function(e,t){return"json"==t&&(e=e.replace(/^\s*while\s*\([^)]*\);?/,"")),a&&a.dataFilter&&a.dataFilter.call(this,e,t),e}});s.xhrFields=s.xhrFields||{},s.xhrFields.withCredentials=!0,n(s.data)&&(s.data=i(s.data));var c=s.trackEvent;return c&&(e.extend(s,t._toEvtParams(c)),s.complete=function(){t._trackEventAfterAjax(c),a&&a.complete&&a.complete.apply(this,arguments)}),s.evalScripts&&(s.success=function(t,i,n){if(t&&t.substr){var r,s;e.parseHTML?(r=e(e.parseHTML(t,document,!0)),s=r.filter("script").add(r.find("script"))):(r=e("<div>"+t+"</div>"),s=r.find("script")),s.each(function(e,t){if(t.innerHTML)if(window.execScript)window.execScript(t.innerHTML);else if(window.eval)window.eval(t.innerHTML);else{var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.text=t.innerHTML,document.head.appendChild(i),document.head.removeChild(i)}})}a&&a.success&&a.success.apply(this,arguments)}),r.substr?e.ajax(r,s):e.ajax(s)}});
define("mixins/Events",["vanillajs"],function(e){"use strict";var t=function(){this.events={},Array.prototype.slice.call(arguments).forEach(function(e){this.events[e]=[]},this)};return t.create=function(){function e(e){return t.apply(this,e)}return e.prototype=t.prototype,function(){return new e(arguments)}}(),t.extend=function(e,r){var i=Object.create(t.prototype);return i.delegate=e,t.apply(i,r),i},t.prototype.on=t.prototype.addListener=function(e,t){return void 0!==this.events[e]?this.events[e].push(t):this.delegate?this.delegate.on(e,t):this.events[e]=[t],this},t.prototype.off=t.prototype.removeListener=function(e,t){if(void 0!==this.events[e])if(t){var r=this.events[e].indexOf(t);r>=0&&this.events[e].splice(r,1)}else this.events[e].length=0;else this.delegate&&this.delegate.removeListener(e,t);return this},t.prototype.removeAllListeners=function(e){if(e&&void 0!==this.events[e])this.events[e].length=0;else if(e)this.delegate&&this.delegate.removeAllListeners&&this.delegate.removeAllListeners(e);else{for(var t in this.events)this.events.hasOwnProperty(t)&&(this.events[t].length=0);this.delegate&&this.delegate.removeAllListeners&&this.delegate.removeAllListeners()}},t.prototype.hasListeners=function(e){if(e){if(this.events.hasOwnProperty(e))return this.events[e].length>0;if(this.delegate&&this.delegate.hasListeners)return this.delegate.hasListeners(e)}return!1},t.prototype.emit=function(e,t){if(this.events[e]){var r=Array.prototype.slice.call(arguments,1);this.events[e].slice(0).forEach(function(t){if(t)try{t.apply(this,r)}catch(t){"string"==typeof t&&(t=new Error(t));var i="Error in event handler for "+e;if(require.defined("ta/util/Error"))require("ta/util/Error").record(t,i);else{var s=require.defined("ta")&&require("ta");s&&s.log&&s.log.error?s.log.error(t,i):s&&s.m&&s.m.recordJSError?s.m.recordJSError([t,i]):"undefined"!=typeof console&&(console.error||console.log)(i,t)}}},this)}else this.delegate&&this.delegate.emit&&this.delegate.emit.apply(delegate,arguments);return this},t});
define("ta/util/Cookie",["vanillajs","ns-exporter"],function(e,o){var t=0,n=5e3,i={cookiePIDName:"NPID",ONE_DAY:864e5,ONE_HOUR:36e5,setPIDCookie:function(e){i.write(i.cookiePIDName,e,n,"/",window.cookieDomain)},removePIDCookie:function(){try{i.write(i.cookiePIDName,"",t,"/",window.cookieDomain)}catch(e){}},canSet:function(){return document.cookie="SessionTest=true",!!document.cookie.match("(^|;)\\s*SessionTest=true\\s*(;|$)")&&(document.cookie="SessionTest=; expires=Thu, 01 Jan 1970 00:00:01 GMT",!0)},readRaw:function(e){e=e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var o=document.cookie.match(new RegExp("(?:^|;)\\s*"+e+"=([^;]*)"));return!!o&&o[1]},remove:function(e,o,t){i.write(e,"",new Date(1e3),o,t)},write:function(e,o,t,n,i){"number"==typeof t&&(t=new Date(Date.now()+t)),document.cookie=e+"="+o+(t?"; expires="+t.toUTCString():"")+(n?"; path="+n:"")+(i?"; domain="+i:"")},setOneTimeCookieOnFQDN:function(e,o){return i.write(e,o,5e3),!0},setOneTimeCookie:function(e,o){return i.write(e,o,5e3,null,window.cookieDomain),!0}};return o.exportTo({setPID:i.setPIDCookie}),o.createNs(i,"ta.util","cookie"),i});
define("ta/util/Error",["vanillajs","api-mod","utils/ajax","ns-exporter","mixins/Events","utils/browserutils","ta/util/Cookie","ta"],function(r,e,t,o,n,a,i,c){function s(r,t){var o="_extraInfoError_:Problem storing extra info.",n={},a="";try{if(Array.isArray(t)||"[object Arguments]"===Object.prototype.toString.call(t)){for(var i={},c=0;c<t.length;c++){var s=t[c],l=typeof s;"string"===l||"number"===l||"boolean"===l?i[c]=s:i[c]=l}t=i}e.merge(n,r,t)}catch(e){n=r}try{if(a=JSON.stringify(n))return a.length>y&&(a=a.substring(0,y)),a.replace(/[\r\n]/g,"")}catch(r){}return o}function l(r){return"undefined"!=typeof r&&null!==r?r.toString().replace(/[\r\n]/g,""):"null or undefined"}function u(r,e,t){var o,n="";if(r&&r.stack)try{var a,i,c=r.stack.split("\n"),s=[],l=0;c[1]&&c[1].match(/\.record /)&&c.splice(1,1);for(var u=0;u<c.length;u++){var f=c[u];if(!(f.indexOf(r.message)>=0)){var d=!!f.match(/\/jquery-|\/mootools|\(native\)|\(native code\)|\[native code]/);f=f.replace(/^(.*)http.+\/([^\/]*)/,"$1$2").replace(/(\?.{20})[^:)]+/,"$1...").replace(/^(?:\s+\w+\s*([^\s]+)|([^\s]+)@)\s*\(?([^)]*)\)?$/,"$1$2 ($3)").replace(/\s*\(\)/,""),a&&d?i||(s.push("..."),i=!0,l++):(s.push(f),d&&l++),d||(i=!1),a=d}}s.length-l<=E&&(o=!0),n=s.join()}catch(r){h&&(console.error("Debug: error.stack handler failed "),console.error(r))}if(!n&&t)try{for(var g=[],m=t.caller,v=0;m&&v++<20;){var S=m.toString(),y=S.replace(/^function\s+([^(\s]+).*/,"$1")||"anonymous";if(!y.match(/onErrorFunc|_getErrorStack/)){var w=Math.min(S.length,100),R=S.substring(0,w).replace(/(\n|\r|\'|\")/g," ");g.push(R)}m=m.caller}g.length<5&&(o=!0),n=g.join(" :: ")}catch(r){h&&console.error("Debug: exception getting callee stack "+r)}if(!n&&r&&r.filename&&(n=r.filename.replace(/^.*\/([^\/]+)$/,"$1"),r.lineno&&(n+=":"+r.lineno),r.colno&&(n+=":"+r.colno)),e&&o){var b=p.getSelectorString(e);b&&(n&&(n+=", "),n+="DOM_STACK: "+b)}return n?n:"failed to get stack"}function f(){var r=[];return[].forEach.call(document.getElementsByTagName("script"),function(e){var t=e.src;d(t)&&r.push(t.substring(t.indexOf("/js")+1))}),r.join(", ").substring(0,y)}function d(r){if(!r||!r.indexOf)return!1;var e=window.CDNHOST||"";return h&&""==e?null!=r.match(/(js3\/|js\/)/):0==r.indexOf(e)}function g(r){if(!r||!r.indexOf)return!1;var e="noPage";try{e=window.location.href}catch(r){}return r===e}function m(){var r=(a.Platform.ios||a.Platform.android)&&!window.isTabletOnFullSite,e=document.cookie.indexOf("TAmobilemode=main")>=0;return r&&!e}function v(r){if(m()){var e={eMsg:"msg",eStak:"stack",eUrl:"url"};for(var t in e){var o=e[t];r[o]=r[t]}r.file=r.url||document.URL,r.site=window.SITE_VERSION,r.loaded=O?"dom_ready":"not_loaded"}}var p={},S=new n("error","beforeSend"),h=window.IS_DEBUG,y=3e3,w=h?100:10,E=4,R="unset",b=0,O=!1;return p.record=function(r,e,o,n,a,y){y=y||{},r?"string"==typeof r&&(r=new Error(r)):r=new Error("Stub error to build stack.");var E=!1;try{var O=Object.prototype.toString.call(r);E=O===Object.prototype.toString.call(new Error)||O.match(/\[object Error[\w]*]/)}catch(r){}if(E&&!r.stack)try{throw r}catch(e){e&&e.stack&&(r=e)}o=o||window.event||{};var N=o.target;if(b>=w)return void(h&&console.error("Maximum JS errors reached. Not reporting."));b++;var _=!1;try{_=document.body.className.match(/\bjs_logging\b/)||m()}catch(r){}if(_){var j=!0;n&&n.hasOwnProperty("error_script")&&!d(n.error_script)&&!g(n.error_script)&&(j=!1);var k={};if(N)try{k.eTarg=p.getSelectorString(N)}catch(r){}"undefined"!=typeof debugCacheKey&&(k.key=debugCacheKey);var T=window.pageServlet;T||(T="unknown"),k.servlet=T,a&&"string"==typeof a||(a="ERROR"),j?!h&&b>1&&(a="WARN",k.warnReason="notFirstJSError"):(a="WARN",k.warnReason="externalError");var x={"extraInfoError":"Problem storing extra info"},A={};try{var D="",L="";N&&("function"!=typeof N.id&&(D=N.id),L=N.className);var P=window.serverPool||"",I="";window.MooTools&&(I+="MooTools "),require.defined("lib/jquery-amd")&&(I+="jQuery "),A={"TARGET_ID":D,"TARGET_CLASS":L,"PAGE_UID":c&&c.uid,"INTERNAL_JS":f(),"CLIENT_POOL":P,"COOKIES_ENABLED":i.canSet(),"JS_LIBS":I},j||(A.INTERNAL_ERROR="false"),b>1&&(A.PRIOR_JS_PAGE_ERRORS=b-1)}catch(r){n=x}k.xInfo=s(A,n);try{k.eUrl=window.location.href}catch(r){}try{var J=c.page.getDates("STAYDATES");J?k.eDates=J[0].toLocaleDateString("en-US")+" - "+J[1].toLocaleDateString("en-US"):k.eDates="No dates set"}catch(r){}var $="No Error";try{if(E)$=r.name+"-"+r.message;else if("object"==typeof r)if(r.name&&r.message)$=r.name+"-"+r.message;else{$="non-Error object "+Object.prototype.toString.call(r)+" passed, sample properties - ";var M=0;for(var C in r)if(r.hasOwnProperty(C)&&($+=C.substring(0,30)+": "+(r[C]&&r[C].toString?r[C].toString().substring(0,20):r[C])+", ",++M>4))break}else $="non-Object error passed: "+(""+r).substring(0,60);$=$.replace(/[\r\n]/g,"")}catch(r){}k.eMsg=$;try{k.eBlk=l(e).substring(0,150)}catch(r){}var U;if(!r.stack)try{U=o&&o.callee||arguments&&arguments.callee}catch(r){}var B=u(r,N,U);B&&(k.eStak=B);try{S.emit("beforeSend",k)}catch(r){}k.eLogLevel=a,v(k),h&&!y.isglobal&&(console.error("/JSErrorRecord:"),r.stack?console.error(r.stack):B?console.error(B):console.error("No stack"));try{t({url:"/JSErrorRecord",data:k,method:"POST",type:"POST"})}catch(r){k={"eBlk":"JSErrorRecord Error","servlet":T,"eLogLevel":"ERROR","eMsg":"no error retrieved"},t({url:"/JSErrorRecord",data:k})}if(h&&(window.ERRORS||(window.ERRORS=[])).push(k),S.emit("error",$,e,a,k.eStak),"unset"==R&&(R=i.readRaw("JS_ERROR_HANDLING")),R){if(R.match(/alert/)){var G="";for(var F in k)k.hasOwnProperty(F)&&(G=G+F+": "+k[F]+"\n");alert(G)}R.match(/console/)&&window.console&&console.error(k)}}},p.getSelectorString=function(r){for(var e=[];r&&"HTML"!=r.tagName&&r!=document;r=r.parentNode){var t=r.tagName;r.id&&(t+="#"+r.id),r.className&&(t+="."+r.className.trim().replace(/\s+/g,".")),e.unshift(t)}return e.join(">")},p.ajaxFailure=function(r,t,o,n){p.record(null,r,null,e.merge({status:t.status},o),n||"ERROR")},p.enableDomReadyParam=function(){O=!0},p.on=S.on.bind(S),p.off=S.off.bind(S),(a.firefox&&a.version<5||a.ie&&a.version<10)&&(p.record=function(){window.console&&console.error("Unreported error: "+[].slice.call(arguments).join(", "))}),o.createNs(p,"ta.util","error"),p});
!function(e,t,a,r){var n=function(a){var n=function(){return"undefined"!=typeof dd&&dd.commerce&&dd.commerce.checkrates},i=function(e,t,a){var r="sprite-",n=r+t,i=r+a;e.hasClass(n)&&(e.removeClass(n),e.addClass(i))},o=function(){var e=a.retrieve("meta.chevronTracking"),t=a.retrieve("meta.chevronAction"),r=a.retrieve("meta.chevronLabel");e&&t&&(r?a.trackEventOnPage(e,t,r):a.trackEventOnPage(e,t)),a.remove("meta.chevronTracking"),a.remove("meta.chevronAction"),a.remove("meta.chevronLabel")},l=function(e,t){var r,n,i,o;null!==t&&null!==e&&(a.commerce.meta.suppressCRArea(e),r=e.getElement(".metaDatesNotChosen"),n=e.getElement(".metaDatesChosen"),n&&(r&&(r.addClass("miniMetaHideHdr"),r.removeClass("miniMetaShowHdr")),n.addClass("miniMetaShowHdr"),n.removeClass("miniMetaHideHdr")),e.getElements(".minimalist_datepicker_wrap.hidden").each(function(e){e.removeClass("hidden")}),i=e.getElement(".postShowMetaCR"),null!=i&&i.destroy(),i=e.getElement(".postShowMetaCRLB"),null!=i&&i.destroy(),i=e.getElement(".postShowMetaCRLBPCR"),null!=i&&i.destroy(),o=e.getElement("fieldset"),a.commerce.meta.adoptMiniMetaElem(o,t),a.fireEvent("refreshedDOMContent",e))},s=function(e){e&&(e.getElement(".hacMiniComplete")&&!e.getElement(".anyOfferCompletedSuccessfully")?(e.getElements(".photos_lb_update_avail").each(function(e){e.addClass("hidden")}),e.getElements(".photos_lb_update_no_avail").each(function(e){e.removeClass("hidden")})):(e.getElements(".photos_lb_update_avail").each(function(e){e.removeClass("hidden")}),e.getElements(".photos_lb_update_no_avail").each(function(e){e.addClass("hidden")})))},c=function(e){e.getElements(".textLinks").each(function(e){e.addClass("hidden")}),e.getElements(".maybeCheck").each(function(e){e.addClass("hidden")}),e.getElements(".disclaimer").each(function(e){e.addClass("hidden")}),e.getElements(".photos_lb_update_links").each(function(e){e.removeClass("hidden")}),e.getElements(".taxesAndFees").each(function(e){e.addClass("hidden")}),s(e)};return{updateInlineMeta:function(e,t){if(!a.widgets.calendar.hasPageDates())return void a.commerce.meta.popInlineDatePicker(t,e);var r=a.id("CHECK_RATE")},popInlineDatePicker:function(e,t){if(t){var r,n="_inm";if(e&&e.target&&e.target.getParent("#CHECK_RATES_CONT")&&(r=a.id("date_picker_"+t)),r=r||a.id("date_picker_"+t+n)){var i=r.getParent(".date_picker_calendar_wrap");i&&i.onclick&&(i.onclick(e,i,t,n),i.fireEvent("click",e,i,t,n),function(){try{a.retrieve("avail.data."+t+n).calendar.calendarOverlay.position()}catch(e){}}.delay(200))}}},clickMetaShowPrices:function(t){var r;return t=new Event(t),a.page&&a.page.usingUnifiedDates?(a.page.gatherDatesNear(t.target),void t.stop()):a.widgets.calendar.hasPageDates()?(r=e.getElement(".cr_lb_overlay"),void(r&&r.overlay&&r.overlay.hide())):void a.widgets.calendar.setErrorStyling(t.target)},showLowestPriceCTA:function(t){var r=t?"metaLowestPriceCTAInline":"metaLowestPriceCTA";if(a.has(r)){var n=!0;if(t){var i=e.getElement(".meta_rates_content");n=i&&"block"==i.style.display}if(n){var o=a.retrieve(r);if(o.hasOwnProperty("idx")){var l=t?"Meta_LP_CTA_Display_Inline":"Meta_LP_CTA_Display",s=0===o.idx?"Not_Displayed":"Displayed",c=o.idx+"";a.trackEventOnPage(l,s,c)}var d=t?"LP_CTA_INLINE":"LP_CTA",m=a.id(d);m&&function(){m.fade("in")}.delay(1e3)}}},chevronHover:function(e,t,r,n){if(t&&r&&n){var i=a.id(t).getElement("."+n);i&&(i.removeClass(n),i.addClass(r))}},chevronBlur:function(e,t,r,n){if(t&&r&&n){var i=a.id(t).getElement("."+r);i&&(i.removeClass(r),i.addClass(n))}},hoverTopOffer:function(){var t=e.getElement(".rgba_gray_arrow_up");t&&(t.removeClass("rgba_gray_arrow_up"),t.addClass("rgba_yellow_arrow_up"))},blurTopOffer:function(){var t=e.getElement(".rgba_yellow_arrow_up");t&&(t.removeClass("rgba_yellow_arrow_up"),t.addClass("rgba_gray_arrow_up"))},hoverBookBtn:function(e){var t=a.id(e);i(t,"bookBtnOrangeIdle","bookBtnOrangeOver"),i(t,"bookBtnGreyIdle","bookBtnGreyOver"),i(t,"bookIdle","bookOver"),i(t,"goIdle","goOver"),i(t,"selectIdle","selectOver"),i(t,"bookSmallIdle","bookSmallOver"),i(t,"goSmallIdle","goSmallOver"),i(t,"selectSmallIdle","selectSmallOver"),i(t,"goBtnGrey","goBtnGreyOver"),i(t,"goBtnOrange","goBtnOrangeOver"),i(t,"chevronOrangeIdle35","chevronOrangeOver35"),i(t,"chevronGreyIdle27","chevronGreyOver27"),i(t,"chevronIdle_ylw","chevronHover_ylw")},blurBookBtn:function(e){var t=a.id(e);i(t,"bookBtnOrangeOver","bookBtnOrangeIdle"),i(t,"bookBtnGreyOver","bookBtnGreyIdle"),i(t,"bookOver","bookIdle"),i(t,"goOver","goIdle"),i(t,"selectOver","selectIdle"),i(t,"bookSmallOver","bookSmallIdle"),i(t,"goSmallOver","goSmallIdle"),i(t,"selectSmallOver","selectSmallIdle"),i(t,"goBtnGreyOver","goBtnGrey"),i(t,"goBtnOrangeOver","goBtnOrange"),i(t,"chevronOrangeOver35","chevronOrangeIdle35"),i(t,"chevronGreyOver27","chevronGreyIdle27"),i(t,"chevronHover_ylw","chevronIdle_ylw")},hoverSmallBookBtn:function(e){var t=a.id(e).getElement(".bookBtn");null!=t&&(i(t,"bookBtnOrangeIdleSmall","bookBtnOrangeIdleSmallOver"),i(t,"bookSmallIdle","bookSmallOver"),i(t,"goSmallIdle","goSmallOver"),i(t,"selectSmallIdle","selectSmallOver"))},blurSmallBookBtn:function(e){var t=a.id(e).getElement(".bookBtn");null!=t&&(i(t,"bookBtnOrangeIdleSmallOver","bookBtnOrangeIdleSmall"),i(t,"bookSmallOver","bookSmallIdle"),i(t,"goSmallOver","goSmallIdle"),i(t,"selectSmallOver","selectSmallIdle"))},providerHoverOn:function(e,t,r){var n=a.id(e);n.addClass("partnerHvr");var i=n.getElement(".price_overlay");if(i){var o=n.getElement(".perNight"),l=o.getCoordinates().width+29;i.addClass("show"),a.util.i18n.isRtl()?i.setStyles({position:"absolute",left:l,zindex:"101"}):i.setStyles({position:"absolute",right:l,zindex:"101"})}var s=e.getElement(".bookBtn");s&&a.commerce.meta.hoverBookBtn(s),a.store("meta.hoverProvider",t),a.store("meta.hoverProviderPosn",r)},providerHoverOff:function(e){var t=a.id(e);t.removeClass("partnerHvr");var r=t.getElement(".price_overlay");r&&r.removeClass("show");var n=e.getElement(".bookBtn");n&&a.commerce.meta.blurBookBtn(n),a.remove("meta.hoverProvider")},restoreProviderHover:function(){var e=a.retrieve("meta.hoverProvider"),t=a.retrieve("meta.hoverProviderPosn");if(e&&t){var r=a.id("PROVIDER_BLOCK");if(r){var n=r.getElements(".metaProvider"),i=r.getElement(".provider_"+e);n&&i&&i.hasClass("order_"+t)&&(n.each(function(e){a.commerce.meta.providerHoverOff(e)}),a.commerce.meta.providerHoverOn(i,e,t))}}},updateNavArea:function(e){var t=a.retrieve("ta.meta.navArea");(!t||t.indexOf(e)<0)&&a.store("ta.meta.navArea",e)},loadBestPriceXsell:function(e,n,i,o){try{if(a.retrieve("checkrates.one_second_xsell")!==!0)return;var l=i&&i.isInline,s="",c="";if(a.isHRTabs2014()&&l)return;var d=1e3,m="loadBestPriceXsell_numTries",g="loadBestPriceXsell_curCancelKey";l&&(m="loadBestPriceXsellInline_numTries",g="loadBestPriceXsellInline_curCancelKey");var v="meta.xsellTravelData";l&&(v="meta.xsellTravelDataInline");var u=a.retrieve(v);if(null==o){o=(new Date).getTime(),a.store(m,0),u=a.widgets.calendar.getCheckRatesData(),a.store(v,u);var h=a.id(n);if(h){h.innerHTML="",h.setStyle("height",0),h.setStyle("opacity","0");var f=a.retrieve("metaCheckRatesOverlay");f=a.id(f),!l&&f&&f.container&&f.container.getPosition&&t.scrollTo(0,f.container.getPosition().y)}l?a.commerce.meta.metaInYourMeta_resetInline():a.commerce.meta.metaInYourMeta_resetLB()}var p="loadBestPriceXsell_"+o+"_cancel";if(l&&(p="loadBestPriceXsellInline_"+o+"_cancel"),a.retrieve(p))return;if(a.has(g)){var _=a.retrieve(g);_!=p&&a.store(_,!0)}a.has(p)||(a.store(p,!1),a.store(g,p));var C=a.retrieve(m),E=C+1;if(a.store(m,E),!u)return;var y="";typeof pageServlet!==r&&pageServlet&&(y=pageServlet);var S={};a.meta&&a.meta.update&&(S=a.commerce.meta.getMetaParams());var k=Object.merge(u,{"detail":e,"try":a.retrieve(m),"reqNum":i.secondTry?"2":"1","type":s,"isInlineRequest":l?"1":"0","openedVendors":c,"origServlet":y},S),P=Object.toQueryString(k);if(!P||!P.trim())return void a.util.error.record(null,"ta.commerce.meta.loadBestPriceXsell  - toQueryString failure",null,k);var w,O=a.retrieve("ta.meta.navArea");try{w=a.commerce.meta.tracking.setTimingForNavArea(O)}catch(e){a.util.error.record(e,"problem locking timing in ta.commerce.meta.loadBestPriceXsell")}if(w&&(k.metaRequestTiming=w),a.commerce.meta.tracking.hasAnySuppressedAreas()){var A=a.commerce.meta.tracking.getSuppressedAreasAsString();A&&(k.suppressImpressionsOnComplete=A)}new Request({"url":"/MetaBestPriceCrossSellAjax?"+P,"evalScripts":!0,"onSuccess":function(t){if(!a.retrieve(p)){var r=t.contains("xsellHacStatusReady")||t.contains("xsellHacStatusSOL")||i.secondTry;if(r){var s=a.id(n);s&&(s.setStyle("height",0),s.setStyle("opacity","0"),s.setContent(t),a.commerce.meta.metaInYourMeta(n,{xsell:!0,inline:l})),a.store(m,0)}else setTimeout(function(){var t={secondTry:!0,xsell:!0,isInline:l,isHrRedesignTest:!1,openedVendors:c};a.commerce.meta.loadBestPriceXsell(e,n,t,o)},d)}},"onFailure":function(){a.store(m,0),a.util.error.record(null,"ta.commerce.meta.loadBestPriceXsell - MetaBestPriceCrossSellAjax request failed")}}).send()}catch(e){a.util.error.record(e,"ta.commerce.meta.loadBestPriceXsell")}},loadGeoCrAutoBroadenContents:function(t,r){var n=5,i=1e3,o="QC_Meta_Mini|GeoCheckRatesLightBox";try{var l=function(){c=!1},s=function(){t.fireEvent("close",t),t.hide()},c=!0,d=a.id(t.inner);if(!d)throw new Error("Cannot find parent: "+t);var m=function(e){var t=0;e.each(function(e){var a=e.getHeight();a>t&&(t=a)}),e.each(function(e){e.setStyle("height",t)})},g=a.commerce.meta.tracking.setTimingForNavArea(o);t.addEvent("close",l);var v={"d":r,"area":o,"metaRequestTiming":g},u=a.widgets.calendar.getCheckRatesData();if(!u)throw new Error("Cannot find dates and/or adults");Object.merge(v,u),a.meta&&a.meta.update&&Object.merge(v,a.commerce.meta.getMetaParams());var h=0,f=function(){c&&(++h,v.attempt=h,new Request({"url":"/GeoCrAutoBroadenAjax","data":v,"method":"get","evalScripts":!0,"onSuccess":function(t){try{if(!c)return;var r=Elements.from(t,!0),o=r.getElement(".progress").filter(function(e){return e})[0];if(o)if(/\bfallbackUrl-(\S+)\b/.exec(o.className)){var l=RegExp.$1,g=a.util.URL.getServletNameFromUrl(l);g||(a.util.error.record(null,"geo check rate cannot get servlet name from "+l,null,v),g="UNKNOWN"),a.setEvtCookie("MetaGeoLightBox","unload","Redirect",0,"/"+g),e.location.href=l}else d.setStyles({"overflow":"hidden","height":"auto"}),d.innerHTML="",d.adopt(r),m(d.getElements("#GEO_CR_AUTO_BROADEN .recs .rec .info .distance")),m(d.getElements("#GEO_CR_AUTO_BROADEN .recs .rec .info .amenity")),!o.hasClass("isHacComplete")&&h<n?setTimeout(f,i):(d.getElements(".showUntilLast").dispose(),d.getElements(".hideUntilLast").removeClass("hidden"));else a.util.error.record(null,"geo check rate malform response missing progress",null,v),s()}catch(e){a.util.error.record(e,"cannot process geo check rate response",null,v),s()}},"onFailure":function(e){a.util.error.record(null,"geo check rate request failed: status="+(e&&e.status),null,v),s()}}).send())};f()}catch(e){a.util.error.record(e,"cannot send geo check rate initial request"),s&&s()}},xSellResponses:{lb_hac:!1,lb_xsell:!1,inline_hac:!1,inline_xsell:!1},metaInYourMeta_resetLB:function(){a.commerce.meta.xSellResponses.lb_hac=!1,a.commerce.meta.xSellResponses.lb_xsell=!1},metaInYourMeta_resetInline:function(){a.commerce.meta.xSellResponses.inline_hac=!1,a.commerce.meta.xSellResponses.inline_xsell=!1},hacIsBlockingXSell:function(e){var t=a.commerce.meta.xSellResponses;return e?t.inline_xsell:t.lb_xsell},metaInYourMeta:function(e,t){var r=t&&t.inline,i=t&&t.xsell,o=a.commerce.meta.xSellResponses;if(r?i?o.inline_xsell=!0:o.inline_hac=!0:i?o.lb_xsell=!0:o.lb_hac=!0,r&&o.inline_xsell||!r&&o.lb_xsell&&o.lb_hac){var l=a.id("META_PRICE_XSELL"),s=a.id("STATE_OPT_RESPONSE");if(r&&(l=a.id("META_PRICE_XSELL_INLINE"),s=a.id("STATE_OPT_RESPONSE_INLINE")),l&&l.hasClass&&!l.hasClass("hidden"))return;if(s&&s.hasClass&&!s.hasClass("hidden"))return;var c=l,d=0;a.meta&&a.meta.update?d=a.meta.update.getMetaPricesCount(r):n()&&(d=dd.commerce.checkrates.getMetaPricesCount(r)),null==d&&(d=0),d<1&&s&&(c=s);var m=a.id(e);if(m)if(c)a.commerce.meta.revealBestPriceXsell(m,c,r,!1);else{var g="lA";r&&(g+="_Inline");var v=a.id(g);v&&v.removeClass&&v.removeClass("hidden")}}},revealBestPriceXsell:function(e,r,i,o){if(e&&(e=a.id(e)),r&&(r=a.id(r)),!e||!r)return void a.util.error.record(null,"revealBestPriceXsell - required elements missing");r.removeClass&&r.removeClass("hidden");var l=new Fx.Tween(e,{property:"opacity"});if(o){var s=a.retrieve("metaLeaveBehindOverlay");if(s&&s.container){var c=s.container;c.hasClass&&c.hasClass("hidden")&&c.removeClass&&c.removeClass("hidden"),a.meta&&a.meta.cr?a.meta.cr.removePCR():n()&&dd.commerce.checkrates.removePCR()}}else{var d="META_MINI_META_MAYBE";i&&(d="META_MINI_META_MAYBE_INLINE");var m=a.id(d),g=!0;m&&(g=!1);var v="Displayed_Lightbox";i&&(v="Displayed_Inline");var u=r.getElements(".hotelListing").length;0===u&&(u="0",v="Not_"+v),a.trackEventOnPage("Meta_State-Optimized_XSell",v,u)}var h=r.getSize().y,f=new Fx.Tween(e,{property:"height",onComplete:function(){o||l.start(0,1)}});f.start(h);var p=a.retrieve("metaCheckRatesOverlay");p&&p.container&&p.closeBtn&&a.id(t).getScroll().y>p.container.getPosition().y&&a.util.element.scrollIntoView(p.closeBtn)},hideBestPriceXsell:function(e){var t=a.id(e),r=a.id("META_PRICE_XSELL");if(t&&r){var n=new Fx.Tween(t,{property:"height"}),i=new Fx.Tween(t,{property:"opacity",onComplete:function(){n.start(0),r.addClass&&r.addClass("hidden")}});i.start(1,0)}},loadMetaAF:function(r,i,o){try{if(a.retrieve("checkrates.meta_af")!==!0||a.retrieve("ta.redirectingPage"))return;var l="meta_af_last_request",s=(new Date).getTime();a.store(l,s);var c=1e3,d=!1,m=!1;if(a.page&&a.page.usingUnifiedDates&&!a.page.hasDates("STAYDATES"))return;if(!(a.meta&&a.meta.update||"Hotel_Review"===t.pageServlet))return n()?dd.commerce.checkrates.loadMetaAF(r,i,o):void 0;if(d=a.widgets.calendar.getCheckRatesData(),!d)return;var g={};a.meta&&a.meta.update&&(g=a.commerce.meta.getMetaParams()),m=Object.merge(d,{"detail":r,"reqNum":o?"2":"1","type":"af"},g,require("amdloaders").getLoadedFilesParams());var v=Object.toQueryString(m);if(!v||!v.trim())return void a.util.error.record(null,"ta.commerce.meta.loadMetaAF - toQueryString failure",null,m);new Request({"url":"/MetaBestPriceCrossSellAjax","data":m,"evalScripts":!0,"onSuccess":function(t){if(a.retrieve(l)==s){var n=t.contains("xsellHacStatusReady")||t.contains("xsellHacStatusSOL")||o;if(n){var d=a.id(i),m=e.getElement(".clearDates");if(d){d.show(),d.setStyle("height",0),d.setStyle("opacity","0"),d.setContent(t),a.prwidgets.initWidgets(d);var g=e.getElement(".tablet_desktop .mapsv2-more .clearDates");m&&m!=g&&(m.style.display="none");var v=d.getElement(".mainList");if(v){var u=new Fx.Tween(d,{property:"opacity",onComplete:function(){a.fireEvent("refreshedDOMContent",v)}}),h=v.getSize().y,f=new Fx.Tween(d,{property:"height",onComplete:function(){d.setStyle("height","auto"),u.start(0,1)}});f.start(0,h),a.fireEvent("avaf.loaded")}}}else setTimeout(function(){a.commerce.meta.loadMetaAF(r,i,!0)},c)}},"onFailure":function(){a.retrieve("ta.redirectingPage")||a.util.error.record(null,"ta.commerce.meta.loadMetaAF - MetaBestPriceCrossSellAjax request failed")}}).send()}catch(e){a.util.error.record(e,"ta.commerce.meta.loadMetaAF")}},updateProvAreaFromLightBox:function(t){var r=a.retrieve("meta.baseLocationId");if(r&&t==r){var i=a.retrieve("meta.postShowMetaCR"),o=a.retrieve("meta.postShowMetaCRLB"),l=a.retrieve("meta.postShowMetaCRLBPCR");if(i&&o&&l)return void a.commerce.meta.updateProvArea(i,o,l)}a.widgets.calendar.datesExist()&&(a.meta&&a.meta.update?a.meta.update.request(r):n()&&dd.commerce.checkrates.checkRatesMiniMeta(null,e.getElementById("CHECK_RATE"),r,"checkrates"))},updateProvArea:function(r){var n=e.getElement("#CHECK_RATES_CONT.chkRates"),i=e.getElement("#LOC_PHOTO_ALBUMS.photos_lb_update .metaCrosssell .chkRates"),d=e.getElement("#LOC_PHOTO_ALBUMS.photos_lb_update .sidebar .chkRates"),m=e.getElement("#AMENITY_LIGHTBOX.photos_lb_update .chkRates"),g=e.getElement(".similarCarousel"),v=e.getElement(".premiumTimeout");if(g&&v){var u=n.getElement("div.bc_text_content");if(u){var h=r.getChildren()[1];if(h){var f=h.clone(!1);f.innerHTML=h.innerHTML,u.innerHTML="",u.adopt(f)}}}if(i){l(i,r),c(i);var p=e.getElement(".featuredImageWrap.metaCrosssell");if(p){var _=p.getElement(".premium_offers_area");if(_){var C=_.getElements(".offer.wrap.premium"),E=p.getElement(".chkRates");C&&E&&E.toggleClass("noOffers",0===C.length)}}}d&&(l(d,r),c(d)),m&&(l(m,r),s(m)),a.has("meta.isHackathonBC")&&(a.commerce.meta.alignPriceBlocks(),a.has("meta.bc.isRevisedUnavailability")&&a.commerce.meta.truncateProviderNames()),t.fireEvent("postAjaxMetaUpdate"),r&&r.getElement(".hacMiniComplete")&&o(r)},adoptMiniMetaElem:function(e,t){if(null!=e){var a=e.getElement(".disclaimer");null==a||a.getParentBySelector("#hover_table_display_area")||a.destroy();var r=t.clone(!1);r.innerHTML=t.innerHTML,e.adopt(r)}},miniMetaAjax:function(e,t){n()&&dd.commerce.checkrates.miniMetaAjax(e,t)},suppressCRArea:function(e){var t=e.getElements(".miniMetaShow");Array.each(t,function(e){e.removeClass("miniMetaShow"),e.addClass("miniMetaHide")})},clearStoredMiniData:function(){a.retrieve("checkrates.meta_ui_post_click_prices")&&(a.store("meta.postShowMetaCRLBPCR",null),a.store("meta.postShowMetaCR",null),a.store("meta.postShowMetaCRLB",null))},storeMiniData:function(e){if(a.retrieve("checkrates.meta_ui_post_click_prices")){var t=e.getElement(".postShowMetaCR"),r=e.getElement(".postShowMetaCRLBPCR"),n=e.getElement(".postShowMetaCRLB");t&&n&&r&&(a.store("meta.postShowMetaCRLBPCR",r),a.store("meta.postShowMetaCR",t),a.store("meta.postShowMetaCRLB",n))}},providerButtonClicked:function(e){if(e&&!a.has("hotels.hasTimeoutDates")){var t="CheckIn|provider_logo";a.trackEventOnPage("DATEPICKER","OPEN",t,e),a.store("meta.datepicker_tracked",!0)}},moreSitesLinkClicked:function(e){e&&!a.has("hotels.hasTimeoutDates")&&(a.trackEventOnPage("DATEPICKER","OPEN","more_sites_link",e),a.store("meta.datepicker_tracked",!0))},buildMetaHacParamObj:function(){var t={};try{var r=e.getElement("#HAC_FORM input[name=geo]");if(r&&r.value&&(t.geo=r.value),!t.geo){var n=e.getElement("#SEARCH_LHN input[name=geo]");n&&(t.geo=n.value)}var i=e.getElementById("searchAll");if(i&&"true"!=i.value){var o=a.widgets.calendar.getPageInDate();o&&(t.inDay=o.getDate(),t.inMonth=o.getMonth()+1+"/"+o.getFullYear());var l=a.widgets.calendar.getPageOutDate();l&&(t.outDay=l.getDate(),t.outMonth=l.getMonth()+1+"/"+l.getFullYear());var s=a.widgets.calendar.getPageAdultsCount();2!=s&&(t.adults=s),t.searchAll="false"}}catch(e){a.util.error.record(e,"buildHACUrlParams")}return Object.toQueryString(t)},getHACCategory:function(){var t=e.getElements(".tab.selected"),a="1";if(t&&t.length&&t.length>0){var r=t[0].className.match(/cat_(\d+)/);r&&(a=r[1])}return a},buildHACSearchData:function(){var r=t.ta&&a.page&&a.page.getDates&&a.page.getDates("CHECKIN")[0];r||(r=t.ta&&a.widgets&&a.widgets.calendar&&a.widgets.calendar.getPageInDate());var n=t.ta&&a.page&&a.page.getDates&&a.page.getDates("CHECKOUT")[0];n||(n=t.ta&&a.widgets&&a.widgets.calendar&&a.widgets.calendar.getPageOutDate());var i,o=a.widgets.calendar.getPageAdultsCount(),l=e.getElementById("geo");null==l&&(i=e.getElementsByName("geo"),i&&i.length>0&&(l=i[0]));var s;l&&l.value?s=l.value:t.modelGeoId&&(s=t.modelGeoId);var c=!1,d=a.commerce.meta._padZero,m=r?d(r.getDate()):null,g=n?d(n.getDate()):null,v=r?d(r.getMonth()+1)+"/"+r.getFullYear():null,u=n?d(n.getMonth()+1)+"/"+n.getFullYear():null,h={};return h.adults=o,h.geo=s,h.searchAll=c,h.inDateOfMonth=m,h.outDateOfMonth=g,h.inMonthYear=v,h.outMonthYear=u,h.category=a.commerce.meta.getHACCategory(),h},buildMetaHACUrl:function(){var e=a.commerce.meta.buildHACSearchData(),r="/HACSearch?adults="+e.adults+"&geo="+e.geo+"&searchAll="+e.searchAll;e.category&&(r=r+"&cat="+e.category),e.inDateOfMonth&&(r=r+"&inDay="+e.inDateOfMonth),e.outDateOfMonth&&(r=r+"&outDay="+e.outDateOfMonth),e.inMonthYear&&(r=r+"&inMonth="+e.inMonthYear),e.outMonthYear&&(r=r+"&outMonth="+e.outMonthYear);var n=r+t.location.hash;return n},redirectHACSearch:function(){a.setEvtCookie("Mini_meta_LP_chevron_display","Clicked","Unavailable","","/HACSearch"),t.location=a.commerce.meta.buildMetaHACUrl()},_padZero:function(e){return String("0"+e).slice(-2)},anchorToOpenTab:function(){var e=a.id("ReviewsTab"),t=a.id("MetaPricesTab");e&&e.hasClass("selected")?a.commerce.meta.scrollToReviews():t&&t.hasClass("selected")&&(e.click(),a.commerce.meta.scrollToReviews())},scrollToReviews:function(){var e=a.id("REVIEWS");null!=e?a.util.element.scrollIntoView(e):a.util.error.record(null,"couldn't find reviews element on page!")},scrollToId:function(e){e&&a.id(e)&&a.util.element.scrollIntoView(a.id(e))},initNoAvailCarousel:function(){try{var e,t=a.id("ALSO_VIEWED_LIST");if(!t)return;var r=t.getElement("ul");if(!r)return;var n=r.getElements("li").length,i=new Fx.Tween(r,{property:"left"}),o=353,l=1,s=t.getElement(".prev"),c=t.getElement(".next");if(!c||!s)return;var d=function(s){var c,d,m,g;1===l&&s<0||l===n&&s>0||(s<0?a.trackEventOnPage("Pager_Arrows","Scroll_Left","Mini_Carousel_Xsell"):s>0&&a.trackEventOnPage("Pager_Arrows","Scroll_Right","Mini_Carousel_Xsell"),l+=s,c=parseInt(r.getStyle("left"),10),d=o*s*-1,m=c+d,i.start(m),g=t.getElement(".paginator"),g&&(e=1===l&&s<0?"front":l===n&&s>0?"end":"middle",g.className="paginator "+e))};s.addEvent("click",function(){d(-1)}),c.addEvent("click",function(){d(1)})}catch(e){a.util.error.record(e,"ta.commerce.meta.initNoAvailCarousel")}},showRemainingProviders:function(t,r){r=a.id(r),r&&r.destroy(),a.store("checkrates.hr_bc_see_all_click",!0),a.retrieve("ibdm_impression_tracking")&&a.trk("n_more_sites",!1,e.getElement(".premium_offers_area")),e.getElements(".remaining").removeClass("remaining"),a.fireEvent("remainingMetaProvidersShown")},showRemainingProviders_Flyout:function(t,r){r=a.id(r);var n=a.find(".show_remaining_providers_flyout",r)||a.find(".show_remaining_providers_flyout"),i=r.getParent(".chkRates")||e,o=a.select(".remaining",i);try{n&&o.length&&e.body.addEvent("click",function(t){r&&!t.target||!t.target.getParents().contains(r)||n.isDisplayed()?(n.hide(),e.body.removeEvents("click"),a.select(".remaining",n).destroy()):(o.forEach(function(e){n.adopt(e.clone())}),n.show())})}catch(e){a.util.error.record(e,"showRemainingProviders_Flyout")}},alignPriceBlocks:function(){a.util.element.makeTextFitOneLine(".chevron_redesign .offer.premium .priceBlock .price",!0),a.util.element.makeTextFitOneLine(".chevron_redesign .offer.premium .priceBlock .featuredText",!0),a.util.element.makeTextFitOneLine(".chevron_redesign .offer.premium .priceOutsideChevron .price",!0),a.util.element.makeTextFitOneLine(".chevron_redesign .offer.premium .priceOutsideChevron .featuredText",!0),a.util.element.makeTextFitOneLine(".offer.premium .priceBlock.flag_bump .price",!0),a.util.element.fitToContentsHorizontally(".offer.premium .lowest_price_folded .text",0,65),a.select(".chevron_redesign .offer.premium.unsized .loading").setStyle("display","none"),a.select(".chevron_redesign .offer.premium.unsized").removeClass("unsized"),a.util.element.makeSameWidth("#HR_HACKATHON_CONTENT > #HotelDateSearch .postShowMetaCR .priceBlock")},toggleBlueChevronLowestPriceCTA:function(t){if(a.retrieve("meta_guests_field_v2.CTAActivated")&&!e.getElements(".overlay").length){a.has("meta_guests_field_v2.CTATimer")&&clearTimeout(a.remove("meta_guests_field_v2.CTATimer"));var r=a.id("BC_LP_CTA");r&&r.fade&&(t?r.fade("in"):r.fade("out"))}},displayBlueChevronLowestPriceCTA:function(){var t,r,n,i,o,l,s,c,d,m="bcMetaLowestPriceCTA";if(a.has(m)&&!a.has("hr_chevron_redesign")){if(t=a.retrieve(m),t.hasOwnProperty("idx")&&(r=0===t.idx?"Not_Displayed":"Displayed",n=t.idx+"",a.trackEventOnPage("BlueChevron_LP_CTA_Display",r,n)),i=a.id("BC_LP_CTA"),i&&i.fade&&function(){i.fade("in"),a.retrieve("meta_guests_field_v2.enabled")&&(a.store("meta_guests_field_v2.CTATimer",function(){i.fade("out")}.delay(5e3)),a.store("meta_guests_field_v2.CTAActivated",!0))}.delay(700),o=a.id("bc_lp_cta_text")){if(l=o.getSize().y,12==l){for(;o.getSize().y<=l;)o.style.width=""+(o.getSize().x-1)+"px";o.style.width=""+(o.getSize().x+1)+"px"}t.displayTop?(s=i.parentNode.getElement(".priceBlock"),i.style.position="relative",i.style.left=345-o.getSize().x+"px",i.style.top=""+(-s.getSize().y-22)+"px"):(c=i.getElement(".bc_lp_cta_triangle"),i.style.left="-"+(o.getSize().x+20)+"px",c.style.left=""+(o.getSize().x+10)+"px"),o.style.marginTop=""+Math.round((25-o.getSize().y)/2)+"px"}if(d=5800,a.retrieve("check_width_for_CTA_fade")){var g=e.getElement(".bc_lp_cta"),v=e.getElement(".priceBlock");if(g&&v){var u=g.getSize().x+v.getSize().x,h=250;u>h&&!t.displayTop&&function(){i.fade("out")}.delay(d)}}else{var f=a.retrieve("fadeBcLpCTAout");f&&1==f&&!t.displayTop&&function(){i.fade("out")}.delay(d)}}},truncateProviderNames:function(){var t=e.getElement(".textLink");if(t){var r=t.getSize().x,n=Math.max.apply(null,e.getElements(".textLink .price").map(function(e){return e.getParent(".moreLink")?0:e.getSize().x})),i=r-n-28;a.retrieve("meta.paymentsTipText")&&(i-=20),i>0&&$$(".textLinks .providerName").each(function(e){e.getNext(".price")&&e.setStyle("width",i)})}},expandProvidersInline:function(e){if(e=a.id(e)){var t=e.getParent(".metaPriceInfo");if(t){var r=t.getElements(".provider");if(r&&(r.show(),e.hide(),a.retrieve("assisted_booking_desktop_entry"))){var n=e.getParents();n.forEach(function(e){e.hasClass("metaPriceInfo")&&a.meta&&a.meta.treeTrack&&a.meta.treeTrack.hasTrackingTree(e)&&a.trk("n_more_sites",!1,e)})}}}},flipHoverClass:function(e,t){if(e){e=a.id(e);var r=t+"Idle",n=t+"Over";e&&e.toggleClass(r).toggleClass(n)}},trackHotelRatingsInfoClickInHR:function(e){e.target=e.target||e.srcElement,e.target&&e.target.href&&a.setEvtCookie("Ratings_Info","all_hotels","",0,e.target.href)},updateHeaderMsg:function(t,a){var r=e.getElement(t);a&&r&&(r.hasClass("unifiedPickers")||(r.innerHTML=a))},updateHeaderDates:function(){try{if(a.widgets.calendar.hasPageDates()){var e=$$(".dateHeader.inDate"),t=$$(".dateHeader.outDate"),r=a.widgets.calendar.getDatePickerFormat("short"),n=a.widgets.calendar.getDatePickerFormat("classic");if(e){var i=a.widgets.calendar.dateToString(a.widgets.calendar.getPageInDate(),r);Array.each(e,function(e){var t=a.id(e);t.getParent("#meta_on_photo_viewer")||t&&(t.innerHTML=i)})}if(t){var o=a.widgets.calendar.dateToString(a.widgets.calendar.getPageOutDate(),n);Array.each(t,function(e){var t=a.id(e);t&&(t.innerHTML=o)})}}}catch(e){a.util.error.record(e,"ta.commerce.meta.updateHeaderDates")}},enableAdultsPicker:function(){var t=e.getElement(".adultsText");t&&t.addClass("hide");var r=e.getElement(".changeAdults");r&&r.addClass("hide");var n=e.getElement(".overlay .date_picker_adults_wrap");n&&n.removeClass("hide");var i=e.getElement(".overlay .showPriceButtonHide");i&&i.removeClass("showPriceButtonHide"),a.store("meta_guests_field_v2.originalAdults",a.retrieve("date.picker.adultsCount"))},disableAdultsPicker:function(e){if(e&&e.container){var t=e.container.getElement(".adultsText");t&&t.removeClass("hide");var a=e.container.getElement(".changeAdults");a&&a.removeClass("hide");var r=e.container.getElement(".date_picker_adults_wrap");r&&r.addClass("hide");var n=e.container.getElement(".showPriceButton");n&&n.addClass("showPriceButtonHide")}},adultsGoButtonClick:function(e,t,r,n,i){var o=a.widgets.calendar.getPageInDate(),l=a.widgets.calendar.getPageOutDate(),s=o&&o.getDate&&l&&l.getDate;if(s){var c=a.widgets.calendar.getCalendarObjectKey(r,n,"out"),d=a.retrieve(c);if(d){var m=d.calendar;m&&(m.onCalendarOverlayHide(),m.fireEvent("onRangeSelect",[m.crId,m.options.ext]),m.fireEvent("onSelect",[m,e]))}}else a.overlays.Factory.simulateDatePickerClick(e,t,r,n,i)},_hhRedirectIfNoOffers:function(){var r=e.getElements("#HotelDateSearch .offer");if(r&&!a.commerce.meta._overlayOnPage()){a.store("ta.redirectingPage",!0),a.setEvtCookie("NoOffersHH","redirect","",0,"/HotelHighlight");var n=/-r\d+-/;t.location.href=t.location.href.replace("Hotel_Review-","Hotel_Review-s1-").replace("ShowUserReviews-","Hotel_Review-s1-").replace(n,"-")}},getResponseAvailability:function(e){return!!e&&{anyAvailable:!!e.match(/\shacComplete\s.*\sanyOfferCompletedSuccessfully\s/g),allUnavailable:!!e.match(/\shacComplete\s.*\shacMiniOfferNotAvailable\s/g),maybeAvailable:!!e.match(/\shacComplete\s.*\shasDisplayUnavailability\s/g)}},_overlayOnPage:function(){return a.overlays&&a.overlays.getCurrent&&a.overlays.getCurrent()},hhRemoveDatePickerForErrorMessaging:function(t){if(!a.widgets.calendar.hasPageDates())return void a.commerce.meta.clickMetaShowPrices(t);var r=a.id("GEO_CHECK_RATES_BALANCE");r&&r.hide();var n=e.getElement("#HLBASE .unavailHdr");n&&n.removeClass("hidden")},setupMiniMetaOnAccomPolling:function(e){a.pages.hac.updateHACData&&a.hac.filters.updateResults||a.util.error.record(null,"setupMiniMetaOnAccomPolling bad linkage"),a.pages.hac.startHACUpdate(),e&&a.hac.filters.updateResults()},checkRatesCreateGeoCrAutoBroadenLb:function(e,r,n){try{if(a.has("hr_to_hh_redirect_no_offers")&&t.pageServlet&&"HotelHighlight"!==t.pageServlet)return void(a.widgets.calendar.hasPageDates()?a.widgets.calendar.justUpdateSessionDates(function(){a.commerce.meta._hhRedirectIfNoOffers&&a.commerce.meta._hhRedirectIfNoOffers.delay(300)}):a.widgets.calendar.setErrorStyling(new Event(e).target));if(!a.widgets.calendar.hasPageDates())return void a.commerce.meta.clickMetaShowPrices(e);r.getParent(".meta_date_wrapper")?a.trackEventOnPage("MetaGeoLightBox","open","DatePicker",0,!1):a.trackEventOnPage("MetaGeoLightBox","open","ShowPrices",0,!1),a.run("ta.overlays.Factory.loadGeoCrAutoBroadenOverlay",{},r,n)}catch(e){a.util.error.record(e,"ta.commerce.meta.checkRatesCreateGeoCrAutoBroadenLb cannot track/create lightbox")}},metaListingClickReporting:function(e){e&&e.target&&(e.target.hasClass("photo_image")?a.trackEventOnPage("PRICE_SAVER","CLICK","THUMBNAIL"):"A"===e.target.nodeName&&e.target.parentNode.hasClass("review_stubs_item")?a.trackEventOnPage("PRICE_SAVER","CLICK","REVIEW"):e.target.hasClass("property_title")?a.trackEventOnPage("PRICE_SAVER","CLICK","PROPERTY_TITLE"):null!=e.target.getParent(".metaPriceInfo")&&a.trackEventOnPage("PRICE_SAVER","CLICK","META"))},getMetaParams:function(){return{metaReferer:t.pageServlet}},updateSessionDatesRedirect:function(e){a.widgets.calendar.hasPageDates()?a.widgets.calendar.justUpdateSessionDates(function(){t.location.href=e},!1,!0):t.location.href=e}}}(a);a.commerce.meta||(a.commerce.meta={});for(var i in n)n.hasOwnProperty(i)&&(a.commerce.meta[i]=n[i])}(document,window,ta);
ta.commerce.minimeta={ajax:{MAX_POLL_ATTEMPT:13,ALL_HAC_COMPLETE:"hotelsMeta.allHacComplete",LOCS_ON_PAGE:"hotelsMeta.locsOnPage",ATTEMPT_STORE_KEY:"hotelsMeta.ajaxNum",TIME_EXPIRED:"hotelsMeta.timeExpired",MINI_META_APPEAR_LOADING_TIMEOUT:5e3,MINI_META_STOP_LOADING_TIMEOUT:6e4,send:function(e,t){var a=ta.commerce.minimeta.ajax;setTimeout(function(){new Request({method:"post",url:a.getUrl(),data:a.buildPostData(t),onSuccess:function(t){var i=new Element("div",{html:t});a.updateDOM(i),!e&&a.shouldResubmit()&&ta.commerce.minimeta.ajax.send(),a.updateAttemptNum()}}).send()},ta.commerce.meta.polling.getPollWaitTimeForPollingAttempt(ta.retrieve(ta.commerce.minimeta.ATTEMPT_STORE_KEY)))},getUrl:function(){return"/BulkMiniMetaCRAjax"},buildPostData:function(e){var t={};return t.area="QC_Meta_Mini",t.returnAllOffers=!0,t.detail=ta.commerce.minimeta.ajax._getLocOnPageString(e),t.action="getMiniMetaForLocations",t},updateDOM:function(e){var t=e.getElement(".isAllHacComplete");if(t||ta.retrieve(ta.commerce.minimeta.ajax.ALL_HAC_COMPLETE)){ta.store(ta.commerce.minimeta.ajax.ALL_HAC_COMPLETE,!0);var a=$$(".metaDisclaimer");a&&a.hasClass("hidden")&&a.removeClass("hidden")}var i=document.getElements(".listing");i.each(function(t){var a=t.id,i=a.substring(a.indexOf("_")+1),r=e.getElement("."+i);if(ta.commerce.minimeta.ajax.updateLoadingState(e),r){var c=r.getElement(".metaPriceInfo"),m=t.getElement(".metaPriceInfo");ta.commerce.minimeta.ajax._setPrice(c,i),ta.commerce.minimeta.ajax._setAccomType(c,i),c.replaces(m)}})},resetAjaxCall:function(){ta.remove(ta.commerce.minimeta.ajax.ALL_HAC_COMPLETE),ta.remove(ta.commerce.minimeta.ajax.LOCS_ON_PAGE),ta.remove(ta.commerce.minimeta.ajax.ATTEMPT_STORE_KEY),ta.remove(ta.commerce.minimeta.ajax.TIME_EXPIRED)},shouldResubmit:function(){if(ta.retrieve(ta.commerce.minimeta.ajax.ALL_HAC_COMPLETE))return!1;var e=ta.retrieve(ta.commerce.minimeta.ATTEMPT_STORE_KEY);return!e||e<ta.commerce.minimeta.ajax.MAX_POLL_ATTEMPT-1},updateAttemptNum:function(){var e=ta.retrieve(ta.commerce.minimeta.ATTEMPT_STORE_KEY);e?ta.store(ta.commerce.minimeta.ATTEMPT_STORE_KEY,e+1):ta.store(ta.commerce.minimeta.ATTEMPT_STORE_KEY,1)},_getLocOnPageString:function(e){var t=document.getElements(".listing"),a="";return t.each(function(t){var i,r;ta.commerce.minimeta.ajax._isHacComplete(t)&&!e||(r=t.id,i=r.substring(r.indexOf("_")+1),a=a+i+",")}),""===a&&ta.store(ta.commerce.minimeta.ajax.ALL_HAC_COMPLETE,!0),a},_isHacComplete:function(e){return e.getElement(".metaPriceInfo.hacComplete")},_setPrice:function(e,t){var a=e.getElement(".classicPrice");if(a){var i="classicPrice_"+t,r=ta.retrieve(i);if(ta.retrieve("hotels.shouldHideClassicPrices"))a.hide();else if(r&&0!==r){var c=a.getElement(".price");c.set("html",r),a.toggleClass("hidden",!1)}else a.hide()}},_setAccomType:function(e,t){var a=e.getElement(".contactStr");if(a){var i="accomType_"+t,r=ta.retrieve(i);r&&"T_HOTEL"!=r?a.set("html",ta.retrieve("hotels.contactAccom")):a.set("html",ta.retrieve("hotels.contactHotel"))}},updateLoadingState:function(e){if(ta.retrieve(ta.commerce.minimeta.ajax.TIME_EXPIRED)){var t=e.getElements(".loading_bubbles_gry"),a=new Element("span",{"class":"sprite-visitSite"});t.each(function(e){a.clone().replaces(e)});var i=e.getElements(".loadingHeader"),r=ta.retrieve("hotels.checkSites");i.each(function(e){e.set("html",r)})}}},storeAccomDetails:function(){var e=document.getElements(".classicPrices");e.each(function(e){ta.store(e.id,e.value)});var t=document.getElements(".accomTypes");t.each(function(e){ta.store(e.id,e.value)});var a=$$(".metaDisclaimer");a&&a.addClass("hidden")},doMetaDateSearch:function(){if(ta.widgets.calendar.hasPageDates())if(ta.has("hac.filter.changed")||ta.has("meta.mini_meta_on_accommodations"))ta.hac.filters.updateResults();else if(ta.retrieve("hotels.datesChanged")){var e=ta.hac.filters.buildHACUrlParamString(),t="/HACSearch?"+e+window.location.hash;window.location=t}else ta.hac.filters.updateResults(),ta.servlet.HACSearch.destroyAnimatedDateCTA();else{var a=document.getElement(".metaDatePicker .date_picker_calendar_wrap");a.fireEvent("click")}},lowestPriceBookBtnHover:function(e){try{var t=document.getElement(".LowestPrice .bookBtn");if(!t)return void ta.util.error.record(null,"lowestPriceBookBtnHover - no button for .LowestPrice .bookBtn",null,{"out":e});e?t.className=t.className.replace(/Over\b/,"Idle"):t.className=t.className.replace(/Idle\b/,"Over")}catch(t){ta.util.error.record(t,"lowestPriceBookBtnHover - cannot change button hover appearance",null,{"out":e})}}};
ta.commerce.AvailDataWidget=new Class({Implements:[Options],options:{calendarOptions:{},argArray:[]},initialize:function(t,e,a,i,s,l){this.setOptions(l),(t||window.event)&&(t=new Event(t||window.event),t&&t.stop()),this.locId=e,this.ext=i;var n=null;n=this.ext?"date_picker_adults_"+this.locId+this.ext:"date_picker_adults_"+this.locId,this.adultField=ta.id(n),this.options.calendarOptions=Object.merge(this.options.calendarOptions,{"ext":this.ext?this.ext:"","creatorElem":t&&t.target});var d=!0;if(t){var r=ta.id(t.target);r&&(r.hasClass("out_date")||ta.has("guests_rooms_picker_3.enabled")&&r.hasClass("outDateTrigger"))&&(d=!1)}ta.page&&ta.page.usingUnifiedDates&&"adults"===a||(this.calendar=new ta.widgets.SingleDateCalendar(this.options.calendarOptions,this.locId,s,this.options.argArray,d));var o=ta.retrieve("adultFieldsMap");if(o||(o={}),this.adultField){this.adultsField=o[n];var c=this.adultField.getParent(".overlay");(!this.adultsField||c&&this.adultsField.parentOverlay!=c.overlay)&&(this.adultsField=new ta.widgets.AdultsField(this.adultField,this.locId,s,t),o[n]=this.adultsField,ta.store("adultFieldsMap",o))}this.show(a),ta.widgets.calendar.trackCalendarObject&&ta.widgets.calendar.trackCalendarObject(this)},show:function(t){"calendar"==t&&this.calendar&&this.calendar.calendarOverlay?this.calendar.showCalendarOverlay():"adults"==t&&this.adultsField&&this.adultsField.adultsOverlay.show(),ta.has("persistentFilters.showing")&&tabletOnFullSite&&this.calendar.calendarOverlay.container&&this.calendar.calendarOverlay.container.setStyle("position","fixed")},clear:function(){this.adultField&&(ta.retrieve("meta_guests_field_v2.enabled")||ta.widgets.calendar.setPageAdultsCount(2),ta.widgets.calendar.syncAllDatePickers()),this.calendar.clear()},getState:function(t){var e=this.calendar.getState(),a={"adults":"2"};this.adultsField?a=this.adultsField.getState():ta.widgets.calendar.getPageAdultsCount()&&(a={"adults":ta.widgets.calendar.getPageAdultsCount()+""});var i=Object.merge(e,a);return t?i:Object.toQueryString(i)}}),ta.widgets.AdultsField=new Class({adultsSelRegex:/.*_(\d)\s*$/,adultsExRegex:/.*_\d+_(.*)$/,initialize:function(t,e,a){this.adultsField=t,this.crId=e,this.selectionFunction=a;var i=this.adultsField.getParent(".overlay");i&&(this.parentOverlay=i.overlay);var s=ta.overlays.ACTIVATE_CLICK;this.parentOverlay&&this.parentOverlay.container&&ta.id(this.parentOverlay.container).hasClass("persistentCR")&&(s=ta.overlays.ACTIVATE_NEVER),this.guestFieldLabel=this.generateGuestFieldLabel(this.adultsField.id),this.adultsOverlay=new ta.overlays.RelativeOverlayBelow({style:"dp",showCloseButton:!1,noPadding:!0,autoShow:!1,offsetLeft:1,activate:s,onShow:this.onAdultsShow.bind(this),onHide:this.onAdultsHide.bind(this)},this.adultsField),this.adultsField.onclick=function(){},ta.id(this.adultsField).addEvent("click",this.adultsOverlay.show);var l=ta.id(this.adultsOverlay.container).getElement(".adults_pre_selected");try{this.count=ta.retrieve("date.picker.adultsCount"),this.count||(this.count=this.adultsSelRegex.exec(l.id)[1])}catch(t){}this.count||(this.count="2"),ta.widgets.calendar.setPageAdultsCount(this.count);var n=ta.id(this.adultsOverlay.container).getElements(".option"),d=this.adultSelect.bind(this);n.each(function(t,e){var a=function(a){d.pass([e+1,t,a.event])()};ta.id(t).addEvent("click",a)});var r=this.adultsField.clientWidth;r+="px",ta.id(this.adultsOverlay.container).setStyles({"width":r}),this.optionElems=n},generateGuestFieldLabel:function(t){var e=this.adultsExRegex.exec(t),a=ta.retrieve("open_guest_field.servletName");return a||(a=window.pageServlet),e?"pop"==e[1]?"Guest_Flyout":"met"==e[1]?"Guest_MetaLightbox":"pto"==e[1]?"Guest_HR_PhotoLightbox":"amo"==e[1]?"Guest_HR_AmenitiesLightbox":"":a?"Hotel_Review"==a?"Guest_HR":"Hotels"==a?"Guest_Hotels":"ShowUserReviews"==a?"Guest_Hotels":"":""},trackGuestFieldEvent:function(t,e){try{ta.trackEventOnPage("GuestPicker",t,e)}catch(t){ta.util.error.record(t,"ta.widgets.AdultsField.trackGuestFieldEvent")}},onAdultsShow:function(){try{this.parentOverlay&&this.parentOverlay.pin&&this.parentOverlay.options.pinnable==ta.overlays.PINNABLE_CLICK&&(this.tempPin=!this.parentOverlay.pinned,this.tempPin&&this.parentOverlay.pin()),ta.id("PERSISTENT_DATE_PICKER")&&this.optionElems[0]&&this.optionElems[0].getParent("div.relative")&&this.optionElems[0].getParent("div.relative").setStyles({"z-index":10001}),this.keyEventListener=this.onAdultsOverlayKeyDown.bind(this),document.addEvent("keydown",this.keyEventListener),this.adultsField.blur();var t=document.getElements(".date_picker_adults_option");if(t&&Array.each(t,function(t){ta.id(t).removeClass("adults_selected"),ta.id(t).removeClass("adults_pre_selected")}),ta.id(this.adultsField).getParent("#PERSISTENT_CHECK_RATES")){var e=ta.id(this.adultsField).getCoordinates().top;"undefined"!=typeof isIPad&&isIPad||(e-=window.getScrollTop()),ta.id(this.adultsOverlay.container).setStyles({"position":"fixed","top":e+29,"zindex":9997})}this.count=ta.retrieve("date.picker.adultsCount"),ta.retrieve("meta_guests_field_v2.enabled")&&(this.optionElems[this.count-1].addClass("adults_pre_selected"),this.preSelectElem=this.optionElems[this.count-1]),ta.retrieve("meta_guests_field_v2.trackingEnabled")&&this.trackGuestFieldEvent("Open",this.guestFieldLabel)}catch(t){ta.util.error.record(t,"ta.widgets.AdultsField.onAdultsShow")}},onAdultsHide:function(){try{this.parentOverlay&&this.tempPin&&(this.tempPin=!1,this.parentOverlay.unpin()),this.keyEventListener&&document.removeEvent("keydown",this.keyEventListener)}catch(t){}},onAdultsOverlayKeyDown:function(t){"esc"==t.key&&this.adultsOverlay.hide()},adultSelect:function(t,e,a){ta.commerce.meta.tracking.resetAllTimingLocks(),ta.commerce.meta.tracking.clearSuppressedAreas(),ta.commerce.meta.polling.clearAllPollingInfo(),this.updateValue(t,e.innerHTML),this.adultsOverlay.hide();var i=this.guestFieldLabel+"|"+this.count;if(ta.retrieve("meta_guests_field_v2.trackingEnabled")&&this.trackGuestFieldEvent("Select",i),ta.widgets.calendar.hasPageDates()){if(this.selectionFunction&&(this.selectionFunction===ta.widgets.calendar.launchInlineMeta?this.selectionFunction.call(this,a):this.selectionFunction.call(this,this.crId,this.adultsField)),ta.commerce.metajson&&ta.commerce.metajson.refetchAll(),"undefined"!=typeof oxapp&&oxapp&&oxapp.context){var s=oxapp.context.get("TravelDates");s&&s.save()}ta.commerce.meta.loadMetaAF(this.crId,"AV_ABOVE_FOLD_META",!1),ta.widgets.calendar.trackCalendarEvent("DATEPICKER","CHANGE","GUESTS",t)}},updateValue:function(t,e){this.count=t,this.adultsField.innerHTML=e,ta.widgets.calendar.setPageAdultsCount(this.count),ta.widgets.calendar.syncAllDatePickers(),ta.widgets.calendar.justUpdateSessionAdults();var a=document.getElements(".adults");a.each(function(t){t.innerHTML=e})},getAdultsCount:function(){return this.count},getState:function(){return{"adults":this.count+""}}});
ta.commerce.meta.tracking={getTimingForNavArea:function(e){if(e){var r=ta.commerce.meta.tracking.processNavArea(e);return ta.retrieve(r)}},setTimingLockForNavArea:function(e,r){ta.store(e+"-LOCK",r)},isTimingLocked:function(e){var r=ta.commerce.meta.tracking.processNavArea(e),a=ta.retrieve(r);if(!a)return!1;var t=Date.now();return!(t-a>=2e3)||(ta.commerce.meta.tracking.resetTimingLockForNavArea(r),!1)},resetTimingLockForNavArea:function(e){var r=ta.commerce.meta.tracking.processNavArea(e);ta.retrieve(r+"-LOCK")&&ta.remove(r+"-LOCK")},resetAllTimingLocks:function(){for(var e=["QC_Meta_Inline","QC_Meta_Mini","QC_Meta_Metro","QC_Meta_Micro","QC_Meta_Lightbox"],r=0;r<e.length;r++)ta.commerce.meta.tracking.resetTimingLockForNavArea(e[r])},processNavArea:function(e){if(e)return 0===e.indexOf("QC_Meta_Inline")?"QC_Meta_Inline":0===e.indexOf("QC_Meta_Mini")?"QC_Meta_Mini":0===e.indexOf("QC_Meta_Metro")?"QC_Meta_Metro":0===e.indexOf("QC_Meta_Micro")?"QC_Meta_Micro":0===e.indexOf("QC_Meta_Lightbox")?"QC_Meta_Lightbox":void 0},setTimingForNavArea:function(e,r){if(e){r||(r=Date.now());var a=ta.commerce.meta.tracking.processNavArea(e);return ta.commerce.meta.tracking.isTimingLocked(a)?ta.commerce.meta.tracking.getTimingForNavArea(a):(ta.store(a,r),ta.commerce.meta.tracking.setTimingLockForNavArea(a,r),"QC_Meta_Inline"!=a||ta.commerce.meta.tracking.containsSuppressedArea("QC_Meta_Mini")||ta.commerce.meta.tracking.setTimingLockForNavArea("QC_Meta_Mini",r),r)}},updateUrlWithTiming:function(e,r){if(!e||!r)return e;var a=ta.commerce.meta.tracking.setTimingForNavArea(r);if(!a)return e;if(e.contains("&metaRequestTiming=")){var t=new RegExp("(&|\\?)metaRequestTiming=[^&]*");e=e.replace(t,"&metaRequestTiming="+a)}else e+="&metaRequestTiming="+a;return e},suppressImpressionsForArea:function(e){if(e){var r=ta.commerce.meta.tracking.processNavArea(e);if(!ta.commerce.meta.tracking.containsSuppressedArea(r)){var a=ta.retrieve("suppressed.areas");a.push(r),ta.store("suppressed.areas",a)}}},getSuppressedAreas:function(){var e=ta.retrieve("suppressed.areas");return e||(e=[],ta.store("suppressed.areas",e)),e},getSuppressedAreasAsString:function(){var e=ta.commerce.meta.tracking.getSuppressedAreas(),r="";if(e.length>0)for(var a=0;a<e.length;a++)r+=e[a]+";";return r},hasAnySuppressedAreas:function(){var e=ta.commerce.meta.tracking.getSuppressedAreas();return e.length>0},containsSuppressedArea:function(e){if(!e)return!1;for(var r=ta.commerce.meta.tracking.processNavArea(e),a=ta.commerce.meta.tracking.getSuppressedAreas(),t=0;t<a.length;t++)if(a[t]==r)return!0;return!1},removeSuppressedArea:function(e){if(e){var r,a,t=ta.commerce.meta.tracking.processNavArea(e);if(ta.commerce.meta.tracking.containsSuppressedArea(t))for(var n=ta.commerce.meta.tracking.getSuppressedAreas(),i=0;i<n.length;i++)n[i]==t&&(a=i,r=!0),r&&(n=ta.commerce.meta.tracking.removeElementByIndex(n,a),ta.store("suppressed.areas",n))}},removeElementByIndex:function(e,r){return e&&r>=0&&r<e.length&&e.splice(r,1),e},clearSuppressedAreas:function(){ta.store("suppressed.areas",[])}};
require(["ta/rollupAmdShim"],function(a){a.install(["ta/commerce/MetaPolling","ta/meta/LinkTracking"],[])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"ta-commerce-meta",files:{js3:{src:{ta:{meta:{LinkTracking:1},commerce:{MetaPolling:1}}}}},_:{baseUrl:"/"}})};
define("ta/commerce/MetaPolling",["vanillajs","ns-exporter","ta/Core/TA.Store"],function(e,t,n){var l={setPollingAttemptForRequest:function(e,t){var n=l.getPollingMap();t||(t=1),n[e]=t,l.setPollingMap(n)},getPollingAttemptForRequest:function(e){if(l.isRequestBeingPolled(e)){var t=l.getPollingMap(),n=t[e];if(n)return n}},getPollingWaitTimeForRequest:function(e){var t=l.getPollingAttemptForRequest(e);return l.getPollWaitTimeForPollingAttempt(t)},isRequestBeingPolled:function(e){var t=l.getPollingMap(),n=e&&t[e];return!!n},incrementPollingAttemptForRequest:function(e){var t=l.getPollingMap(),n=t[e];return n&&(n+=1,t[e]=n),l.setPollingMap(t),n},clearAllPollingInfo:function(){n.store("ta.meta.polling.map")},removePollingInfoForRequest:function(e){if(l.isRequestBeingPolled(e)){var t=l.getPollingMap();delete t[e],l.setPollingMap(t)}},getPollingMap:function(){var e=n.retrieve("ta.meta.polling.map");return e||(e={},n.store("ta.meta.polling.map",e)),e},setPollingMap:function(e){e&&n.store("ta.meta.polling.map",e)},getPollWaitTimeForPollingAttempt:function(e){if("number"!==typeOf(e)||e<0)return 1e3;switch(e){case 1:case 2:case 3:case 4:return 1e3;case 5:case 6:case 7:return 1500;case 8:case 9:case 10:return 2e3;case 11:return 5e3;case 12:return 15e3;default:return 3e4}},getMaxPollingAttemptNumber:function(){return 13}};return t.exportTo(l,"ta.commerce.meta.polling"),l});
ta.commerce.meta.horizontalXSell=function(){var e=10,t=1e3,a=!1,n=null,r=null,i=null,o=0,l=function(e){return!(!e.contains("hacComplete")||!e.contains("hacMiniOfferNotAvailable")&&!e.contains("hacMiniOfferUnavailable"))},c=function(e){return!!d()&&!e.contains("hacMiniOfferUnavailable")},s=function(a,i){try{if(ta.retrieve("ta.redirectingPage"))return;i||(o=0),n=(new Date).getTime();var l=n,c=ta.widgets.calendar.getCheckRatesData();if(!c)return;var u={metaReferer:window.pageServlet},m=Object.merge(c,{detail:a,"reqNum":i?"2":"1","type":"horizontal_hr"},u),d=Object.toQueryString(m);if(!d||!d.trim())return void ta.util.error.record(null,"ta.commerce.meta.horizontalXSell.loadHorizontalXSell - toQueryString failure",null,m);new Request({"url":"/MetaBestPriceCrossSellAjax","data":m,"evalScripts":!0,"onSuccess":function(c){if(l==n){var u=new Element("div",{html:c}),m=u.getElement(".xsellHacStatusReady")||u.getElement(".xsellHacStatusSOL")||i;if(ta.has("meta.full_meta_photos_v3")&&(c+='<div class="gap_spacer"></div>'),!m&&o<e)setTimeout(function(){o+=1,s(a,!0)},t);else{var d=ta.id("HORIZONTAL_CROSS_SELL"),S=u.getElement(".metaMicro");if(d&&S){if(d.getElement(".metaMicro"))d.setContent(c);else{d.setStyle("opacity","0");var v=new Fx.Tween(d,{property:"opacity"});d.setStyle("height",0);var g=122,h=new Fx.Tween(d,{property:"height",onComplete:function(){d.setStyle("height","auto"),d.setContent(c),v.start(0,1)}});h.start(0,g)}r&&r(),f(!0)}}}},"onFailure":function(){ta.retrieve("ta.redirectingPage")||ta.util.error.record(null,"ta.commerce.meta.horizontalXSell.loadHorizontalXSell - MetaBestPriceCrossSellAjax request failed")}}).send()}catch(e){ta.util.error.record(e,"ta.commerce.meta.horizontalXSell.loadHorizontalXSell")}},u=function(e,t){if(e&&e.getElement(".bc_flags")){var a=e.getElement(".bc_flags").className;c(a)?m():l(a)&&s(t,!1)}},m=function(){var e=ta.id("HORIZONTAL_CROSS_SELL"),t=ta.id("HORIZONTAL_CROSS_SELL_LIST"),a=document.getElement("#HORIZONTAL_CROSS_SELL_LIST .lodging");if(e&&t&&a){var n=t.getSize().y;e.setStyle("height",n);var r=new Fx.Tween(t,{duration:200,property:"opacity",onComplete:function(){t.addClass("hidden"),o.start(n,0).chain(function(){e.setStyle("height",0),e.innerHTML=""})}});r.start(1,0);var o=new Fx.Tween(e,{duration:"long",property:"height"});i&&i(),f(!1)}},d=function(){return a},f=function(e){a=e},S=function(e){r=e},v=function(e){i=e};return{updateHorizontalXSell:u,removeHorizontalXSell:m,isLoaded:d,setLoaded:f,setOnloadFunction:S,setOnRemoveFunction:v}}(),ta.commerce.meta.horizontalXSellExtensions={putAvafBelowMap:function(){if(!ta.commerce.meta.horizontalXSell.isLoaded()){var e=ta.id("AV_ABOVE_FOLD_META"),t=ta.id("RHS_MAP"),a=e.parentNode;if(e&&t&&a){var n=a.getElement(".bxDivider.map");n?(a.insertBefore(n,e),a.insertBefore(t,n)):a.insertBefore(t,e)}}},putAvafAboveMap:function(){if(ta.commerce.meta.horizontalXSell.isLoaded()){var e=ta.id("AV_ABOVE_FOLD_META"),t=ta.id("RHS_MAP"),a=e.parentNode;e&&t&&a&&a.insertBefore(e,t)}}};
ta.meta||(ta.meta={}),ta.meta.link||(ta.meta.link={}),function(e){function t(t,a,o,l,c,m,u,g,d,s){"use strict";var f=t,p=new RegExp("(&|\\?)area=[^&]*");if(f=f.replace(p,"$1area="+a),crPageServlet){var v=new RegExp("(&|\\?)from=[^&]*");f=f.replace(v,"$1from=HotelDateSearch_"+crPageServlet)}var _=ta.commerce.meta.tracking.setTimingForNavArea(a);if(_&&m&&!m.hasClass("bookableOffer"))if(f.contains("&metaRequestTiming=")){var h=new RegExp("(&|\\?)metaRequestTiming=[^&]*");f=f.replace(h,"&metaRequestTiming="+_)}else f+="&metaRequestTiming="+_;if(g&&(f+="&m="+g),d&&(f+="&priceShown="+d),s&&(f+="&cpn="+s),document.location&&document.location.href){var P=e.extractPageLocId(document.location.href);P&&(f+="&pageLocId="+P)}var k=f.indexOf("/StartBooking")>=0;k&&crPageServlet&&(f=f+"&from="+crPageServlet),ta.has("assisted_booking_clicks_new_tab")&&c===e.OPEN_IN_NEW_TAB&&k&&ta.browser&&ta.browser.isIE10Metro()&&(c=e.OPEN_IN_SAME_TAB),ta.has("tablet_google_search_app_open_same_tab")&&/GSA\/[0-9]{2}/.test(window.navigator.userAgent)&&(c=e.OPEN_IN_SAME_TAB),k&&ta.page&&ta.page.maybeOpenInlineBooking&&ta.page.maybeOpenInlineBooking(null,l,m,null,f)||(c===e.OPEN_IN_NEW_TAB?r(f,u,o,m):c===e.OPEN_IN_SAME_TAB?n(f,m):i(o,f,u),window.IS_DEBUG&&ta.store("ta.lastCommerceClickUrl",f))}function a(){try{document.domain=document.domain}catch(e){return!0}return!1}function r(e,t,r,o){var i=a(),l=window.open(i?e:"","_blank");return!l&&"undefined"!=typeof Browser&&Browser.ie&&ta.has("ta.ie_commerce_popup_block_fix")&&ta.has("assisted_booking_clicks_new_tab")&&e.indexOf("/StartBooking")>=0?(ta.util&&ta.util.cookie&&ta.util.cookie.setPIDCookie(38822),void n(e,o)):(!i&&ta.popups.PopUtil.redirectToUrl(l,e),void ta.popups.PopUtil.pollForPartnerLoad(l,new Date,r,ta.popups.PopUtil.extractSlotFromCommerceUrl(e),crPageServlet))}function n(e,t){if(ta.meta.treeTrack.logTrackingTreeClickEvtCookie(e,t),ta.meta&&ta.meta.treeTrack){var a=function(){o(e)};if(t&&null!=t.getParentBySelector(".metaCheckRatesOverlay"))ta.meta.treeTrack.logLightboxTreeImpression(a);else if(ta.meta.treeTrack.isInitialized())try{ta.meta.treeTrack.logTreeImpression(a)}catch(t){ta.util.error.record(t," Error in openMetaProviderSameTab"),o(e)}else ta.retrieve("allowSamePageClickWithoutTrackingTree")===!0&&o(e)}else o(e)}function o(e){ta.retrieve("ta.isIE11orHigher")?window.open(e,"_self",null,!1):window.location.href=e}function i(e,t,a){var r,n=e,o=ta.popups.PopUtil.getProviderWindowDims(n,!0),i=1;window&&window.chrome&&(i=0),r={customWidth:o.customWidth,customHeight:o.customHeight,widthOffset:o.widthOffset,heightOffset:o.heightOffset,name:n,url:t,scrollbars:i,providerLogo:a},ta.popups.PopUtil.createCheckRatesWindow(r)}function l(e){var t=ta.retrieve("ta.meta.navArea");(!t||t.indexOf(e)<0)&&ta.store("ta.meta.navArea",e)}function c(e,t,a,r){var n="";t.getParent(".persistentCR")?n=r?"|PCR":"PCR":t.getParent(".photosOverlay")||t.getParent("#LOC_PHOTO_ALBUMS")?n=r?"|Photo_Lightbox":"Photo_Lightbox":t.getParent(".amenities_lightbox")?n=r?"|Amenities_Lightbox":"Amenities_Lightbox":t.getParent("#CHECK_RATES_LB")&&(n=r?"|Photo_LB":"Photo_LB"),n=n?"|"+n:"",e=e?e:"",n=n?n:"",a=a?a:"";var o=[e,n,a].join("|").replace("||","|").replace(/(\|$)/g,"");return o}function m(e,t,a,r,n){ta.util.error.record(e,t,null,{servlet:window.pageServlet,url:a,area:r},n)}function u(e,t){var a,r={"data-navArea-metaType":null,"data-navArea-linkType":null,"data-navArea-availability":null,"data-navArea-placement":null},n=4;if(t)for(a in r)t.hasOwnProperty(a)&&(r[a]=t[a],n--);for(var o=null;e&&n>0;){for(a in r)null===r[a]&&(r[a]=e.get(a),null!==r[a]&&("@trigger"===r[a]&&(o=e),n--));e=e.getParent()}for(;"@trigger"===r["data-navArea-placement"]&&o;){for(;o&&!o.overlay;)o=o.getParent();for(o&&o.overlay.options&&o.overlay.options.trigger?o=o.overlay.options.trigger:(o=null,r["data-navArea-placement"]="null");o&&(r["data-navArea-placement"]=o.get&&o.get("data-navArea-placement"),null===r["data-navArea-placement"]);)o=o.getParent()}var i=[];for(a in r)i.push(r[a]?r[a]:"null");return window.isTabletOnFullSite?i.push(g()?"Portrait":"Landscape"):i.push("Desktop"),i.join("|")}function g(){return ta.common&&ta.common.tablet?ta.common.tablet.isPortrait():window.matchMedia&&window.matchMedia("(orientation: portrait)")&&window.matchMedia("(orientation: portrait)").matches}function d(e){if(!e||e.isVisible())return e;var t=e.get("data-locationid"),a=e.get("data-contentid"),r=".offer";r=e.hasClass("bookableOffer")?r+'.bookableOffer[data-locationid="'+t+'"]':r+'[data-locationid="'+t+'"][data-contentid="'+a+'"]';var n=document.getElement(r);return n?n:e}e.click||(e.OPEN_IN_NEW_TAB="new_tab",e.OPEN_IN_SAME_TAB="same_tab",e.OPEN_IN_NEW_WINDOW="new_window",e.getUrlFromClickElem=function(e){if(!e)return null;var t=e.get("data-commerceClickData");if(!t||!t.trim||""===t.trim()||"function"!=typeof asdf)return null;t=asdf(t).replace(/&amp;/g,"&");var a=ta.retrieve("tracking.impression.key");if(e.hasClass("inlineOffer")&&a){var r=/ik=[a-zA-Z0-9]*/;t=t.replace(r,"ik="+a)}return t},e.getPartnerFromClickElem=function(e){if(!e)return null;var t=e.get("data-offerauthor");return t&&t.trim&&""!==t.trim()?t.trim():null},e.click=function(a,r){"use strict";var n,o,i,l,c,u,g,s,f,p,v=ta.id(r);try{if(v=d(v),n=e.getUrlFromClickElem(v),!n)return;o=v.get("data-vendorName"),i=v.get("data-offerauthor")||v.get("data-offer-author"),l=v.get("data-locationId"),c=e.getNavAreaFromClickElem(v),u=v.get("data-contentId"),g=v.get("data-openBehavior"),s=v.get("data-imageUrl"),f=v.get("data-mcid"),p=v.get("data-pernight"),n&&o&&l?t(n,c,o,l,g,v,s,f,p,i):m(null,"Invalid commerce click",n,c)}catch(e){m(e,"Invalid commerce click",n,c)}setTimeout(function(){try{ta.fireEvent("metaLinkClick",v,o,c,l,u,g,ta.popups.PopUtil.extractSlotFromCommerceUrl(n))}catch(e){m(e,"Commerce click tracking failed",n,c)}},300)},e.getNavAreaFromClickElem=function(e){var t,a,r=ta.id(e),n=r.get("data-navArea");n||(t=r.get("data-navAreaPre"),a=r.get("data-navAreaPost"),n=c(t,e,a)),n&&(n=n.replace("+","|")),ta.browser.isIE10Metro()&&(n="QC_Meta_Metro_Lightbox"),e.getParent("#LOC_PHOTO_ALBUMS")?n+=e.getParent(".featuredImageWrap")?"|PHOTOS_LB|Featured_Reel":"|PHOTOS_LB":e.getParent("#AMENITY_LIGHTBOX")&&(n+="|AMENITIES_LB"),l(n);var o=n;return n=u(r),null!=n&&n.indexOf("null")==-1&&n.indexOf("Unknown")==-1||(n=o),n},e.extractPageLocId=function(t){return e.urlArgNumeric(t,"d","detail")||e.urlArgNumeric(t,"g","geo")},e.urlArgNumeric=function(e,t,a){var r=new RegExp("(-"+t+"([0-9]+))|([?&]"+a+"=([0-9]+))"),n=r.exec(e);if(n){if("undefined"!=typeof n[2])return n[2];if("undefined"!=typeof n[4])return n[4]}return null},e.photoClick=function(t,a,r,n,o){r.hasOwnProperty("area")&&(r.area=e.getPhotoNavArea(t)),require("ta/util/Doer").aimdoit(a,r,n,o)},e.getPhotoNavArea=function(e){return u(e,{"data-navArea-metaType":"Pro_Photo","data-navArea-availability":"NA"})},e.updateNavAreaInCommerceUrl=function(t,a){if(a){var r=e.getNavAreaFromClickElem(a),n=new RegExp("(&|\\?)area=[^&]*");t=t.replace(n,"$1area="+r)}return t})}(ta.meta.link);
define("ta/meta/LinkTracking",["vanillajs","api-mod","ns-exporter","ta/Core/TA.Event","ta/util/Error","utils/ajax","ta/Core/TA.Store","ta/Core/TA.Record","utils/urlutils"],function(e,t,r,a,i,o,c,n,l){"use strict";function s(e,t,r,o,n,s){try{k(t,r,o,s)}catch(e){try{i.record(e,"trackMetaClick failure")}catch(e){}}try{if(!e||!(e.className||"").match(/\bbookableOffer\b/)){var p=e&&e.getAttribute("data-pernight")||"",u=e&&e.getAttribute("data-commerceclickdata")||"",v=l.getUrlQueryArgs(l.asdf(u.trim()).replace(/&amp;/g,"&")),f=v&&v.gosox||"";m(o,!0,n,p,f)}}catch(e){try{i.record(e,"trouble loading click-out pixels")}catch(e){}}try{if(e&&c.retrieve("hotels_lists_engagement_tracking.enabled")){var h=(e.className||"").match(/\bbookableOffer\b/)?"Sherpa":"Meta";a.fireEvent("hotels_lists_engagement_tracking.fired",{type:h,element:e})}}catch(e){try{i.record(e,"problem in hotel lists engagement tracking")}catch(e){}}try{s!=ta.meta.link.OPEN_IN_SAME_TAB&&d(e)}catch(e){try{i.record(e,"problem in ibdmImpressionTracking")}catch(e){}}try{g(e)}catch(e){i.record(e,"problem in mapSponsorCheckRateTracking")}}function d(e){ta.meta&&ta.meta.treeTrack&&(t.getParent(e,"metaCheckRatesOverlay")?ta.meta.treeTrack.logLightboxTreeImpression():ta.meta.treeTrack.isInitialized()&&ta.meta.treeTrack.logTreeImpression(),ta.meta.treeTrack.logTrackingTreeClickTrk(e))}function m(e,t,r,a,o){try{var c={locId:e,isMetaCheckRates:t,contentId:r,selectedPrice:a,offerStr:o};require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(e){e.loadClickoutMonikers(c)})}catch(e){i.record(e,"click out monikers failure (meta="+t+")")}}function k(e,t,r,a){var i="CheckRates",o=1;n.trackPhysicalCommerce(i,t,o,r),n.trackAttemptedCommerce(i,t,e,o);var c=a?a===ta.meta.link.OPEN_IN_NEW_TAB?"TAB_OPENED":a===ta.meta.link.OPEN_IN_NEW_WINDOW?"WINDOW_OPENED":"SAME_TAB":"";n.trackEventOnPage("COMMERCE_CLICK",c,e||"")}function g(e){if(window.pageServlet&&e&&e.hasAttribute("data-provider")){var r=e.get("data-provider"),a=t.find("#mapsv2-sponsordetail"),i="Hotels"==window.pageServlet?"HACMap":"FloatingMap";if("LocalMapsRedesign"==window.pageServlet&&(a=t.find(".overlay .skv3"),i="LocalMap"),a&&a.hasAttribute("data-sponsor-provider")&&a.hasAttribute("data-sponsor")){var o=a.get("data-sponsor-provider"),c=a.get("data-sponsor");r==o&&ta.trackEventOnPage(i,"sponsor_cr_sent",c)}}}var p={};return p.setup=function(){try{a.on("metaLinkClick",s)}catch(e){i.record(e,"trouble building event - metaLinkClick")}},p.actionRecord=function(e){o("/ActionRecord?action="+e)},p.restoreCRPageServlet=function(){var e=c.retrieve("crPageServlet_orig");e&&(window.crPageServlet=e)},r.exportTo(p,"ta.meta.linkTracking"),p});
ta.meta.treeTrack||(ta.meta.treeTrack={}),function(e){function t(){if(!i.hotelListSelector||!i.singleHotelSelector)return 0;var e=0,t=0,r=document.getElements(i.hotelListSelector);return r.each(function(r){r.getElements(i.singleHotelSelector).each(function(r){r.match(i.singleHotelSelector)&&(e++,r.isFullyVisible()&&(t=e))})}),t}var r=!1,i={hotelListSelector:null,singleHotelSelector:null,placementName:null,getImpressionString:null},n="ibdm_impression_tracking";e.init=function(e){return r?(ta.util.error.record(null,"ta.meta.treeTrack should be initialized only once"),!1):(i=e,void(r=!0))},e.isInitialized=function(){return r},e.hasTrackingTree=function(e){if(!e||"undefined"==typeof e.previousSibling)return!1;var t=e.previousSibling||e.nextSibling;return!!t&&(!!a(t)||a(t.previousSibling))};var a=function(e){if(e){var t=e.nodeValue;return t&&(t.contains("trk")||t.contains("etk"))}return!1};e.logImpressionTreeOnPageLoad=function(){if(ta.retrieve("assisted_booking_desktop_entry.logTreePoll")&&ta.widgets.calendar.hasPageDates()&&!ta.retrieve("vrTabOnHotels")){var t,r=1,i=4;if(!ta.retrieve("treeTrackImpressionInProgess")){ta.store("treeTrackImpressionInProgess",!0);var n=setInterval(function(){ta.retrieve("isTrackTreeFresh")&&(t=e.logTreeImpression(null,r<i)),!t&&r<i?r++:(ta.store("isTrackTreeFresh",!1),ta.store("treeTrackImpressionInProgess",!1),clearInterval(n))},2e3)}}},e.logTreeImpression=function(e,a){if(!ta.retrieve(n)||ta.retrieve("vrTabOnHotels"))return e&&e(),!1;if(!r)return ta.util.error.record(null,"ta.meta.treeTrack.logTreeImpression called before being initialized"),e&&e(),!1;var o=t(),l=i.getImpressionString(o);return!l&&o<=0?(e&&e(),!1):l&&l.indexOf("I:IllegalContext")===-1?(ta.recordImpression(l,e),!0):(a||ta.util.error.record(null,"ta.meta.treeTrack.logTreeImpression called but no tracking tree html found!",null,{},"WARN"),e&&e(),!1)},e.logLightboxTreeImpression=function(e){if(!ta.retrieve(n))return e&&e(),!1;var t=o();return t?(ta.recordImpression(t,e),!0):void(e&&e())};var o=function(){var e=$$(".metaCheckRatesOverlay .impressionTrackingTree");if(e)return e[0].innerHTML};e.getElmtPriceData=function(e){var t=[];if(!e)return t;var r="PP:";r+=e.getAttribute("data-pernight")?e.getAttribute("data-pernight"):"-1",t.push(r);var i="PN:";return i+=e.getAttribute("data-offer-author")?e.getAttribute("data-offer-author"):"None",t.push(i),t},e.logTrackingTreeClickTrk=function(t){if(ta.retrieve(n)&&e.hasTrackingTree(t))if(t.hasClass("bookableOffer"))ta.trk("sherpa_click",!1,t);else{var r=e.getElmtPriceData(t);ta.trk("meta_click",!1,t,r)}},e.logTrackingTreeClickEvtCookie=function(t,r){ta.retrieve(n)&&e.hasTrackingTree(r)&&(r.hasClass("bookableOffer")?ta.setEvtCookieAndPath("sherpa_click",t,r):ta.setEvtCookieAndPath("meta_click",t,r))},e.getElmtHeight=function(e){if(e)return e.offsetHeight}}(ta.meta.treeTrack);
ta.meta.update||(ta.meta.update={}),ta.on("newInlinePageDates",function(e,t){ta.meta.update.request(e,t)}),ta.on("metaOnlyUpdate",function(e){ta.meta.update.request(e,null,!0)}),function(e){function t(e){var t=ta.id("PROVIDER_BLOCK");if(t){if("undefined"!=typeof CDNHOST){var a='<img class="provLoading" src="'+CDNHOST+'/img2/meta_sprites/loadingAnim.gif">';t.getElements(".rightBox").each(function(e){e.setContent(a)})}var r=t.get("html"),i=1e3,n="metaHacRequest_"+i+"_cancel";ta.remove(n),new Request({url:ta.meta.update.buildUrl("MetaCheckRatesAjax",e,!0),onSuccess:function(a){t.setContent(a),ta.fireEvent("refreshedDOMContent",t),ta.meta.update.overlayRequest(e)},onFailure:function(){t.setContent(r)}}).send()}}function a(e,a){"pop"==a?(ta.store("ta.meta.request.locId",e),ta.store("ta.meta.request.placement",a),ta.run("ta.overlays.Factory.metaCheckRatesOverlay")):"met"!=a&&"solb"!=a||ta.has("meta.widget")||t(e)}function r(e){var t,a,r=0,i=0;return e=ta.id(e),a=e.getChildren("#HR_HACKATHON_CONTENT .roomPrice"),t=e.getChildren("#HR_HACKATHON_CONTENT .textLinks .offer .price"),a&&(r=a.length),t&&(i=t.length),r+i}function i(t,a,r,i,n){if(!ta.retrieve("tablet_maps_v1")||!ta.retrieve("maps_v2_open")){r||(r=0),i||(i=!1);var l="miniMetaHacRequest_curCancelKey",s=13;null==a&&(a=(new Date).getTime());var c="miniMetaHacRequest_"+a+"_cancel";if(ta.retrieve(c)!==!0){if(ta.has(l)){var m=ta.retrieve(l);m!=c&&(ta.store(m,!0),ta.commerce.meta.polling.removePollingInfoForRequest(m))}ta.has(c)||(ta.store(c,!1),ta.store(l,c));var d;if(ta.commerce.meta.polling.isRequestBeingPolled(c)){if(d=ta.commerce.meta.polling.getPollingAttemptForRequest(c),!d||d>s)return void ta.commerce.meta.polling.removePollingInfoForRequest(c)}else d=1,ta.commerce.meta.polling.setPollingAttemptForRequest(c,d);var v=[];if(i)for(var g=$$("#CHECK_RATES_CONT div.premium:not(.tripConnectDemo)"),p=0;p<g.length;p++){var _=g[p].get("data-contentid");v.push(parseInt(_,10))}if(r<1){var f;ta.has(R)&&(f=ta.retrieve(R),clearTimeout(Number.from(f))),ta.has(T)&&(f=ta.retrieve(T),clearTimeout(Number.from(f))),f=setTimeout(function(){u()},ta.commerce.minimeta.ajax.MINI_META_STOP_LOADING_TIMEOUT),ta.store(R,Number.from(f))}var h=ta.retrieve("hotels.datesChanged");h&&ta.has("hac_timezone_awareness")&&e.clearDatesBumpedMessage(),new Request({url:ta.meta.update.buildUrl("MiniMetaCRAjax",t,!0,null,"QC_Meta_Mini",r,v,i,c,h,n),onSuccess:function(e){o(!1,e,t,a,r,i,c,h)},evalScripts:!0}).send()}}}function n(e){e.getChildren().each(function(e){var t=e.getAttribute("data-targetEvent");t&&ta.fireEvent(t,e)})}function o(e,t,a,r,o,c,d,u){if(ta.retrieve(d)!==!0){var v,g,p,R,M;if(e){var A=ta.select("#CHECK_RATES_CONT fieldset")[0];t=A.get("html"),v=new Element("div",{html:t}),g=!0,p=document.getElement(".similarCarousel"),R=v.getChildren()}else v=new Element("div",{html:t}),n(v),g=t.contains("hacMiniComplete"),p=document.getElement(".similarCarousel"),R=Elements.from(t);if((!p||o<1)&&(ta.commerce.meta.updateProvArea(v.getElement(".postShowMetaCR")),ta.fireEvent("miniMetaOnHRUpdate",t)),!document.getElement(".dropdownMiniMeta")){var k=document.getElement(".postShowMetaCR");k&&l(t,k)}if(s(t),ta.retrieve("hotel_review_low_price_message")&&v.getElement(".price_alert_update")){var b=document.getElement("#PRICE_ALERT_RIBBON_CONTAINER");if(b&&(M=b.getElementById("PRICE_ALERT_RIBBON"),M&&M.destroy(),M=v.getElement(".price_alert_update").getElement(".price_alert_ribbon"))){b.innerHTML=M.outerHTML,ta.util.element.makeTextFitOneLine("#PRICE_ALERT_RIBBON",!1);var O=M.getElement(".priceAlertText b");g&&O&&O.innerHTML&&O.innerHTML.length>0&&ta.trackEventOnPage("hotel_review_low_price_message","Display",O.innerHTML)}ta.fireEvent("priceAlertRibbonUpdated")}if(g&&!t.contains("bookableOffer")&&window.fireEvent("hacComplete_noBookingOffersFound"),(g||c)&&t.contains("bookableOffer")&&ta.fireEvent("hacComplete_bookingOffersFound"),!g&&ta.has("meta.isHackathonBC")&&t.contains("firstRequest")){var P=setTimeout(function(){m(a,r,o)},ta.commerce.minimeta.ajax.MINI_META_APPEAR_LOADING_TIMEOUT);ta.store(T,Number.from(P))}if(g&&ta.has(T)){var H=ta.retrieve(T);clearTimeout(Number.from(H))}var y=".metaDatesChosen",I=".metaDatesChosen",N=ta.retrieve("meta.bc.bestPricesForYourStay");if(g){if(ta.has("meta.isHackathonBC")){var D=N;if(t.contains("allNotAvailable")){var w=ta.id("priceNotAvailMsg");D=w?w.innerHTML:ta.retrieve("meta.bc.pricesTravelSitesNotAvailDates")}if(ta.commerce.meta.updateHeaderMsg(I,D),ta.has("guests_rooms_picker_3.enabled")&&ta.commerce.meta.updateHeaderDates(),ta.has("guests_rooms_picker_4.enabled")&&ta.overlays&&ta.overlays.NumberPickerOverlay&&ta.overlays.NumberPickerOverlay.updateHeaderMsg(y),ta.retrieve("meta.full_meta_photos")){var S=document.getElement(".metaDatesChosen");S&&(t.contains("allNotAvailable")?S.addClass("no_offers_available"):S.removeClass("no_offers_available"))}ta.commerce.meta.polling.removePollingInfoForRequest(d),ta.commerce.meta.displayBlueChevronLowestPriceCTA(),ta.fireEvent("HRHacComplete"),c||_(r,!1);var L=document.getElement(".similarCarousel");c&&L&&f(t),e||setTimeout(function(){h()},1e3)}}else ta.has("meta.isHackathonBC")&&t.contains("anyOfferCompletedSuccessfully")&&(ta.commerce.meta.updateHeaderMsg(I,N),ta.has("guests_rooms_picker_3.enabled")&&ta.commerce.meta.updateHeaderDates()),ta.has("guests_rooms_picker_4.enabled")&&ta.overlays&&ta.overlays.NumberPickerOverlay&&ta.overlays.NumberPickerOverlay.updateHeaderMsg(y),ta.commerce.meta.polling.incrementPollingAttemptForRequest(d),setTimeout(function(){i(a,r,o+1,c)},ta.commerce.meta.polling.getPollingWaitTimeForRequest(d));ta.fireEvent("onHACUpdate",t),!g||ta.retrieve("hotels_to_seo_hotels_redirect")||!u||c||t.contains("cancelRedirect")||(t&&t.match(/\shacComplete\s.*\shacMiniOfferNotAvailable\s/g)&&ta.trackEventOnPage("NoAvailability","redirect","",0,"/HotelHighlight"),t&&t.match(/\shacComplete\s.*\shasDisplayUnavailability\s/g)&&ta.trackEventOnPage("MaybeAvailable","redirect","",0,"/HotelHighlight")),g&&ta.fireEvent("HRHacAvailabilityDetermined",{availability:ta.commerce.meta.getResponseAvailability(t),loadingTimeoutPassed:c,cancelRedirect:t.contains("cancelRedirect"),datesChanged:u,hasBookableOffer:t.contains("bookableOffer")}),C(g,v),E(r,g,c)}}function l(e,t){var a=new Element("div",{html:e}),r=a.getElement(".dropdownMiniMeta");r&&r.inject(t)}function s(e){var t,a,r,i=document.getElement(".rgba_flyout.dropdownMiniMeta");i&&(t=new Element("div",{html:e}),r=t.getElement(".dropdownMiniMeta"),r&&(a=i.getElement(".inner"),a.innerHTML="",r.set("class","dropdownMiniMeta"),a.adopt(r)),c())}function c(){ta.retrieve("dropdownMiniMeta.hover")?ta.commerce.meta.hoverTopOffer():ta.retrieve("dropdownMiniMeta.blur")&&ta.commerce.meta.blurTopOffer()}function m(e,t,a){v(),_(t,!0),i(e,(new Date).getTime(),a+1,!0)}function d(e){var t="";return ta.browser.isIE10Metro()?t="QC_Meta_Book_Inline"==e?"QC_Meta_Metro_Inline":"QC_Meta_Metro_Lightbox":e?t=e:ta.has("ta.meta.navArea")?t=ta.retrieve("ta.meta.navArea"):(ta.retrieve("maps_v2_open")&&ta.trackEventOnPage("QC_Meta_Map_Detail","map_open"),t="QC_Meta_Lightbox"),t}function u(){var e=document.getElement("#CHECK_RATES_CONT div.hacMiniComplete"),t=document.getElement("#CHECK_RATES_CONT div.hacMiniCompleteTimeOut");if(!e&&!t){var a=document.getElement("div.bc_flags");a&&a.addClass("hacMiniCompleteTimeOut"),v(),h()}}function v(e){var t=e?"metaHacRequest_curCancelKey":"miniMetaHacRequest_curCancelKey";if(ta.has(t)){var a=ta.retrieve(t);ta.store(a,!0),ta.commerce.meta.polling.removePollingInfoForRequest(a)}}function g(){var e=document.getElements("#CHECK_RATES_CONT span.textLinkLoading"),t=document.getElements("#CHECK_RATES_CONT div.loading"),a=0;return e&&(a+=e.length),t&&(a+=t.length),a}function p(e,t){var a,r;if(e&&t){if(a=t+"_suppressCommerceImpressionState",r=ta.commerce.meta.polling.getPollingAttemptForRequest(t))if(1===r){if(ta.retrieve("meta.isFromDatesChange"))return ta.remove("meta.isFromDatesChange"),ta.store(a,!0),e+="&isFirstPageLoad=false"}else if(ta.retrieve(a))return e+="&isFirstPageLoad=false";return e}}function _(e,t){var a=0,r="unknown";if(t){a=ta.commerce.minimeta.ajax.MINI_META_APPEAR_LOADING_TIMEOUT;var i=g(),n=document.getElements("#CHECK_RATES_CONT div.premium"),o=document.getElements("#CHECK_RATES_CONT span.textLink"),l=0;n&&(l+=n.length),o&&(l+=o.length);var s=l-i;if(l>0){var c=10*Math.round(s/l*10);c%10===0&&c>-1&&c<101&&(r=""+c+"percent")}}else a=(new Date).getTime()-e,r="100percent";ta.trackEventOnPage("HAC","HACComplete",r,a,!0)}function f(e){var t=Elements.from(e)[0];if(t){var a=t.getElementsByClassName("price"),r=t.getElementsByClassName("priceBlock"),i=0;a&&(i+=a.length),r&&(i+=r.length),ta.trackEventOnPage("HAC","StateCarouselDisplayed","",i,!0)}}function h(){var e=g();e>0&&ta.trackEventOnPage("HAC","HACError","LoadingAfterHACComplete",e,!0)}function C(e,t){if(e&&ta.retrieve("ibdm_impression_tracking")){var a=t.getElements(".impressionTrackingTree");if(a){var r;for(r=0;r<a.length;++r)ta.trkImpTree(a[r])}}}function E(e,t,a){if(t||a){var r="meta.lowestPricePromotionTracking.tracked"+e;if(ta.has("meta.lowestPricePromotionTracking")&&!ta.has(r)){var i=ta.retrieve("meta.lowestPricePromotionTracking");i&&i.bidDifference&&i.priceDifference&&i.bidDifference>=.43&&i.priceDifference>=10&&(ta.store(r,!0),ta.trackEventOnPage("lowest_price_promoted_impression",i.providers,i.bidDifference+"|"+i.priceDifference))}}}var R="miniMetaHacRequest_longTimeoutKey",T="miniMetaHacRequest_appearLoadedTimeoutKey";e.request=function(e,t,r){i(e,null,0,!1,r),a(e,t)},e.completeOnInitialPage=function(e){o(!0,"",e)},e.buildUrl=function(e,t,a,r,i,n,o,l,s,c,m){var u=d(i),v=ta.widgets.calendar.getCheckRatesData(),g="",_="",f="",h="",C="";v&&(g=Object.toQueryString(v)),r&&(_="&metaVersion="+r),ta.has("meta.baseLocationId")&&(f="&baseLocId="+ta.retrieve("meta.baseLocationId")),(ta.retrieve("checkrates.mini_meta_by_percent_cpc_see_all_click")||ta.retrieve("checkrates.hr_bc_see_all_click")||ta.retrieve("checkrates.hr_bc_see_all_click.lb")&&"MetaCheckRatesAjax"===e)&&(h="&seeAllClick=true"),window.pageServlet&&(C="&imp=true&metaReferer="+window.pageServlet);var E=ta.retrieve("meta.requestFromArea");E||(E="",document.getElement("#LOC_PHOTO_ALBUMS")?E="&requestFromArea=pal":document.getElement("#AMENITY_LIGHTBOX")&&(E="&requestFromArea=amo"),ta.store("meta.requestFromArea",E));var R="/"+e+"?detail="+t+"&"+g+"&area="+u+"&returnAllOffers=true"+C+_+f+h+E,T=R;try{R=ta.commerce.meta.tracking.updateUrlWithTiming(R,u)}catch(e){ta.util.error.record(e,"problem updating url with timing in CheckRates.buildVarMetaHacUrl"),R=T}if(ta.commerce.meta.tracking.hasAnySuppressedAreas()){var M=ta.commerce.meta.tracking.getSuppressedAreasAsString();M&&(R+="&suppressImpressionsOnComplete="+M)}if(ta.retrieve("ta.commerce.suppress_commerce_impressions.enabled")){T=R;try{R=p(R,s),R||(R=T)}catch(e){ta.util.error.record(e,"problem updating url with isFirstPageLoad in CheckRates.buildVarMetaHacUrl"),R=T}}if(a&&(R+="&finalRequest=true"),n&&(R+="&numTries="+n),l&&(R+="&loadingTimeoutPassed="+l),c&&(R+="&isDateChangedRequest="+c),ta.maps&&ta.maps.mapsponsor){var A=ta.maps.mapsponsor.getSponsorForLocation(t);A&&(R+="&mapSponsorship="+A)}var k="ta.commerce.MetaHacOverlay.currency";ta.has(k)&&(R+="&currency="+ta.retrieve(k),ta.remove(k));var b=ta.retrieve("booking.tracking.context");return b&&(R+="&btc="+b),m&&(R+="&isMetaOnly="+m),R},e.overlayRequest=function(e,t,a,i,n){var o,l,s,c,m,d,u,v,g,p,_,f,h,C,E,R,T="metaHacRequest_curCancelKey",M=13;try{if(!e)return;if(ta.commerce.meta.clearStoredMiniData(),l=ta.widgets.calendar.getCheckRatesData(),null==t&&(ta.store("meta.travelData",l),t=(new Date).getTime(),s=!1,a?ta.has("metaCheckRatesUpdateDivInline")&&(s=ta.id(ta.retrieve("metaCheckRatesUpdateDivInline"))):ta.has("metaCheckRatesUpdateDiv")&&(s=ta.id(ta.retrieve("metaCheckRatesUpdateDiv"))),s&&s.removeClass&&s.removeClass("hidden")),c="metaHacRequest_"+t+"_cancel",ta.has(T)&&(m=ta.retrieve(T),m!=c&&(ta.store(m,!0),ta.commerce.meta.polling.removePollingInfoForRequest(m))),a&&(d=document.getElement(".meta_rates_content .postShowMetaCR"),ta.has("checkrates.mini_meta_by_percent_cpc")&&ta.retrieve("checkrates.mini_meta_by_percent_cpc_see_all_click")&&(u=d.getElement(".seeMore.threshold"),u&&(v=d.getElements(".postClickPrice.hide"),v.each(function(e){e.removeClass("hide")}),u.hide())),ta.commerce.meta.updateProvArea(d)),ta.has(c)||(ta.store(c,!1),ta.store(T,c)),ta.retrieve(c)===!0)return;if(g=ta.retrieve("metaCheckRatesOverlay"),!g&&!a)return;o=!1,g&&(o=g.inner),ta.has("metaCheckRatesUpdateDiv")&&(o=ta.id(ta.retrieve("metaCheckRatesUpdateDiv"))),a&&ta.has("metaCheckRatesUpdateDivInline")&&(o=ta.id(ta.retrieve("metaCheckRatesUpdateDivInline")))}catch(e){ta.util.error.record(e,"overlayRequest setup")}if(o)try{if(ta.commerce.meta.polling.isRequestBeingPolled(c)){if(p=ta.commerce.meta.polling.getPollingAttemptForRequest(c),!p||p>M)return void ta.commerce.meta.polling.removePollingInfoForRequest(c)}else p=1,ta.commerce.meta.polling.setPollingAttemptForRequest(c,p);if(o.innerHTML.contains("hacComplete"))try{if(ta.commerce.meta.polling.removePollingInfoForRequest(c),f=ta.id("META_HAC_DATE_HEADLINE")){var A=f.getElements(".headlineLegend");A.length>=2&&(A.forEach(function(e){e.addClass("hidden")}),o.getElement(".anyOfferCompletedSuccessfully")?(A[0].removeClass("hidden"),ta.commerce.meta.hideBestPriceXsell("REC_CONT")):o.getElement(".partnersAllNotAvailable")&&A.length>2?(A[2].removeClass("hidden"),a?(ta.commerce.meta.loadBestPriceXsell(e,"REC_CONT_INLINE",{isInline:!0}),ta.commerce.meta.metaInYourMeta("REC_CONT_INLINE",{xsell:!1,inline:!0})):(ta.id("META_PRICE_XSELL")||ta.commerce.meta.loadBestPriceXsell(e,"REC_CONT",{isInline:!1}),ta.commerce.meta.metaInYourMeta("REC_CONT",{xsell:!1,inline:!1}))):(A[1].removeClass("hidden"),ta.commerce.meta.hideBestPriceXsell("REC_CONT")))}if(g&&ta.commerce.meta.storeMiniData(g.inner),ta.retrieve("assisted_booking_desktop_entry.logTreePoll")&&o){var k=o.getElement(".impressionTrackingTree");k&&ta.trkImpTree(k)}if(h=r(o),E="complete",a?ta.id("COMHVY")?(C="Mini-Meta",E+=ta.find(".NotShowing .postClickPrice")?"_may_be_available":ta.find("#HotelDateSearch .price .minCost")?ta.find(".strikeHigh")?"_available_lp_chevron":"_available":"_unavailable"):C="Metainline":C="meta_lightbox",o.innerHTML.contains("doneNoAvailability")?(ta.widgets.calendar.trackCalendarEvent("DATEPICKER","RESULTS_EMPTY",ta.widgets.calendar.getPageAdultsCount(),ta.widgets.calendar.getPageAdultsCount()),ta.id("MAYBE_BUTTONS_INLINE")&&a||ta.id("MAYBE_BUTTONS")&&!a&&"Mini-Meta"!=C?E+="|may_be_availabile":"Mini-Meta"!=C&&(E+="|unavailable")):ta.widgets.calendar.trackCalendarEvent("DATEPICKER","RESULTS_PRESENT",ta.widgets.calendar.getPageAdultsCount(),ta.widgets.calendar.getPageAdultsCount()),ta.trackEventOnPage(C,E,h.toString()),ta.commerce.meta.showLowestPriceCTA(a),ta.fireEvent("MetaLightboxHacComplete"),R=ta.find(".overlay .skv3"),R&&R.hasAttribute("data-sponsor")){var b=R.getAttribute("data-sponsor");ta.maps.ads.injectMetaLightBoxAd(b)}}catch(e){ta.util.error.record(e,"overlayRequest - failure in complete results block")}else{_=!1,a&&(_="QC_Meta_Inline"),i||(i=1);var O=ta.meta.update.buildUrl("MetaCheckRatesAjax",e,!0,n,_,i);setTimeout(function(){new Request({url:O,onSuccess:function(r){ta.retrieve(c)||((ta.retrieve("metaCheckRatesOverlay")||ta.retrieve("metaCheckRatesUpdateDivInline"))&&(o.innerHTML=r,ta.fireEvent("refreshedDOMContent",o),ta.retrieve("checkrates.meta_ui_sk_box")&&ta.commerce.meta.restoreProviderHover()),(ta.meta.update.getMetaPricesCount(a)>0||p>9)&&ta.commerce.meta.hacIsBlockingXSell(a)&&(a?ta.commerce.meta.metaInYourMeta("REC_CONT_INLINE",{xsell:!1,inline:!0}):ta.commerce.meta.metaInYourMeta("REC_CONT",{xsell:!1,inline:!1})),ta.commerce.meta.polling.incrementPollingAttemptForRequest(c),ta.meta.update.overlayRequest(e,t,a,i+1,n))},evalScripts:!0}).send()},ta.commerce.meta.polling.getPollingWaitTimeForRequest(c))}}catch(e){ta.util.error.record(e,"meta HAC - ajax requests")}},e.displayRemainingProviders=function(e){try{for(var t=ta.id("CHECK_RATES_CONT"),a=t.getElements("li"),r=a.length;r--;)a[r].removeClass("hide");e.hide(),ta.store("checkrates.mini_meta_by_percent_cpc_see_all_click",!0)}catch(e){ta.util.error.record(e,"displayRemainingProviders")}},e.updateCRForm=function(e){try{if(ta.has("metaDatePickerEnabled"))return void ta.widgets.calendar.syncAllDatePickers();var t=ta.id("HotelDateSearch"+e),a=ta.id("HotelDateSearch"),r=["select","input[type=checkbox]","input[type=hidden]","input[type=text]"];if(t&&a)for(var i=r.length;i--;)for(var n=r[i],o=a.getElements(n),l=t.getElements(n),s=l.length;s--;)for(var c=l[s],m=c.id.split("_")[0],d=o.length;d--;){var u=o[d];if(u.id.contains(m)){if("input[type=checkbox]"==n){var v=u.getParent("li");if(v&&!v.hasClass("unavailable")){var g=c.getParent("li");g&&g.removeClass("unavailable")}}"select"==n?c.selectedIndex=u.selectedIndex:"input[type=checkbox]"==n&&"_pop"!=e?c.checked=u.checked:c.id.contains("hacPid")||(c.value=u.value)}}}catch(e){ta.util.error.record(e,"updateCRForm")}},e.getMetaPricesCount=function(e){var t,a=0,r=ta.retrieve("metaCheckRatesOverlay"),i=!1;if(r&&(i=r.inner),ta.has("metaCheckRatesUpdateDiv")&&(i=ta.id(ta.retrieve("metaCheckRatesUpdateDiv"))),e&&ta.has("metaCheckRatesUpdateDivInline")&&(i=ta.id(ta.retrieve("metaCheckRatesUpdateDivInline"))),i)return t=i.getChildren("#HR_HACKATHON_CONTENT .roomPrice"),t&&(a=t.length),a},e.clearDatesBumpedMessage=function(){var e=ta.id("HAC_DATES_MOVED_FORWARD"),t=document.getElement("#CHECK_RATES_CONT .legend.metaDatesChosen");e&&t&&(e.dispose(),t.removeClass("hidden"))},e.cancelAllMetaCurrentQuery=function(){v(!1),v(!0)}}(ta.meta.update);
ta.meta||(ta.meta={}),ta.meta.cross_sell||(ta.meta.cross_sell={}),function(e){function t(e,t){try{r=1,n=setTimeout(function(){a(e)},t)}catch(e){ta.util.error.record(e,"also viewed - avafWait")}}function a(e){try{ta.trk("AVAF_HOVER_EXPAND",!1,e),r=2;var t=ta.id("expand_av_on_hover");if(!t)return;t.removeClass("hidden"),t.addClass("expanding");var a=t.getSize().y;t.removeClass("expanding"),t.addClass("show");var n=t.getParent("#AV_ABOVE_FOLD_META");n&&n.setStyle("height","auto");var o=new Fx.Tween(t,{duration:"long",property:"height"});o.start(0,a)}catch(e){ta.util.error.record(e,"also viewed - avafExpand")}}var r=0,n=!1,o=0;e.relatedHoverOver=function(e,n){try{if(0!==r)return;0===n?a():t(e?e.target||e.srcElement:null,n)}catch(e){ta.util.error.record(e,"also viewed - avafIn")}},e.relatedHoverOut=function(e){try{if(1!=r||!n)return;if(e||(e=window.event),!e)return;for(var t=e.relatedTarget?e.relatedTarget:e.toElement,a=ta.id("ALSO_VIEWED_LIST");t&&t!=a&&"BODY"!=t.nodeName;)t=t.parentNode;if(t==a)return;clearTimeout(n),n=!1,r=0}catch(e){ta.util.error.record(e,"also viewed - avafOut")}},e.relatedExpand=function(e,t){var a,r;try{if(ta.trk("AVAF_EXPAND_"+(t?"MORE":"LESS"),!1,e?e.target||e.srcElement:null),t){if(a=ta.id("hideableMore"),!a)return;if(a.addClass("hidden"),a=ta.id("expand_av_on_more"),!a)return;a.removeClass("hidden"),0===o&&(a.addClass("expanding"),o=a.getSize().y,a.removeClass("expanding")),a.addClass("show"),new Fx.Tween(a,{duration:"long",property:"height"}).start(0,o)}else{if(a=ta.id("expand_av_on_more"),!a)return;new Fx.Tween(a,{duration:"long",property:"height"}).start(a.getSize().y,0).chain(function(){a.removeClass("show"),a.addClass("hidden"),r=ta.id("hideableMore"),r&&r.removeClass("hidden")})}}catch(e){ta.util.error.record(e,"also viewed - avafMore")}},e.relatedResetStateFlag=function(){r=0}}(ta.meta.cross_sell);
ta.meta.cr||(ta.meta.cr={}),function(e){function t(e){if(!ta.retrieve("checkrates.datesChanged"))try{var t=ta.id(e);t.getElements(".unavailable").each(function(e){e.removeClass("unavailable"),e.hasClass("js_ua_checked")&&e.getElements("input").set("checked",!0),ta.meta.update.updateCRFormElement(e)}),ta.store("checkrates.datesChanged",!0)}catch(e){ta.util.error.record(e,"_showSuppressedProviders")}}e.updateCRCalendar=function(a){a.form&&t(a.form),e.updateCRFormElement(this),ta.id("META_UI_INLINE")&&ta.meta.update.updateCRForm("_imt")},e.findInlineCRLocationId=function(){var e=null,t=ta.id("HotelDateSearch");if(t)for(var a=t.getElements("input[type=text]"),n=a.length;n--;){var i=a[n],r=i.id.match(/_(\d+)/);if(r.length){e=r[1];break}}return e},e.updateCRFormElement=function(e){try{e=ta.id(e);var t=e.get("tag").toLowerCase();"li"==t&&(e=e.getElement("input[type=checkbox]"));var a,n,i,r,l,c=e.id.split("_")[0],o=this.findInlineCRLocationId(),s=c+"_"+o,d=e.id,u=d.substring(d.length-4),m=[s,s+"_icr",s+"_per",s+"_imt"];if(this.crSyncExtensions.contains(u))for(a=m.length;a--;)s=m[a],s!=d&&(l=ta.id(s),l&&("li"==t&&"_pop"!=u?(l.checked=e.checked,n=e.getParent("li"),n&&!n.hasClass("unavailable")&&(i=l.getParent("li"),i&&i.removeClass("unavailable"))):"select"==t?l.selectedIndex=e.selectedIndex:"input"==t&&(r=s.substring(s.length-4),this.crSyncExtensions.contains(r)||(r=""),this.updateCRFormElement_In(o,e,u,r))))}catch(e){ta.util.error.record(e,"updateCRFormElement")}},e.getPropIdFromCRElement=function(e){if(e){var t=null;if(t=e.className.match(/id_(\d+)/))return t[1]}return null},e.removePCR=function(){var e=ta.retrieve("pcr.overlay");e&&e.hide()},e.availCheck=function(e){var t=ta.id("availability")&&"1"==ta.id("availability").value,a=ta.id(e).getElement(".overlaySrc");if(t&&a){var n=a.innerHTML;a.innerHTML=n.replace(/cid=(\w+_)?&amp;/,"")}},e.crSyncExtensions=["_pop","_icr","_pto","_per","_amo","_cro","_met","_imt","_pal","_inm"]}(ta.meta.cr);
ta.servlet.GeoCheckRates={checkBoxToggle:function(e,c){var a=$(c.parentNode);c.checked?a.addClass("checked"):a.removeClass("checked")}};
define("utils/throttle",[],function(){return function(t,n){var e,r;return function(){r&&(clearTimeout(r),r=0);var i=e?n-(Date.now()-e):null;if(null!==i&&i>0)return void(r=setTimeout(t.apply.bind(t,this,arguments),i));var u=t.apply(this,arguments);return e=Date.now(),u}}});
define("ta/common/behavior/ScrollAd",["lib/jquery-amd","api-mod","ns-exporter","ta/Core/TA.Event","ta/Core/TA.Store","ta/util/Error","utils/throttle"],function(t,e,o,r,l,n,s){"use strict";function i(e){var o=t(e).find(".gptAd:not(.inactive, .hidden)").toArray();o.sort(function(e,o){return e=t(e),o=t(o),e.offset().top===o.offset().top?0:e.offset().top<o.offset().top?1:-1});for(var r=0;r<o.length;r++)if(o[r].offsetHeight>B)return H=t(o[r]).parent('div[class*="iab_"]')[0],o[r];return null}function a(){if(C&&H){var t=A[Math.round(C.offsetHeight/300)];t>0&&(b=t,document.all&&(H.style.zoom="1",C.style.position="static"),e.addClass(H,"reserveH"),H.style.height=t+"px",E=!0)}}function d(t){for(var o=null,r=0;r<O.length;r++){var l=e.getCoords(O[r]);if(t+_>l.top&&t+_+b<l.bottom){o=O[r];break}}return o}function u(){e.removeEvent(window,"scroll",D),C&&H&&(e.removeClass(C,"scrollAd"),e.removeClass(H,"reserveH"),H.setAttribute("style",""),C.style.left="auto")}function c(t,o){var r,l,n=!1,s=document.querySelector(t);return s&&null!=b&&null!=_&&null!=o&&(l=e.getCoords(s),r=l.top,null!=r&&(n=o+b+_>r&&o<r+s.offsetHeight)),n}function f(t){return c("#HSCS.similar_tab_rhr",t)}function p(t){t&&parseInt(t.height,10)&&(_=y+parseInt(t.height,10))}function v(){return t(".scrollAdSidebar, #BODYCON .gridA .sidebar")[0]}var m={};r.queueForLoad(function(){r.on("scrollingTabs_updateTabBar",p),r.on("onHACUpdate",m.resetScrollAd),r.on("onHACUpdateComplete",m.addScrollHandler)},"ScrollAd");var g=10,h=0,A=[0,250,600],C=null,b=null,y=15,_=y,S=null,H=null,E=!1,T=null,x=null,w=1e3,B=100,O=e.select(".sidebar_ad_parent"),I=O.length>0,q=1e3,Y=null,k=!1,D=s(function(){function t(){return e.find("#EATERY_OVERVIEW_BOX")}function o(){var t=e.find(".ppr_priv_restaurant_filters");return t?e.getCoords(t).bottom:null}try{if(T||(T=e.find(".scrollAdMain")||e.find("#BODYCON .gridA .balance")||t()),x||(x=v()),C&&document.getElementById(C.id)||(C=i(x),C&&(C.style.top=y+"px",a())),C&&x&&T){if(h>g&&!I)return void u();var r=e.getCoords(T).bottom,s=o()||e.getCoords(x).bottom,c=s-_,p=r-b-_,m=r-s-b>0,A=e.scrollTop(),H=function(){e.addClass(C,"scrollAd"),C.style.top=_+"px",S&&(C.style.left=S+"px")},E=function(){e.removeClass(C,"scrollAd"),C.style.top=y+"px",C.style.left="auto"};if(A<p)m?A>c&&!f(A)?(H(),h=0):E():h++;else if(I&&l.has("ads.contentBlocks")){if(Y){var w=e.getCoords(Y);(A<w.top+_||A+_+b>w.bottom)&&(Y=d(A))}else Y=d(A);Y&&Y.offsetHeight>q?H():E()}else E(),m||(h+=g)}else u()}catch(t){u(),n.record(t,"ta.common.scrollAd:handleScroll")}},300);return m.addScrollHandler=function(){try{setTimeout(function(){e.removeEvent(window,"scroll",D),e.addEvent(window,"scroll",D),D()},w),k=!1}catch(t){n.record(t,"unable to init scrolling ad")}},m.resetScrollAd=function(){if(!l.has("ads.no_scroll_ad"))try{if(k)return;u(),C=null,b=null,H=null,T=null,x=null,E=!1,h=0,k=!0}catch(t){n.record(t,"error resetting scrolling ad")}},o.exportTo(m,"ta.common.scrollAd"),m});
!function(t){t.queueForReady(function(){var e=t.select(".triplist-cta")||[];e.each(function(e){t.trackEventOnPage(e.getAttribute("data-category"),"show","",0,!0);var a=e.getElements("a")||[];a.each(function(e){var a=e.getAttribute("data-category"),n=e.getAttribute("data-event"),c=e.getAttribute("data-label"),r=e.getAttribute("data-value");e.addEvent("click",function(){t.setEvtCookie(a,n,c,r,e.href)})})});var a=t.select(".triplist-featured-in-cta")||[],n=[];a.each(function(e){var a=e.getAttribute("data-category");a&&!n.contains(a)&&(t.trackEventOnPage(a,"show","",0,!0),n.push(a))})})}(ta);
define("ta/util/Qualaroo",["vanillajs","ns-exporter","ta/util/Error","ta/util/Object"],function(e,n,t,o){"use strict";var r={},u=["//","while(true);","while(1);","for(;;);"],a="check",i="force",l=function(e,n){t.record(e,n)},s=function(e,n){var t,o,r;if(!e||!n)return!1;if("json"!==n&&"jsonp"!==n)return e;for(t=0;t<u.length;t++)if(o=u[t],r=e.indexOf(o),0===r)return e.substring(o.length);return e},c=function(e){e?p("/CheckSurvey",S({key:e,action:"init"})):l(null,"_initSurveyKey: No surveyKey to use as token for qualaroo survey display")},y=function(e){e?p("/CheckSurvey",S({key:e,action:"set"})):l(null,"_setSurveyKey: No surveyKey to use as token for qualaroo survey display")},d=function(e,n){if(window._kiq){var t={name:e};n&&(t=o.merge(t,n)),ta.has("ta.qualaroo."+e)&&(t=o.merge(t,ta.retrieve("ta.qualaroo."+e))),window._kiq.push(["set",t])}},f=function(e,n,t,o,r){return new Promise(function(u,a){e&&n&&o?p("/CheckSurvey",S({key:e,action:o,name:n}),function(e){var o=JSON.parse(e),i=o&&"true"===o.display;i&&(t?(window.parent.postMessage("loadQualarooSurvey","*"),u()):window.loadQualarooSurvey?(d(n,r),window.loadQualarooSurvey(),u()):window._kiq?(d(n,r),u()):(l(null,"_conditionallyDisplaySurvey: window.loadQualarooSurvey is not defined, can't display survey"),a()))}):(l(null,"_conditionallyDisplaySurvey: No surveyKey or surveyName or checkAction defined for qualaroo survey display"),a())})},v=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=null,t=0;t<e.length;t++)try{n=new ActiveXObject(e[t]);break}catch(e){}return n},p=function(e,n,t){var o=null;try{o=v()}catch(e){return void l(null,"ta.qualaroo._doGet: Unable to make request in _doGet")}return o?(o.open("GET",e+n,!0),o.onreadystatechange=function(){4===o.readyState&&t&&t(s(o.responseText,"json"))},void o.send(null)):void l(null,"ta.qualaroo._doGet: Unable to make request in _doGet")},S=function(e){var n=[];for(var t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return"?"+n.join("&")};return r.initSurvey=function(e){c(e)},r.cancelSurvey=function(e){y(e)},r.checkAndDisplaySurvey=function(e,n,t){return f(e,n,t,a,null)},r.forceDisplaySurvey=function(e,n,t,o){return f(e,n,t,i,o)},n.exportTo(r,"ta.qualaroo"),r});

define("ta/Core/TA.LocalStorage",["vanillajs","common/trackingStreams","ns-exporter"],function(e,t,n){"use strict";var r=!1,o="taLsTest",i="1",a="TALocalStorageCurrentSessionId",u=!1,s="session-",l=!1,c=[],f=[],v=[],g=function(){return!(!u&&!l)},m=function(e){return!!g()||(t.error(null,"Accessing localStorage session cookie before session logic intialized: "+e),!1)},S=function(e){return d(e,"value")},y=function(e){return d(e,"now")},d=function(e,t){if(!t)return null;try{var n,o=JSON.parse(r.getItem(e)||"0");return o?o.ttl&&o.ttl+o.now<(new Date).getTime()?(r.removeItem(e),null):o.hasOwnProperty(t)?(r.setItem("512",o[t]),n=r.getItem("512"),r.removeItem("512"),n):null:null}catch(e){}return null},h=function(e,t){try{var n=JSON.parse(e||"0");return n&&n.hasOwnProperty(t)?n[t]:null}catch(e){return null}},w=function(e){try{var t=JSON.parse(r.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r.removeItem(e),null):t.value:null}catch(e){}return null},I=function(e){try{r.removeItem(e)}catch(e){}},p=function(e,t){var n=y(e);if(t&&n&&n<(new Date).getTime()-t)try{r.removeItem(e)}catch(e){}},O=function(e){try{var t=r.getItem(e);if(null!==t&&void 0!==t)return!0}catch(e){}return!1},T=function(e,t,n){try{r.setItem(e,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:t}))}catch(e){}},k=function(e){if(l=!0,!e)return t.error(null,"Attempting to initialize localStorage with invalid sesion key: "+e),!1;if(!V())return!1;if(u=S(a),!u||u!=e){u=e,T(a,u);var n=S("latestPageServlet");n&&T("sessionEntryServlet",n),E(),O(a)&&require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").store("isFirstSessionPageView",!0)}for(var r=0;r<v.length;r++)v[r]();v=[]},E=function(){try{var e=s+u,t=new RegExp("^"+s);if(r.length)for(var n=0;n<r.length;n++){var o=r.key(n);try{t.test(o)&&o!=e&&I(o)}catch(e){}}}catch(e){}},V=function(){try{if(r&&r.setItem){r.setItem(o,i);var e=r.getItem(o)!=i;return r.removeItem(o),e&&(r=!1),!!r}}catch(e){}return!1},N=function(e){try{r.setItem("session-"+u,JSON.stringify(e))}catch(e){}},b=function(){try{var e=r.getItem("session-"+u);if(e)return JSON.parse(e)}catch(e){}return{}},A=function(e){c.push(e)},C=function(e,t){f[e]||(f[e]=[]),f[e].push(t)},J=function(e){"function"==typeof e&&(g()?e():v.push(e))},L={enabled:V(),get:S,getObject:w,set:T,remove:I,removeIfElapsed:p,has:O,getTimeStamp:y,updateSessionId:k,onSessionStorageChange:A,onValueChange:C,canUseSession:g,onLocalStorageSessionInit:J,getSessionKey:function(e){if(!m(e))return null;var t=b();return t?t[e]:null},setSessionKey:function(e,t){if(m(e)){var n=b();n||(n={}),n[e]=t,N(n)}},removeSessionKey:function(e){if(m(e)){var t=b();t&&(delete t[e],N(t))}},hasSessionKey:function(e){if(!m(e))return!1;var t=b();if(t){var n=t[e];if(null!==n&&void 0!==n)return!0}return!1},setStorage:function(e){r=e,L.enabled=V()}};if("undefined"!=typeof window){var j=!1;try{j=window.localStorage}catch(e){}L.setStorage(j),function(){function e(e){if(e=e||window.event,!u||e.key&&e.key!=="session-"+u)e.key&&f[e.key]&&(e.oldValueObj=e.oldValue&&h(e.oldValue,"value"),e.newValueObj=e.newValue&&h(e.newValue,"value"),f[e.key].forEach(function(t){t(e)}));else for(var t=0,n=c.length;t<n;t++)c[t](e)}window.addEventListener?window.addEventListener("storage",e,!1):window.attachEvent&&window.attachEvent("onstorage",e)}()}return n.createNs(L,"ta","localStorage"),L});
define("ta/support/Qualtrics",["vanillajs","ns-exporter","page-model","ta/Core/TA.LocalStorage"],function(e,t,n,s){"use strict";var i={},r=function(e,t,n,s){this.get=function(e){for(var e=e+"=",t=document.cookie.split(";"),n=0,s=t.length;n<s;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},this.set=function(e,t){var n="",n=new Date;n.setTime(n.getTime()+6048e5),n="; expires="+n.toGMTString(),document.cookie=e+"="+t+n+"; path=/; "},this.check=function(){var s=this.get(n);if(s)s=s.split(":");else{if(100==e)return!0;"v"==t&&(e=Math.random()>=e/100?0:100),s=[t,e,0],this.set(n,s.join(":"))}var i=s[1];if(100==i)return!0;switch(s[0]){case"v":return!1;case"r":return i=s[2]%Math.floor(100/i),s[2]++,this.set(n,s.join(":")),!i}return!0},this.go=function(){if(this.check()){var e=document.createElement("script");e.type="text/javascript",e.src=s+"&t="+(new Date).getTime(),document.body&&document.body.appendChild(e)}},this.start=function(){var e=this;e.go()}};i.displaySurvey=function(e){var t=n.session.uid,s="QSI_S_"+e,i="//znbkpczkrl5wwqzj3-tripadvisor.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_SIID="+e+"&UID="+t+"&Q_LOC="+encodeURIComponent(window.location.href);try{new r(100,"r",s,i).start()}catch(e){}j(!0)};var a=2592e6,u=6048e5,o=!1,c=!1,l=4,g=3,p=2,f=Math.round(10*Math.random())%2,d=!1,v=function(){return s.get("qualtrics-debug")},h=function(){return Number(s.get("qualtrics-session-count")||0)},q=function(){return!!s.getSessionKey("qualtrics-session-count-incremented")},S=function(){var e=h(),t=s.getSessionKey("qualtrics-session-count-incremented");t||(s.set("qualtrics-session-count",e+1,u),s.setSessionKey("qualtrics-session-count-incremented",!0))},m=function(e){s.setSessionKey("qualtrics-ignored",e)},y=function(){return!!s.getSessionKey("qualtrics-ignored")},w=function(e){s.set("qualtrics-responded",e,a)},I=function(){return!!s.get("qualtrics-responded")},b=function(){return Number(s.getSessionKey("qualtrics-page-views")||0)},D=function(){return Number(s.getSessionKey("qualtrics-intercept-views")||0)},K=function(){var e=D();s.setSessionKey("qualtrics-intercept-views",++e),4===e&&m(!0)},T=function(){return Number(s.getSessionKey("qualtrics-intercept-reqs")||0)},N=function(){var e=T();s.setSessionKey("qualtrics-intercept-reqs",e+1)},k=function(){return d},C=function(e){d=e},R=function(){var e=!1,t=k();if(t){var n=I()||y(),s=h(),i=q(),r=b(),a=D();!n&&(s<g||s==g&&i)&&a<l&&(r===p||r>p&&0===f)&&(e=!0)}return e};i.isDebug=v,i.setResponded=w,i.hasResponded=I,i.getPageViews=b,i.getSmartSurvey=k,i.setSmartSurvey=C,i.updateInterceptViews=K,i.canDisplaySmart=R,i.getSessionCount=h,i.updateSessionCount=S,i.getInterceptViews=D,i.updateInterceptReqs=N,i.getInterceptReqs=T;var j=function(e){e?(s.set("qualtrics-last-seen",Date.now()),o=!0):s.remove("qualtrics-last-seen")},x=function(){var e=parseFloat(s.get("qualtrics-last-seen")),t=isNaN(e)?0:e,n=t<0?0:t+a;return Date.now()<n},L=function(){return o},M=function(){var e=Number(s.get("qualtrics-page-views"));return 2===e&&!i.hasShownInLastThirtyDays()||1===e&&!c&&!i.hasShownInLastThirtyDays()},V=function(){if(k()&&(h()<g||h()==g&&q())&&!I()&&!y()){var e=b();s.setSessionKey("qualtrics-page-views",e+1)}var t=s.get("qualtrics-session-id"),i=n.session.sessionId;if(t&&t===i){var e=Number(s.get("qualtrics-page-views"))+1;s.set("qualtrics-page-views",e)}else s.set("qualtrics-session-id",i),s.set("qualtrics-page-views",1);c=!0};return i.hasShownInLastThirtyDays=x,i.seenThisPageView=L,i.canDisplay=M,i.updatePageViews=V,t.exportTo(i,"ta.support.qualtrics"),i});
require(["ta/rollupAmdShim"],function(a){a.install(["ta/media/viewerScaffold","ta/photos/oysterTracking","pages/inappropriate_vote_stub"],["ta","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"media_albums",files:{js3:{src:{pages:{inappropriate_vote_stub:1},ta:{media:{viewerScaffold:1},photos:{oysterTracking:1}}}}},_:{baseUrl:"/"}})};
define("mixins/mixin",[],function(){"use strict";return function(r){var i,n,t=Array.prototype.slice.call(arguments,1);for(var e in t)if(t.hasOwnProperty(e)){i=t[e];for(n in i)r[n]=i[n]}return r}});
define("babel/babel-helpers",[],function(){var e={};return e["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.jsx=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(r,t,n,o){var i=r&&r.defaultProps,u=arguments.length-3;if(t||0===u||(t={}),t&&i)for(var a in i)void 0===t[a]&&(t[a]=i[a]);else t||(t=i||{});if(1===u)t.children=o;else if(u>1){for(var f=Array(u),l=0;l<u;l++)f[l]=arguments[l+3];t.children=f}return{$$typeof:e,type:r,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}}(),e.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var r=e[Symbol.asyncIterator];if(null!=r)return r.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},e.asyncGenerator=function(){function e(e){this.value=e}function r(r){function t(e,r){return new Promise(function(t,o){var a={key:e,arg:r,resolve:t,reject:o,next:null};u?u=u.next=a:(i=u=a,n(e,r))})}function n(t,i){try{var u=r[t](i),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(u.done?"return":"normal",u.value)}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":i.resolve({value:r,done:!0});break;case"throw":i.reject(r);break;default:i.resolve({value:r,done:!1})}i=i.next,i?n(i.key,i.arg):u=null}var i,u;this._invoke=t,"function"!=typeof r["return"]&&(this["return"]=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype["throw"]=function(e){return this._invoke("throw",e)},r.prototype["return"]=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new r(e.apply(this,arguments))}},"await":function(r){return new e(r)}}}(),e.asyncGeneratorDelegate=function(e,r){function t(t,n){return o=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:r(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):t("next",e)},"function"==typeof e["throw"]&&(n["throw"]=function(e){if(o)throw o=!1,e;return t("throw",e)}),"function"==typeof e["return"]&&(n["return"]=function(e){return t("return",e)}),n},e.asyncToGenerator=function(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,i){try{var u=r[o](i),a=u.value}catch(e){return void t(e)}return u.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},e.classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),e.defineEnumerableProperties=function(e,r){for(var t in r){var n=r[t];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t,n)}return e},e.defaults=function(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],i=Object.getOwnPropertyDescriptor(r,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e},e.defineProperty=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},e["extends"]=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},e.get=function e(r,t,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,t);if(void 0===o){var i=Object.getPrototypeOf(r);return null===i?void 0:e(i,t,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},e.inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},e["instanceof"]=function(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r},e.interopRequireDefault=function(e){return e&&e.__esModule?e:{"default":e}},e.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r["default"]=e,r},e.newArrowCheck=function(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")},e.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.objectWithoutProperties=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e.possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},e.selfGlobal="undefined"==typeof global?self:global,e.set=function e(r,t,n,o){var i=Object.getOwnPropertyDescriptor(r,t);if(void 0===i){var u=Object.getPrototypeOf(r);null!==u&&e(u,t,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},e.slicedToArray=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.slicedToArrayLoose=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},e.taggedTemplateLiteral=function(e,r){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))},e.taggedTemplateLiteralLoose=function(e,r){return e.raw=r,e},e.temporalRef=function(e,r,t){if(e===t)throw new ReferenceError(r+" is not defined - temporal dead zone");return e},e.temporalUndefined={},e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},e.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},e});
define("overlays/loading-spinner",["vanillajs"],function(){"use strict";function i(i){return'<div style="padding:36px; min-width: 100px; min-height: 100px">'+i+"</div>"}function n(){for(var i='<div class="cssLoadingSpinner" style="display:block">'+e(),n=1;n<=8;n++)i+='<div class="cssLoadingSpinner_step'+n+'"></div>';return i+"</div>"}function e(){var i=window.CDNHOST||require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("CDNHOST");return'<div class="spinnerImage" style="position: absolute; top: 50%; left: 50%; width: 32px; height: 32px; margin-top: -16px; margin-left: -16px; background:url('+i+'/img2/generic/site/ajax-loader.gif)"></div>'}return function(r){var t=window.AnimationEvent?n():e();return r?t:i(t)}});
define("overlays/utils",["vanillajs","overlays/loading-spinner","api-mod"],function(t,e,n){"use strict";var r={};return r.arrowDir={above:"bottom",below:"top",left:"right",leftTop:"right",right:"left",rightTop:"left",leftEvenInRtl:"right",rightEvenInRtl:"left",bottomRight:"top",bottomLeft:"top"},r.arrowDirRtl={above:"bottom",below:"top",left:"right",leftTop:"right",right:"left",rightTop:"left",leftEvenInRtl:"left",rightEvenInRtl:"right",bottomRight:"top",bottomLeft:"top"},r.getArrowDir=function(t,e,i){var o=n.hasClass(document.body,"rtl")?r.arrowDirRtl:r.arrowDir;if("wideside"===t&&e&&i){var l=n.getSize(e),a=n.getPosition(e),f=n.getSize(i);return a.left>f.x-a.left-l.x?o.left:o.right}return o[t]},r.injectContent=function(t,e,r,i,o){n.isElement(r)?n.adopt(t,r):i?(r=n.find(i,e),n.removeClass(r,"hidden"),n.adopt(t,r)):o?(r=n.find(o),r&&(t.innerHTML+=r.innerHTML)):t.innerHTML+=r},r.injectContentWithDataAttrs=function(t,e,n,i,o){n=n||e&&e.getAttribute("data-content")||"",i=i||e&&e.getAttribute("data-element")||"",o=o||e&&e.getAttribute("data-element-copy")||"",r.injectContent(t,e,n,i,o)},r.parseOffsets=function(t){return t&&t.length?{x:t[0]&&parseInt(t[0],10)||0,y:t[1]&&parseInt(t[1],10)||0}:{x:0,y:0}},r.loadingSpinnerHtml=e,r});
define("utils/array/flatten",["vanillajs"],function(){return function n(r){return r.reduce(function(r,t){return r.concat(Array.isArray(t)?n(t):t)},[])}});
define("utils/bindAll",["babel/babel-helpers"],function(n){return function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;i<r;i++)e[i-1]=arguments[i];return e.forEach(function(r){n[r]=n[r].bind(n)}),n}});
define("utils/AjaxData",["ta","mixins/Events","lib/jquery-amd"],function(t,e,n){"use strict";function i(){}function a(t){function a(){return null!==s||null!==l}function r(){var t=a(),e=d,n=l;if(d=null,s=null,l=null,null!==n)try{n.abort()}catch(t){}return null!==e&&clearTimeout(e),t}function o(){var t=s;if(s=null,t){var e;t.success=function(n){l==e&&(l=null,v&&(y=n),f.data=n,f.error=void 0,f.dataVersion=++p,h(f,e,t.data),u.emit("update"))},t.error=function(n,i,a){l==e&&(l=null,f.data=y,f.dataVersion=++p,f.error={type:i,error:a,status:n.status,responseText:n.responseText},h(f,e,t.data),u.emit("update"))},e=c(t),l=e,u.emit("update")}}t=t||{};var u=new e("update"),d=null,s=null,l=null,f=this,p=0,c=t.ajaxFunc||n.ajax,h=t.transformer||i,m=t.dataType||"html",v=!!t.holdData,y=void 0;this.dataVersion=0,this.on=u.on.bind(u),this.off=u.off.bind(u),this.removeListener=u.removeListener.bind(u),this.isDone=function(){return!a()},this.isBusy=function(){return a()},this.clear=function(){var t=a()||"undefined"!=typeof this.data||"undefined"!=typeof this.error;r(),y=void 0,f.data=void 0,f.error=void 0,f.dataVersion=0,h(f),t&&u.emit("update")},this.refresh=function(t,e,n,i,a){r(),(!i||i<0)&&(i=0),s={type:t,url:e,data:n,dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof a&&(s.timeout=a),d=setTimeout(o,i),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")},this.postJson=function(t,e,n,i){r(),n=n||0,n<0&&(n=0),s={beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e),dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof i&&(s.timeout=i),d=setTimeout(o,n),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")}}return a});
define("overlays/position/base",[],function(){"use strict";return function(){return function i(){var o=i.onPosition&&i.onPosition.bind(this);this.on("show",function(){o&&(this.on("positionDirty",o),o())}.bind(this)),this.on("hide",function(){o&&this.off("positionDirty",o),i.offPosition&&i.offPosition.call(this)}.bind(this))}}});
define("utils/responsive",["vanillajs"],function(){"use strict";function t(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function n(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function e(n){return function(){return t()>=n}}function r(n){return function(){return t()<=n}}function i(t,n){return function(){return e(t)()&&r(n)()}}var o={largeMonitor:1600,widescreen:1280,desktop:1024,tablet:768,mobile:767},u=Object.keys(o).sort(function(t,n){return o[n]-o[t]}),c={breakpoints:u,widths:o,atLeast:e,atMost:r,between:i,largeMonitor:e(o.largeMonitor),widescreen:e(o.widescreen),desktop:e(o.desktop),tablet:e(o.tablet),mobile:r(o.mobile),desktopOnly:i(o.desktop,o.widescreen-1),tabletOnly:i(o.tablet,o.desktop-1),landscape:function(){return t()>n()},portrait:function(){return n()>t()},currentBreakpoints:function(){return u.filter(function(t){return"function"==typeof c[t]&&c[t]()})},is:function(t,n,e){var r="function"!=typeof t&&c[t]?c[t]:t;return function(t,i){return r()?"undefined"!=typeof t?t:n:"undefined"!=typeof i?i:e}}};return c});
require(["ta/rollupAmdShim"],function(a){a.install(["mixins/Events","utils/browserutils","api-mod","utils/MouseAway","utils/resourceLoader","overlays/Overlay","overlays/utils","overlays/ajaxUtil","overlays/options/closeOnDocClick","overlays/options/delayedCloseOnDocClick","overlays/options/closeOnChildClick","overlays/options/closeOnSourceClick","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnMouseOut","overlays/options/closeOnMouseAway","overlays/options/closeOnScroll","overlays/options/closeOnEscape","overlays/options/closeOnEvent","overlays/options/closeOnTaEvent","overlays/options/closeOnTargetEvent","overlays/options/closeOnLegacyOverlay","overlays/options/fireEventOnWindowshadeClick","overlays/options/hoverDelay","overlays/options/storeOverlayOnElement","overlays/options/fadeInOut","overlays/options/highlightElement","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/autoReposition","overlays/options/autosizePage","overlays/options/keepInDom","overlays/options/matchWidth","overlays/options/maxWidth","overlays/options/minWidth","overlays/options/ajax","overlays/options/centerArrowOnSrcElement","overlays/options/closeOnTargetChildClick","overlays/options/stickyClick","overlays/position","overlays/styles/modal","overlays/styles/popover","overlays/styles/tooltip","overlays/styles/windowshade","overlays/styles/dropdown","overlays/styles/notification","overlays/uiOverlay"],["ta","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"uiOverlays",files:{"js-amd":{src:{mixins:{Events:1},utils:{browserutils:1,resourceLoader:1,MouseAway:1},"api-mod":1,overlays:{ajaxUtil:1,uiOverlay:1,utils:1,options:{closeOnTargetChildClick:1,keepInDom:1,autoReposition:1,closeOnTaEvent:1,ajax:1,closeOnDocClick:1,closeOnMouseOut:1,closeOnSourceClick:1,centerArrowOnSrcElement:1,fadeInOut:1,highlightElement:1,storeOverlayOnElement:1,autosizePage:1,closeOnScroll:1,stickyClick:1,maxWidth:1,closeOnWindowshadeClick:1,closeOnEscape:1,closeOnMouseAway:1,minWidth:1,closeOnLegacyOverlay:1,closeOnChildClick:1,closeOnTargetEvent:1,matchWidth:1,repositionOnEvent:1,fireEventOnWindowshadeClick:1,closeOnEvent:1,repositionOnTaEvent:1,delayedCloseOnDocClick:1,hoverDelay:1},styles:{notification:1,popover:1,tooltip:1,windowshade:1,dropdown:1,modal:1},position:1}}},js3:{build:{es6:{src:{overlays:{Overlay:1}}}}}},_:{baseUrl:"/"}})};
define("utils/MouseAway",["vanillajs","api-mod","ta","mixins/mixin","mixins/Events","utils/throttle"],function(t,o,e,r,n,i){"use strict";function l(t,o){var e=t.right<=o.left,r=t.left>=o.right,n=t.top>=o.bottom,i=t.bottom<=o.top;if(e||r){var l=e?"left":"right",u=e?"right":"left";return[[t[l],t.top],[o[l],o.top],[o[u],o.top],[o[u],o.bottom],[o[l],o.bottom],[t[l],t.bottom]]}if(n||i){var a=n?"bottom":"top",f=n?"top":"bottom";return[[t.right,t[a]],[o.right,o[a]],[o.right,o[f]],[o.left,o[f]],[o.left,o[a]],[t.left,t[a]]]}return null}function u(t,o){if(!o)return!1;for(var e=t[0],r=t[1],n=!1,i=0,l=o.length-1;i<o.length;l=i++){var u=o[i][0],a=o[i][1],f=o[l][0],s=o[l][1],m=a>r!=s>r&&e<(f-u)*(r-a)/(s-a)+u;m&&(n=!n)}return n}function a(t,e,r){var n=r.relatedTarget||r.target;if(!t||!e)return!1;if(o.containsElement(t,n)||o.containsElement(e,n))return!0;var i=l(o.getCoords(t),o.getCoords(e)),a=u([r.clientX+o.scrollLeft(),r.clientY+o.scrollTop()],i);return a}function f(t,e){r(this,new n("mouseAway")),o.addEvent(window,"mousemove",i(function(o){var r=a(t,e,o);r||this.emit("mouseAway")}).bind(this),300)}return f});
define("utils/resourceLoader",["vanillajs"],function(e){"use strict";function r(){function e(){try{if(navigator.userAgent.match(/ Safari[\/]/)&&!navigator.userAgent.match(/ Chrom/)&&navigator.userAgent.match(/ Version\/5\./))return!1;var e=navigator.userAgent.match(/\ AppleWebKit\/(\d+)\.(\d+)/);if(e){e.shift();var r=parseInt(e[0]),t=parseInt(e[1]);if(r<535||535==r&&t<23)return!1}return"onload"in document.createElement("link")}catch(e){return!1}}function r(e,r,t){u++,(u==c.length||l)&&r(t),t?require.defined("ta/util/Error")&&require("ta/util/Error").record(new Error(e),"utils/resourceLoader: failed to load file ["+e+"]"):n[e]=1}function o(e){return e.match(/\.css$/)?"css":e.match(/\.js$/)?"js":""}function a(t,n,u){var c=n||o(u);if(c){var l,s,f;"css"==c?(l=document.createElement("link"),l.rel="stylesheet",l.type="text/css",f="href",s=e()):"js"==c&&(l=document.createElement("script"),l.type="text/javascript",f="src",s="onload"in l),s?(l.onload=r.bind(null,u,t,!1),"onerror"in l&&(l.onerror=function(){i[u]?r(u,t,!0):(i[u]=!0,a(t,n,u))})):r(u,t,!1),l[f]=u;var d=document.getElementsByTagName("head")[0];d.appendChild(l)}else require.defined("ta/util/Error")&&require("ta/util/Error").record(new Error(u),"utils/resourceLoader: unknown file type for ["+u+"]"),r(u,t,!0)}var u,c,l;this.load=function(e,r,n){if("function"==typeof r&&(n=r,r={}),u=0,c=t(e||null),n=n||function(){},r=r||{},l=r.serial,0==c.length)setTimeout(n,1);else if(l){var i,o=c.slice(),s=function(e){i=i&&e,0==o.length?n&&n(i):a(s,r.forceType,o.shift())};s()}else c.forEach(a.bind(null,n,r.forceType))}}function t(e){var r=[],t=function(e){!e||e in n||(e&&e.splice?e.forEach(t):r.push(e))};return t(e),r}var n={},i={};return{Loader:r,load:function(e,t,n){"function"==typeof t&&(n=t,t={}),(new r).load(e,t,n)},loaded:function(e){return 0==t(e).length}}});
define("overlays/Overlay",["babel/babel-helpers","api-mod","mixins/mixin","mixins/Events","overlays/utils","utils/array/flatten","utils/bindAll"],function(t,e,n,i,s,r,o){var h=function(){function h(e){var s=this;t.classCallCheck(this,h),this.sourceElement=e,this.domParent=document.body,this.container=null,this.contentElement=null,n(this,new i("show","hide","destroy","positionDirty","hover","contentsUpdated")),o(this,"show","hide","destroy");for(var l=arguments.length,a=Array(l>1?l-1:0),u=1;u<l;u++)a[u-1]=arguments[u];r(a).filter(function(t){return"function"==typeof t}).forEach(function(t){return t.call(s)})}return t.createClass(h,[{key:"isOpen",value:function(){return e.inDocument(this.container)}},{key:"show",value:function(){return e.inDocument(this.container)?this:(this.domParent.appendChild(this.container),this.container.overlay=this,this.emit("append"),this.emit("show"),this)}},{key:"hide",value:function(t){return e.inDocument(this.container)?(delete this.container.overlay,this.domParent.removeChild(this.container),this.emit("hide",{trigger:t}),this):this}},{key:"destroy",value:function(t){return this.hide(t),this.emit("destroy",{trigger:t}),this.sourceElement=null,this.contentElement=null,this}},{key:"reposition",value:function(){return this.emit("positionDirty"),this}},{key:"updateContent",value:function(t){return this.contentElement.innerHTML="",s.injectContentWithDataAttrs(this.contentElement,this.sourceElement,t),this.emit("contentsUpdated"),this.reposition(),this}}]),h}();return h});
define("overlays/ajaxUtil",["vanillajs","ta","utils/object/shallow-copy","utils/AjaxData","mixins/Events","overlays/loading-spinner","utils/resourceLoader","amdloaders"],function(e,t,r,a,n,i,o,s){"use strict";function d(e,t){var r,a=[];for(r in t)t[r]&&a.push(r);a.sort();for(var n=e,i=n.indexOf("?")>=0?"&":"?",o=0;o<a.length;++o)r=a[o],n+=i+encodeURIComponent(r)+"="+encodeURIComponent(String(t[r])),i="&";return n}function u(){for(var e=0,t={},r=[],a=h.length-1;a>=0;--a){var n=h[a],i=p[n];i&&!t[n]&&(i.hasClients()||++e<=f)&&(t[n]=i,r.push(n))}return r.reverse(),p=t,h=r,m=h.length+f,h}function l(e,i){function d(){t.page.datesToQueryString("STAYDATES");if(y){y=!1,u();for(var e=h.length-1;e>=0;--e){var r=p[h[e]];r.needsTravelInfo&&r.invalidate()}}}function l(e,r,a,n,i,s){if(n=n&&t.page&&t.page.usingUnifiedDates){y=!0;var u=t.page.datesToQueryString("STAYDATES");u&&(r+="&"+u),g||(g=!0,t.page.on("dateSelected",d),t.page.on("guestsSelected",d))}if(i>1){if(i>20)return;r+="&reqNum="+i,s>=0||(s=2e3)}else s=0;a?e.refresh("POST",r,a,s):e.refresh("GET",r,void 0,s),o.load(m,function(){C=!0,c()})}function c(){if(S.isBusy()||!C)return q&&clearTimeout(q),void(q=void 0);if(!S.data)return void(0!==S.dataVersion?A.error&&A.error===S.error||(A.error=S.error||"no content",q=q||setTimeout(f,0)):0!==R&&(L=b,R=S.dataVersion,V=[],E.hasListeners("update")&&(q=q||setTimeout(f,0))));if(R!==S.dataVersion){try{var e=document.createElement("div");e.innerHTML=S.data;var t=x,r=document.head||document.getElementsByTagName("head")[0];V=[],i.noScript||Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){if(t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),e.src&&(a.src=e.src),e.text&&(a.text=e.text),a.setAttribute("data-rup",e.getAttribute("data-rup")),r.appendChild(a),e.src||r.removeChild(a)}e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){t?r.appendChild(e):e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("[data-targetEvent]"),function(e){V.push(e),e.parentNode.removeChild(e)}),t&&(x=!1,v[i.inlineResourceId]=!0),L=e.innerHTML,R=S.dataVersion,S.data=void 0}catch(e){A.error="invalid HTML"}q=q||setTimeout(f,0)}}function f(){var t,r=!E.hasListeners("update");for(q=void 0,A.data=L,A.dataVersion=R,E.emit("update");t=V.shift();){var a=t.getAttribute("data-targetEvent");if("repoll-required"===a){if(r)return V=[],A.data=L=b,void(A.dataVersion=R=0);++P>1||(P=2);var n=Number(t.getAttribute("data-delay"));l(S,e,i.reqParams,I,P,n)}else E.emit("data-targetEvent",a,t)}}var m,C,A=this,S=new a({dataType:"html",ajaxFunc:i.ajaxFunc}),E=new n("update","data-targetEvent"),b=i.loadingContent||T,x=!1,I=!!i.sendTravelInfo,q=void 0,L=b,R=S.dataVersion,V=[],P=0;this.error=void 0,this.loadingData=b,this.data=L,this.dataVersion=R,this.needsTravelInfo=I,this.on=E.on.bind(E),this.off=E.off.bind(E),this.removeListener=E.removeListener.bind(E),this.init=function(){S.on("update",c.bind(this))},this.isBusy=function(){return S.isBusy()||q},this.isDone=function(){return!S.isBusy()&&!q},this.invalidate=function(){S.clear(),P=0,this.hasClients()?l(S,e,i.reqParams,I,0,0):(A.data=L=b,A.dataVersion=R=0)},this.hasClients=function(){return E.hasListeners("update")},this.load=function(){if(!S.isBusy()){if(0!==S.dataVersion)return void setTimeout(function(){E.emit("update")},1);var t=i.reqParams,a=!i.isWidget||!i.inlineResourceId||!v[i.inlineResourceId];if(a){var n=s.getLoadedFilesParams();x=!0,t=t?r(t):{},t.haveJses=n.haveJses,t.haveCsses=n.haveCsses,i.isWidget&&(t.Action="install")}m=i.resources,P=0,l(S,e,t,I,0,0)}}}function c(e,t){var r=d(e,t.reqParams);r.length<128&&(e=r,t.reqParams=void 0);var a=p[r];return a||(a=new l(e,t),a.init(),t.noCache||(p[r]=a)),t.noCache||(h.push(r),h.length>m&&u()),a}var v={},f=10,h=[],p={},m=f,g=!1,y=!1,T=i();return{loadData:function(e,t){!t&&(t={});var r=c(e,t);return r.load(),r},loadOverlayWidget:function(e,t,a){var n="/OverlayWidgetAjax?Mode="+e;a?n+="&metaReferer="+encodeURIComponent(a):"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),t=t?r(t):{},t.inlineResourceId=e,t.isWidget=!0;var i=c(n,t);return i.load(),i},cleanCache:u}});
define("overlays/options/closeOnDocClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.sourceElement&&e.containsElement(this.sourceElement,t.target)||e.containsElement(this.container,t.target)||t.target&&("option"===t.target.tagName||e.hasClass(t.target,"ui_dropdown")||e.getParent(t.target,"ui_dropdown"))||e.checkBrowser("ie")&&t.target&&"select"==t.target.tagName&&e.containsEvent(t.target,t)&&e.select(this.container,"input").indexOf(t.target)||this.hide("doc-click")}function i(t){return function(){var i=e.bind(n,this);this.on("show",function(){setTimeout(function(){this.isOpen()&&(e.addEvent(document,"click",i),t&&e.addEvent(document,"touchstart",i))}.bind(this),1)}).on("hide",function(){e.removeEvent(document,"click",i),t&&e.removeEvent(document,"touchstart",i)})}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/delayedCloseOnDocClick",["api-mod"],function(t){"use strict";function e(e){if(!(this.sourceElement&&t.containsElement(this.sourceElement,e.target)||t.containsElement(this.container,e.target)||e.target&&("option"===e.target.tagName||t.hasClass(e.target,"ui_dropdown")||t.getParent(e.target,"ui_dropdown"))||t.checkBrowser("ie")&&e.target&&"select"==e.target.tagName&&t.containsEvent(e.target,e)&&t.select(this.container,"input").indexOf(e.target)))if(i&&i>0){var n=this;setTimeout(function(){n.hide("doc-click")},i)}else this.hide("doc-click")}function n(n){return function(o){return function(){var c=t.bind(e,this);i=o,this.on("show",function(){setTimeout(function(){this.isOpen()&&(t.addEvent(document,"click",c),n&&t.addEvent(document,"touchstart",c))}.bind(this),1)}).on("hide",function(){t.removeEvent(document,"click",c),n&&t.removeEvent(document,"touchstart",c)})}}}var i=0,o=n(!0);return o.withoutTouchEvents=n(!1),o});
define("overlays/options/closeOnChildClick",["vanillajs","api-mod"],function(t,n){"use strict";function i(t){n.containsElement(this.container,t.target)&&this.hide("child-click")}function e(t){return function(){var e=n.bind(i,this);this.on("show",function(){n.addEvent(this.domParent,"click",e),t&&n.addEvent(this.domParent,"touchstart",e)}).on("hide",function(){n.removeEvent(this.domParent,"click",e),t&&n.removeEvent(this.domParent,"touchstart",e)})}}var o=e(!0);return o.withoutTouchEvents=e(!1),o});
define("overlays/options/closeOnSourceClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){e.containsElement(this.sourceElement,t.target)&&(this.hide("source-click"),t.stopPropagation(),t.preventDefault())}function i(t){return function(){var i=n.bind(this),o=function(t){setTimeout(t.bind(this),1)}.bind(this);this.on("show",o.bind(void 0,function(){e.addEvent(this.sourceElement,"click",i),t&&e.addEvent(this.sourceElement,"touchstart",i)})).on("hide",o.bind(void 0,function(){e.removeEvent(this.sourceElement,"click",i),t&&e.removeEvent(this.sourceElement,"touchstart",i)}))}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/closeOnWindowshadeClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(){var i=this;n.addEvent(this.shade,"click",function(){i.hide("windowshade")})}});
define("overlays/options/closeOnMouseOut",["vanillajs","api-mod"],function(e,t){"use strict";function n(e){t.containsElement(this.sourceElement,e.relatedTarget)||t.containsElement(this.container,e.relatedTarget)||this.hide()}var o=function(){var e=t.bind(n,this);this.on("show",function(){t.addEvent(this.sourceElement,"mouseout",e),t.addEvent(this.container,"mouseout",e)}).on("hide",function(){t.removeEvent(this.sourceElement,"mouseout",e),t.removeEvent(this.container,"mouseout",e)})};return o});
define("overlays/options/closeOnMouseAway",["vanillajs","utils/MouseAway"],function(n,o){"use strict";return function(){var n=new o(this.sourceElement,this.container),e=this.hide;this.on("show",function(){n.on("mouseAway",e)}).on("hide",function(){n.off("mouseAway")})}});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/closeOnEscape",["vanillajs","api-mod"],function(e,n){"use strict";function t(e){27===e.keyCode&&(e.preventDefault(),this.hide("escape"))}var o=function(){var e=n.bind(t,this);this.on("show",function(){n.addEvent(document,"keyup",e)}).on("hide",function(){n.removeEvent(document,"keyup",e)})};return o});
define("overlays/options/closeOnEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n){return function(){var e=t.bind(i,this);this.on("show",function(){t.addEvent(this.domParent,n,e)}).on("hide",function(){t.removeEvent(this.domParent,n,e)})}}});
define("overlays/options/closeOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,t){"use strict";function o(){this.hide("on-event")}return function(n){return function(){var i=o.bind(this);this.on("show",function(){t.on(n,i)}).on("hide",function(){t.off(n,i)})}}});
define("overlays/options/closeOnTargetEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(this);this.on("show",function(){e.forEach(function(i){t.addEvent(n,i,c)})}).on("hide",function(){e.forEach(function(i){t.removeEvent(n,i,c)})})}}});
define("overlays/options/closeOnLegacyOverlay",["vanillajs","ta/Core/TA.Event"],function(n,e){"use strict";return function(){e.on("onOverlayShow",this.hide.bind(this))}});
define("overlays/options/fireEventOnWindowshadeClick",["vanillajs","api-mod"],function(n,i){"use strict";var e=function(n){return function(){i.addEvent(this.shade,"click",function(){i.fireEvent(document,n,{})})}};return e});
define("overlays/options/hoverDelay",["vanillajs","api-mod"],function(e,t){"use strict";var i=function(e,i){return function(){var n=t.bind(function(){this.hoverTimer=setTimeout(this.show,e)},this),o=t.bind(function(){clearTimeout(this.hoverTimer)},this);t.addEvent(this.sourceElement,"mouseover",n),t.addEvent(this.sourceElement,"mouseout",o),i&&n()}};return i});
define("overlays/options/storeOverlayOnElement",["vanillajs","api-mod"],function(e,t){"use strict";var n=function(){this.sourceElement&&t.store(this.sourceElement,"overlay",this)};return n});
define("overlays/options/fadeInOut",["api-mod","utils/bindAll"],function(i,t){"use strict";var n={"fade_none":0,"fade_short":250,"fade_normal":500,"fade_long":1e3},e="fade_in";return function(s,o){return function(){if(s&&s in n){i.addClass(this.container,s);var a=n[s],d=i.bind(this.show,this),h=i.bind(this.hide,this),u=null;this.show=function(){d&&d(),setTimeout(function(){i.addClass(this.container,e)}.bind(this),0),clearTimeout(u),o&&(u=setTimeout(i.bind(this.hide,this),a+o))},this.hide=function(){i.removeClass(this.container,e),clearTimeout(u),u=setTimeout(function(){h&&h()},a)},t(this,"show","hide")}}}});
define("overlays/options/highlightElement",["api-mod"],function(i){"use strict";var n=function(n){function t(n){this.on("show",function(){i.addClass(n,"highlight")}).on("hide",function(){i.removeClass(n,"highlight")})}return arguments.length?function(){t.call(this,n)}:void t.call(this,this.sourceElement)};return n});
define("overlays/options/repositionOnEvent",["vanillajs","api-mod"],function(n,i){"use strict";function t(){this.emit("positionDirty")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(t,this);this.on("show",function(){e.forEach(function(t){i.addEvent(n,t,c)})}).on("hide",function(){e.forEach(function(t){i.removeEvent(n,t,c)})})}}});
define("overlays/options/repositionOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,i){"use strict";return function(n){return function(){var t=this.emit.bind(this,"positionDirty");this.on("show",function(){i.on(n,t)}).on("hide",function(){i.off(n,t)})}}});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/autosizePage",["lib/jquery-amd","api-mod"],function(o,t){"use strict";return function(i,n){return function(){function n(){var n=t.getCoords(this.container),s=t.getSize(window);this._scrollTop||(this._scrollTop=t.scrollTop()),o(document.body).css("overflow","hidden"),n.height+2*i>s.y&&o(this.container).css({top:i,marginTop:0}),window.scrollTo(0,0)}this.domParent=o("<div></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto"})[0],this.on("append",function(){o(document.body).append(this.domParent)}),this.on("show",n),this.on("positionDirty",n),this.on("hide",function(){o(document.body).css("overflow","auto"),o(this.domParent).remove(),window.scrollTo(0,this._scrollTop),delete this._scrollTop})}}});
define("overlays/options/keepInDom",["vanillajs","api-mod"],function(n,i){var t="";return function(){this.isOpen=function(){return!!i.inDocument(this.container)&&!i.hasClass(this.container,"hidden")},this.show=function(){return i.inDocument(this.container)?(this.container.style.display=t,i.removeClass(this.container,"hidden")):this.domParent.appendChild(this.container),this.emit("show"),this},this.hide=function(n){return i.inDocument(this.container)&&"none"!=this.container.style.display&&("none"!=this.container.style.display&&(t=this.container.style.display||"",this.container.style.display="none"),i.hasClass(this.container,"hidden")||i.addClass(this.container,"hidden"),this.emit("hide",{trigger:n})),this}}});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/maxWidth",["vanillajs"],function(i){"use strict";var t=function(i){function t(){this.container.style.maxWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",t.bind(this))}};return t});
define("overlays/options/minWidth",["vanillajs"],function(i){"use strict";var n=function(i){function n(){this.container.style.minWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",n.bind(this))}};return n});
define("overlays/options/ajax",["vanillajs","overlays/ajaxUtil"],function(t,e){"use strict";function i(t){return t&&t.match(/^((https?:)?(\/\/)?([\da-z\.\-\u00a1-\uffff]+)\.([a-z\.\u00a1-\uffff]{2,6}))?(\/[\w]+)*(\?[\/\w\.+%=\-#&\/!\u00a1-\uffff]+)?$/)}function n(t,n){function s(){if(this.sourceElement&&(t=t||this.sourceElement.getAttribute("data-url"),void 0===n.noCache&&(n.noCache=this.sourceElement.getAttribute("data-ajaxNoCache")),n.resources||(n.resources=this.sourceElement.getAttribute("data-resources"),n.resources&&(n.resources=n.resources.replace(/[\[\]]/g,"").split(/[ ,]+/)))),t){var s,a,r=0,o=function(){s.dataVersion!==r&&(this.contentElement.innerHTML=s.data,this.emit("contentsUpdated"),r=s.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement)),this.reposition(),setTimeout(this.reposition.bind(this),1),this.emit("contentLoaded",s.error)}.bind(this),d=function(i){return a==t?(this.reposition(),void this.emit("contentsUnchanged")):(n.skipInvalidate||s&&s.invalidate(),a=t,s=e.loadData(t,n),i||(this.contentElement.innerHTML=s.data),this.emit("contentsUpdated"),this.reposition(),r=s.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement),s.on("update",o),void s.on("data-targetEvent",u))}.bind(this),u=this.emit.bind(this,"data-targetEvent");this.on("show",d),this.on("hide",function(){s&&(s.off("update",o),s.off("data-targetEvent",u),s=void 0)});var h=this.updateContent;this.updateContent=function(e,n){return e?i(e)?(t=e,this.isOpen()&&d(n),this):(t="",h.apply(this,arguments)):(t="",e=this.sourceElement.getAttribute("data-url"),e?this.updateContent(e):h.apply(this,arguments))}}}return n||(n={}),s}return n});
define("overlays/options/centerArrowOnSrcElement",["vanillajs","api-mod"],function(t,i){"use strict";var o=function(t){function o(){if(t=t||this.sourceElement,this.container&&t&&this.arrow){var o=i.getCoords(this.container),r=i.getCoords(t),n=i.hasClass(this.container,"arrow_top")||i.hasClass(this.container,"arrow_bottom");if(n){var s=r.left+r.width/2,e=i.getSize(this.arrow).x/2,a=Math.max(e,Math.min(o.width-e,s-o.left));i.setStyle(this.arrow,{"left":a+"px","right":"auto","margin":"0 0 0 -"+e+"px"})}else{var s=r.top+r.height/2,e=i.getSize(this.arrow).y/2,h=Math.max(e,Math.min(o.height-e,s-o.top));i.setStyle(this.arrow,{"top":h+"px","bottom":"auto","margin":"-"+e+"px 0 0 0"})}}}return function(){this.on("show",i.bind(o,this)),this.on("positionDirty",i.bind(o,this)),this.on("repositionArrow",i.bind(o,this))}};return o});
define("overlays/options/closeOnTargetChildClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(i){return function(){var t,c=n.bind(function(){this.hide("target-child-click")},this);this.on("show",function(){t=n.select(i),t&&n.addEvent(t,"click",c)}).on("hide",function(){t&&n.removeEvent(t,"click",c)})}}});
define("overlays/options/stickyClick",["vanillajs","api-mod","utils/MouseAway"],function(i,n,t){"use strict";var o=!1;return function(){var i=new t(this.sourceElement,this.container);n.addEvent(this.sourceElement,"click",function(){o=!0}),this.on("hide",function(){o=!1,i.off("mouseAway")}),this.on("show",function(){var n=this.hide.bind(this);i.on("mouseAway",function(){o||n("stickyClick")})})}});
define("overlays/position",["vanillajs","api-mod","overlays/utils","ta/Core/TA.Event","overlays/position/base"],function(t,n,e,o,r){"use strict";function i(t,o,i,u){return function(l,a,p,h){var x=r();return x.onPosition=function(){var r=n.getSize(this.arrow)||{x:0,y:0},x=f(l,this.sourceElement),y=x?n.getSize(x):{x:0,y:0},d=x?n.getPosition(x):{left:0,top:0},m=n.getSize(this.domParent),g=e.parseOffsets(s(l)),b=!x||a||c(this.sourceElement),v=e.parseOffsets(h);this.container.style.position=b&&!p?"fixed":"absolute";var T=n.getSize(this.container);x&&x.getAttribute("data-anchorWidth")&&(n.hasClass(document.body,"rtl")?(d.left+=y.x,y.x=Number(x.getAttribute("data-anchorWidth")),d.left-=y.x):y.x=Number(x.getAttribute("data-anchorWidth")));var L=function(t,n,e,o){if("function"==typeof t){var i=Math.floor(t(T,r,y,d,m,b))+n;return this.domParent===document.body&&(i=Math.max(i,e),i=Math.min(i,o)),i+"px"}return"auto"}.bind(this);t&&o&&i&&u&&!p&&(this.container.style.position="fixed");var C=Math.max(Math.min(v.x,(m.x-T.x)/2),0);this.container.style.left=L(t,g.x,C,Math.max(m.x-T.x-C,C)),this.container.style.right=L(i,g.x,C,Math.max(m.x-T.x-C,C)),this.container.style.top=L(o,g.y,-Number.MAX_VALUE,Number.MAX_VALUE),this.container.style.bottom=L(u,g.y,-Number.MAX_VALUE,Number.MAX_VALUE)},x}}function u(t,e){return function(){return function(){function o(){var o=n.getSize(this.container);this.container.style.position="fixed",t&&(n.hasClass(document.body,"rtl")?(this.container.style.right="50%",this.container.style.marginRight=-o.x/2+"px"):(this.container.style.left="50%",this.container.style.marginLeft=-o.x/2+"px")),e&&(this.container.style.top="50%",this.container.style.marginTop=-o.y/2+"px")}this.on("show",o),this.on("positionDirty",o)}}}function l(){return function(){return function(){function t(){n.addClass(this.container,"cssCentered")}this.on("show",t),this.on("positionDirty",t)}}}function f(t,e){return t&&t.length&&isNaN(t[0])?n.isElement(t[0])?t[0]:e&&n.find(t[0],e):e}function s(t){return t&&t.length&&isNaN(t[0])?t.slice(1):t}function c(t){function n(t){return"fixed"===t||"-ms-device-fixed"===t}for(;t;){if(t==document.body)return!1;if(t.style.position)return n(t.style.position);if(t.currentStyle&&n(t.currentStyle.position))return!0;if(window.getComputedStyle&&n(getComputedStyle(t).getPropertyValue("position")))return!0;t=t.parentNode}return!1}var a={};if(a.above=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)}),a.below=i(function(t,e,o,r,i,u){return r.left+o.x/2-t.x/2-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomRight=i(function(t,e,o,r,i,u){return r.left-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.bottomLeft=i(null,function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.left=i(function(t,e,o,r,i,u){return r.left-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.leftTop=i(function(t,e,o,r,i,u){return r.left-t.x-e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.right=i(function(t,e,o,r,i,u){return r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.rightTop=i(function(t,e,o,r,i,u){return r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top-(u?n.scrollTop():0)}),a.on=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.wideside=i(function(t,e,o,r,i,u){return r.left>i.x-r.left-o.x?r.left-t.x-e.x-(u?n.scrollLeft():0):r.left+o.x+e.x-(u?n.scrollLeft():0)},function(t,e,o,r,i,u){return r.top+o.y/2-t.y/2-(u?n.scrollTop():0)}),a.center=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return i.y/2-t.y/2+(u?0:n.scrollTop())}),a.centerBelow=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,e,o,r,i,u){return r.top+o.y+e.y-(u?n.scrollTop():0)}),a.topCenter=i(function(t,n,e,o,r){return r.x/2-t.x/2},function(t,n,e,o,r,i){return 0}),a.topLeft=i(null,function(t,e,o,r,i,u){return r.top-t.y-e.y-(u?n.scrollTop():0)},function(t,e,o,r,i,u){return i.x-(r.left+o.x)+(u?n.scrollLeft():0)}),a.movingCenter=u(!0,!0),a.movingCenterX=u(!0,!1),a.movingCenterY=u(!1,!0),a.cssCentered=l(),a.absolute=i(function(){return 0},function(){return 0}),a.framed=i(function(){return 0},function(){return 0},function(){return 0},function(){return 0}),a.offScreen=i(function(){return-1e4},function(){return-1e4}),a.noop=function(){return function(){}},a.rightEvenInRtl=a.right,a.leftEvenInRtl=a.left,"undefined"!=typeof document&&n.hasClass(document.body,"rtl")){a.left=a.rightEvenInRtl,a.right=a.leftEvenInRtl;var p=a.bottomRight;a.bottomRight=a.bottomLeft,a.bottomLeft=p,p=a.rightTop,a.rightTop=a.leftTop,a.leftTop=p}return a});
define("overlays/styles/modal",["vanillajs","api-mod"],function(e,t){"use strict";function i(e,i,n,s,a){this.container=t.createElement(a||"span",{"class":"ui_overlay ui_modal "+i}),n&&(this.header=t.createElement("div",{"class":"header_text"}),this.header.innerHTML=n,this.container.appendChild(this.header)),s&&(this.subheader=t.createElement("div",{"class":"subheader_text"}),this.subheader.innerHTML=s,this.container.appendChild(this.subheader)),this.inner=t.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner,this.close=t.createElement("div",{"class":"ui_close_x"}),this.container.appendChild(this.close)}var n=function(e,n,s,a,h,d,r){return s=s||e&&e.getAttribute("data-modal")||"",a=a||e&&e.getAttribute("data-header")||"",h=h||e&&e.getAttribute("data-subheader")||"",function(){i.call(this,n,s,a,h,r),this.updateContent(d),t.addEvent(this.close,"click",t.bind(function(){this.hide.apply(this,arguments)},this,"close-button"))}};return n});
define("overlays/styles/popover",["api-mod","lib/jquery-amd","overlays/utils"],function(t,e,a){"use strict";function i(e,i,n){this.container=t.createElement("span",{"class":"ui_overlay ui_popover arrow_"+a.getArrowDir(e,this.sourceElement,this.domParent)+" "+i,"style":n}),this.arrow=t.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.header=t.createElement("div",{"class":"header_text"}),this.container.appendChild(this.header),this.inner=t.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner,this.close=t.createElement("div",{"class":"ui_close_x"}),this.container.appendChild(this.close)}var n=function(n,r,s,o,h){n=e(n),s=s||n.attr("data-popover")||"",o=o||n.attr("data-header")||"",h=h||n.attr("data-content")||"";var d=n.attr("data-style")||"",c=n.attr("data-header-element"),l=n.attr("data-header-copy");return function(){i.call(this,r,s,d),this.updateContent(h),o&&a.injectContent(this.header,n,o,c,l),t.addEvent(this.close,"click",t.bind(function(){this.hide.apply(this,arguments)},this,"close-button"))}};return n});
define("overlays/styles/tooltip",["vanillajs","api-mod","overlays/utils"],function(t,e,i){"use strict";function n(t,n,r){this.container=e.createElement(r||"span",{"class":"ui_overlay ui_tooltip arrow_"+i.getArrowDir(t,this.sourceElement,this.domParent)+" "+n}),this.arrow=e.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.inner=e.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner}var r=function(t,e,i,r,a){return t&&(i=i||t.getAttribute("data-tooltip"),a=a||t.getAttribute("data-elementtype")),function(){n.call(this,e,i,a),this.updateContent(r)}};return r});
define("overlays/styles/windowshade",["api-mod"],function(t){"use strict";var i=function(i,s){return function(){if(this.shade=t.createElement("div",{"class":"ui_backdrop "+(i||"dark"),"onclick":""}),"function"==typeof s){var e=function(){var t=s();this.shade.style.top=t+"px",this.shade.style.position="absolute",this.shade.style.height=document.body.clientHeight-t+"px"}.bind(this);this.on("positionDirty",e),e()}this.on("show",function(){this.domParent.appendChild(this.shade)});var n=this.hide;this.hide=function(){t.inDocument(this.shade)&&this.domParent.removeChild(this.shade),n.apply(this,arguments)}}};return i});
define("overlays/styles/dropdown",["vanillajs","api-mod"],function(t,n){"use strict";function e(t,e,i,o){this.container=n.createElement(o||"span",{"class":"ui_overlay ui_dropdown "+e,"style":i}),this.contentElement=this.container}var i=function(t,n,i,o,r,a){i=i||t.getAttribute("data-dropdown")||"";var s=r||t.getAttribute("style")||"";return function(){e.call(this,n,i,s,a),this.updateContent(o)}};return i});
define("overlays/styles/notification",["vanillajs","api-mod"],function(n,e){"use strict";function i(n,i){this.container=e.createElement("div",{"class":"ui_overlay ui_notification "+n}),this.icon=e.createElement("span",{"class":"ui_icon main_icon "+i}),this.container.appendChild(this.icon),this.close=e.createElement("span",{"class":"ui_icon times close"}),this.container.appendChild(this.close),this.inner=e.createElement("div",{"class":"message"}),this.container.appendChild(this.inner),this.contentElement=this.inner}function t(n){var i=e.find("."+u);i||(i=document.createElement("div"),i.className=u,document.body.appendChild(i)),n.domParent=i,i.appendChild(n.container),o(n),s(n)}function a(n){r(n),o(n),e.addEvent(n.container,"mouseleave",function i(){e.removeEvent(n.container,"mouseleave",i),s(n)}),n.emit("hover")}function o(n){e.removeClass(n.container,"hidden"),n.container.clientHeight,e.removeClass(n.container,"transparent")}function c(n){e.addClass(n.container,"transparent"),r(n),n.__hideTimer=setTimeout(e.bind(l,null,n),m)}function s(n){r(n),n.__transitionOutTimer=setTimeout(c.bind(null,n),h)}function r(n){n.__transitionOutTimer&&clearTimeout(n.__transitionOutTimer),n.__hideTimer&&clearTimeout(n.__hideTimer)}function l(n,e){n.hide(e)}function d(n){n.on("show",e.bind(t,null,n)),e.addEvent(n.container,"click",e.bind(l,null,n,"click")),e.addEvent(n.container,"mouseenter",e.bind(a,null,n))}var u="ui_notification_container",m=2e3,h=1e4,_=function(n,e,t,a){return e=e||n&&n.getAttribute("data-modal")||"",a=a||n&&n.getAttribute("data-icon")||"",function(){i.call(this,e,a),this.updateContent(t),d(this)}};return _});
define("overlays/uiOverlay",["vanillajs","api-mod","utils/responsive"],function(t,e,a){"use strict";function o(t){var e=a[t.getAttribute("data-breakpoint")];return!("function"==typeof e&&!e())}var r={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},i={},s=function(t,a){if(t=t||window.event,a=a||t.target||t.srcElement,o(a)){var s=t&&t.type;s&&e.removePropertyEvent(a,s,"uiOverlay"),t&&e.stopEvent(t);var n,l=(a.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),u=l.shift(),d=["overlays/Overlay","overlays/position"];for(var v in r)if(a.hasAttribute("data-"+v)){u=u||r[v].defaultPosition,d.push("overlays/styles/"+v),n=!0;break}var c=a.getAttribute("data-options")||"";if(!n&&require.defined("ta/util/Error")){var p="uiOverlay: no style. class="+a.className+", id="+a.id;return[].forEach.call(a.attributes,function(t){/^data-/.test(t.name)&&(p+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,p)}d.push(a.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var h=!1;a.hasAttribute("data-defer")&&(h=parseInt(a.getAttribute("data-defer"))),d.push(h?"overlays/options/hoverDelay":null),d.push(a.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),d.push(a.getAttribute("data-url")?"overlays/options/ajax":null),d.push(a.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),d.push(a.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),d.push(a.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),d.push(a.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var f=a.hasAttribute("data-move-padding")||a.hasAttribute("data-move-source");d.push(f?"overlays/options/moveIntoView":null),d.push(a.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),d.push("overlays/options/storeOverlayOnElement"),c&&(d=d.concat(c.split(" ").map(function(t){return"overlays/options/"+t}))),a.hasAttribute("data-tooltip")?"click"===s?d.push("overlays/options/closeOnDocClick"):"mouseover"===s&&c.indexOf("closeOnMouseAway")<0&&d.push("overlays/options/closeOnMouseOut"):a.hasAttribute("data-dropdown")&&("click"===s?(d.push("overlays/options/closeOnDocClick"),d.push("overlays/options/closeOnSourceClick")):"mouseover"===s&&d.push("overlays/options/closeOnMouseAway")),d.push(a.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var y;if(!(a.hasAttribute("data-unique")&&(y=a.getAttribute("data-unique"),y&&y in i))){var b;return a.hasAttribute("data-group")&&(b=a.getAttribute("data-group")),require(d,function(t,n,d,c,p,f,A,g,m,w,O,E){var k=[d(a,u),u&&n[u](l,r[v].defaultFixed),c&&c(a.getAttribute("data-windowshade")),p&&p(h,!0),f&&f(r[v].defaultFade),A&&A(),g&&g(a.getAttribute("data-close-event")),m&&m(a.getAttribute("data-close-ta-event")),w&&w(a.getAttribute("data-maxWidth")),O&&O(a.getAttribute("data-close-child")),E&&E(a.getAttribute("data-move-source"),parseInt(a.getAttribute("data-move-padding"),10))],x=Array.prototype.slice.call(arguments,11),I=new t(a,k.concat(x)),q=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=I&&t.overlay.hide()}),b&&(i[b]||[]).forEach(function(t){t!=I&&t.hide()}),I.show()};if(b){var C=i[b]||[];C.push(I),i[b]=C}if(s&&!h){var F=function(t){o(a)&&(q(),e.stopEvent(t))};e.addEvent(a,s,F),I.on("destroy",function(){e.removeEvent(a,s,F)})}if(y&&(i[y]=I,I.on("destroy",function(){delete i[y]})),!h&&q(),a.hasAttribute("data-callback")){var P=e.fn(a.getAttribute("data-callback"));P&&P(I)}}),!1}var A=i[y];if(A.sourceElement=a,A.updateContent(),!h&&A.show(),a.hasAttribute("data-callback")){var g=e.fn(a.getAttribute("data-callback"));g&&g(A)}}};return s}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
define("utils/HistoryManager",[],function(){"use strict";function t(){function t(){return(new Date).getTime()+""+Math.random()}function i(t){var i=t.state;if(!a&&i&&i.id){var e=i.id,s=n[e];s&&s(i.data)}}var n={},e={},a=!1;this.pushState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.pushState(i,e,a)},this.replaceState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.replaceState(i,e,a)},this.addCallback=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},this.removeCallback=function(t,i){if(e[t]){var n=e[t].indexOf(i);n>=0&&e[t].splice(n,1)}},this.doCallbacks=function(t){e[t]&&e[t].each(function(t){t()})},this.isSupported=function(){return"undefined"!=typeof history&&"pushState"in history},this.disableCallbacks=function(t){a=t},window.addEventListener("popstate",i)}return t});
define("ta/photos/oysterTracking",["vanillajs"],function(t){function n(t){return a.contains(t)}var a=["LB_OPEN","FEATURED_REEL","EOAR_SINGLE","EOAR_HERO","PHOTO_CONTENT_BLOCK","FEATURED_REEL_LR","HERO","ALBUM"];return{trackCandidateSession:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","CANDIDATE_SESSION",E)},trackImpression:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","IMPRESSION",E)},trackInterest:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","INTEREST",E)},trackAction:function(t,a,E){n(E)&&ta.trackEventOnPage("Oyster","ACTION",E)}}});
define("overlays/options/closeOnEmit",["babel/babel-helpers"],function(n){"use strict";return function(n,e,o){return function(){var t=this,i=function(){o&&!o.apply(void 0,arguments)||t.hide("on-event")};this.on("show",function(){return n.on(e,i)}).on("hide",function(){return n.off(e,i)})}}});
define("commerce/offerclickEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("beforeClick","afterClick")});
define("ta/media/viewerScaffold",["api-mod","vanillajs","utils/HistoryManager","utils/objutils","utils/urlutils","ta/photos/oysterTracking","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/styles/windowshade","overlays/options/closeOnEmit","commerce/offerclickEvents","overlays/options/ajax"],function(e,t,a,i,o,r,n,l,s,d,c,u,m){function h(){var e=[];this.register=function(t,a,i,o){i||(o=!0,i=ta);var r=o?"on":"addEvent",n=o?"off":"removeEvent";i[r](t,a),e.push(function(){i[n](t,a)})},this.addCleanup=function(t){e.push(t)},this.cleanup=function(){e.forEach(function(e){e()}),e=[]}}function w(){E&&E.onResize&&E.onResize()}function v(){R.register("resize",w,window),w(),E&&E.onLoad&&E.onLoad();var e=ta.retrieve("oyster_location_data");e&&e.hasOyster&&e.hasOyster[L]&&r.trackCandidateSession(null,null,null,"LB_OPEN"),R.register("mediaViewerEscapePressed",function(){try{k.fireEvent("onClose",k)}catch(e){}k.hide()})}function g(){document.body.addClass("remove-scrolling"),ta.retrieve("checkrates.meta_ui_post_click_prices")&&ta.retrieve("meta.baseLocationId")&&ta.meta.update&&ta.commerce.meta.updateProvAreaFromLightBox(ta.retrieve("meta.baseLocationId")),E&&E.onShow&&E.onShow(),I&&(ta.retrieve("tabletRacOnPhotoViewer")&&(ta.remove("RASCalendar"),ta.restaurantAvailabilitySearch&&(M=ta.restaurantAvailabilitySearch.getContainerSelector())),ta.find(".albumLightbox .ui_close_x").addClass("svgico")),ta.fireEvent("refreshedDOMContent",k.container)}function f(){k.container.removeClass("loaded"),ta.fireEvent("mediaViewerLightboxHide"),document.body.removeClass("remove-scrolling"),E&&E.onClose&&E.onClose(),ta.remove("meta.requestFromArea");var e=ta.retrieve("metaCheckRatesOverlay");e&&(e.hide(),ta.remove("metaCheckRatesOverlay")),ta.meta.linkTracking&&ta.meta.linkTracking.restoreCRPageServlet(),ta.retrieve("photo.viewer.refreshOnClose")&&(window.location=window.location),ta.has("translationOverlay")&&ta.retrieve("translationOverlay").hide(),ta.retrieve("hotels.redesignEnabled")&&ta.retrieve("hotels.datesChanged")&&ta.isMetaHotelsRequest&&ta.isMetaHotelsRequest()?(ta.commerce.minimeta.doMetaDateSearch(),ta.remove("hotels.datesChanged")):ta.retrieve("hotels.redesignEnabled")&&ta.retrieve("hotels.datesChanged")&&(ta.commerce.minimeta.ajax.resetAjaxCall(),ta.commerce.minimeta.ajax.send(!1,!0),ta.remove("hotels.datesChanged")),ta.widgets.calendar.closeCalendarWidgets(),R.cleanup(),I&&ta.retrieve("tabletRacOnPhotoViewer")&&(ta.remove("RASCalendar"),ta.restaurantAvailabilitySearch&&ta.restaurantAvailabilitySearch.setContainerSelector(M)),E&&E.onHide&&E.onHide(),ta.fireEvent("photoLightBoxHidden")}function b(e){ta.store("media.albums.loadOnEvent",!0),R.register("show",g,k,!0),R.register("hide",f,k,!0),v(),g(),ta.has("albumViewer.historyEnabled")&&A(e),setTimeout(function(){ta.fireEvent("mediaViewerDOMLoaded"),ta.prwidgets&&ta.prwidgets.initWidgets(k.container)},1)}function p(e){var t=e;t.heroMinWidth=window.innerWidth-2*_,t.heroMinHeight=window.innerHeight-2*_,t.albumid=e.albumId,e.albumViewMode||((e.ff||e.imageId)&&(t.ff=e.ff||e.imageId,t.albumid=101,t.albumViewMode="hero",t.albumPartialsToUpdate="full",t.thumbnailMinWidth=50,t.cnt=30,t.offset=-5,t.baseMediaId=t.ff,t.extraAlbumCoverCount=2),e.albumId&&(t.albumViewMode="images",t.albumPartialsToUpdate="full",t.extraAlbumCoverCount=4));var a="QC_Meta_Mini|Photo_Lightbox";t.area=a,window.pageServlet&&i.extend(t,{metaReferer:window.pageServlet});var r="/LocationPhotoAlbum?"+o.toQueryString(t),n=r;if(ta&&ta.commerce&&ta.commerce.meta&&ta.commerce.meta.tracking)try{ta.commerce.meta.tracking.resetTimingLockForNavArea(a),r=ta.commerce.meta.tracking.updateUrlWithTiming(r,a)}catch(e){ta.util.error.record(e,"problem updating url with timing in viewerScaffold"),r=n}return r}function C(e,t){var a=window.location.hash;if(a.indexOf(T)>=0){var i=y();i?(!i.detail&&window.modelLocId&&(i.detail=window.modelLocId),!i.geo&&window.modelGeoId&&(i.geo=window.modelGeoId),S(i,!0)):S({detail:e,geo:t},!0)}}function y(){var e=window.location.hash,t=e.indexOf(H)>=0&&e.substring(e.indexOf(H)+H.length,e.length);return t&&t.length>0?t.parseQueryString(!1,!1):null}function A(t){var i=new a;if(i.isSupported()){if(t){var o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.replaceState(null,null,o)}R.register("albumViewerPushState",i.pushState),R.register("albumViewerReplaceState",i.replaceState);var r=!1;R.register("mediaViewerLightboxHide",function(){window.location.hash.indexOf(T)>=0&&(r=!0,i.disableCallbacks(!0),history.back())}),e.addEvent(window,"popstate",function(){window.location.hash.indexOf(T)>=0?r?history.back():k.show():(r=!1,i.disableCallbacks(!1),k.hide())})}}function S(e,t){if(!e.geo||!e.detail)return ta.util.error.record(null,"viewerScaffold.js:load missing required arguments"),!1;E=e.evtDelegates,e.evtDelegates=null,L=e.detail,O=e.geo;var a="dark mediaAlbumsBackdrop",i="albumLightbox",o=s.framed([0,0]),r=[ta.isTabletAlbumViewer&&ta.isTabletAlbumViewer()&&window.getCssAlbumPhotoLBIconAsset&&window.getCssAlbumPhotoLBIconAsset(),window.cssAlbumViewerAssetHotels,window.cssPhotoLightboxAsset,window.cssAlbumViewerExtendedAsset,window.hrExtraCssLightboxAsset,window.jsAlbumViewerExtendedAsset,window.g_jqueryFiles];if(k)k.updateContent(p(e));else{var h=0,w=setInterval(function(){ta.trackEventOnPage("Photo_LB","slow_load",30*++h,navigator.userAgent)},3e4);k=new n(document.body,l(null,"",i),o,d(a),c(u,"beforeClick",function(e){return e.isBooking}),m(p(e),{resources:r,noCache:!0})),k.on("contentLoaded",function(){clearInterval(w),b(t)}).on("hide",clearInterval.bind(null,w)),k.on("data-targetEvent",ta.fireEvent.bind(ta))}P||(V=Date.now(),P=!0),k.show()}function x(){return V?Date.now()-V:null}var k,E,L,O,V,P=!1;if(ta.isTabletAlbumViewer)var I=ta.isTabletAlbumViewer();var M,_=I?0:20,R=new h,T="#photos",H=T+";";return{getTimeSincePhotoviewerFirstOpened:x,load:S,handleFragment:C,parseFragment:y}});
/*
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
define("lib/jquery/jquery.hoverIntent",["lib/jquery-amd"],function(d){var h={interval:100,sensitivity:6,timeout:0};var i=0;var g,f;var b=function(j){g=j.pageX;f=j.pageY};var a=function(m,k,l,j){if(Math.sqrt((l.pX-g)*(l.pX-g)+(l.pY-f)*(l.pY-f))<j.sensitivity){k.off(l.event,b);delete l.timeoutId;l.isActive=true;m.pageX=g;m.pageY=f;delete l.pX;delete l.pY;return j.over.apply(k[0],[m])}else{l.pX=g;l.pY=f;l.timeoutId=setTimeout(function(){a(m,k,l,j)},j.interval)}};var e=function(m,k,l,j){delete k.data("hoverIntent")[l.id];return j.apply(k[0],[m])};return function c(n,o,j){var m=i++;var l=d.extend({},h);if(d.isPlainObject(n)){l=d.extend(l,n);if(!d.isFunction(l.out)){l.out=l.over}}else{if(d.isFunction(o)){l=d.extend(l,{over:n,out:o,selector:j})}else{l=d.extend(l,{over:n,out:n,selector:o})}}var k=function(u){var s=d.extend({},u);var q=d(this);var p=q.data("hoverIntent");if(!p){q.data("hoverIntent",(p={}))}var t=p[m];if(!t){p[m]=t={id:m}}if(t.timeoutId){t.timeoutId=clearTimeout(t.timeoutId)}var r=t.event="mousemove.hoverIntent.hoverIntent"+m;if(u.type==="mouseenter"){if(t.isActive){return}t.pX=s.pageX;t.pY=s.pageY;q.off(r,b).on(r,b);t.timeoutId=setTimeout(function(){a(s,q,t,l)},l.interval)}else{if(!t.isActive){return}q.off(r,b);t.timeoutId=setTimeout(function(){e(s,q,t,l.out)},l.timeout)}};return this.on({"mouseenter.hoverIntent":k,"mouseleave.hoverIntent":k},l.selector)}});
define("ta/util/Element",["lib/jquery-amd","utils/ajax","ta/Core/TA.Record","ns-exporter","ta/Core/TA.Event","lib/jquery/jquery.hoverIntent","utils/throttle"],function(t,e,i,n,o,r,a){function l(e,i){var n=e.style.fontSize||t(e).css("font-size"),o=n.replace(/[\d\.]/g,""),r=c(o,parseFloat(n)*i);e.style.fontSize=r+o}function s(){function e(e,i){var r=n[e],a=t(r.e);if(a.length>0){var l=r.inView;r.inView=!1,a.each(function(){return!r.inView&&void(r.inView=o.inViewport(this,i,r.persistentElmt,r.offset))}),!l&&r.inView&&(r.cb&&r.cb(r.e),r.multiple||n.splice(e,1))}}function i(){var e=t(window),i={};return i.top=e.scrollTop(),i.left=e.scrollLeft(),i.bottom=i.top+e.height(),i.right=i.left+e.width(),i}var n=[],o=this;this.add=function(i){n.push(i),e(n.length-1),n.length>0&&t(window).on("resize scroll",r)},this.inViewport=function(e,n,o,r){if(e=t(e),!e.is(":visible"))return!1;if(r=t.extend({top:0,left:0,right:0,bottom:0},r),o){var a=o.offsetHeight;a&&(0==o.offsetTop?r.bottom-=a:r.top+=a)}var l=e.offset();return n||(n=i()),n.bottom>=Math.max(l.top+r.top,0)&&n.right>=Math.max(l.left+r.left,0)&&n.top<=Math.max(l.top+e.height()+r.bottom,0)&&n.left<=Math.max(l.left+e.width()+r.right,0)};var r=a(function(){if(n.length){for(var o=i(),a=n.length-1;a>=0;a--)e(a,o);0==n.length&&t(window).off("resize scroll",r)}},300);t(window).on("load",r)}var f={};f.replaceContent=function(i,n,o,r){if(n=t(n),!n.find(".progresstab")){var a=o+(o.indexOf("?")==-1?"?":"&")+"xhr=true";n.append('<div class="progresstab"></div>'),e({url:a,success:function(t){n.html(t),window.behavior&&window.behavior.apply(n),r&&r(n.get(0))},evalScripts:!0}).get()}},f.spinner=function(e,i){t(i).parents(".spinnerReplaceable").children().each(function(t,e){e.toggle(e.hasClass("spinner"))})},f.limitLength=function(t,e,i){return!(e.value.length>=i)||(e.value=e.value.substr(0,i),!1)},f.updateValue=function(e,i){if(e=t(e),e.length>0&&e.val()!=i){e.val(i);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!1),e[0].dispatchEvent(n)}},f.keepInWindow=function(e,i){function n(t,e){var i=parseInt(t.get(0).style[e]);return i||0===i}if(e){e=t(e),i||(i={top:!0,right:!0,bottom:!0,left:!0});var o=2,r=e.offset();r.right=r.left+e.width(),r.bottom=r.top+e.height();var a=t(window),l=a.width(),s=a.height(),f=a.scrollTop(),c=a.scrollLeft();i.right&&n(e,"right")?r.left<c+o?e.css("right",l+c-e.width()-o):r.right>l-c-o&&e.css("right",o):i.left&&n(e,"left")&&(r.left<c+o?e.css("left",o):r.right>l-c-o&&e.setStyle("left",l+c-r.width-o)),i.bottom&&n(e,"bottom")?r.top<f+o?e.setStyle("bottom",s+f-r.height-o):r.bottom>s-f-o&&e.setStyle("bottom",o):i.top&&n(e,"top")&&(r.top<f+o?e.setStyle("top",o):r.bottom>s-f-o&&e.setStyle("top",s+f-r.height-o))}};var c=function(t,e){var i=e;return"px"==t?i=8:"em"==t?i=.5:"pt"==t?i=6:"%"==t&&(i=50),Math.max(e,i)};f.makeTextFit=function(e,i,n,r,a){a=a||1,r=r||8;var l=!1;if(t(e).each(function(e,o){o=t(o);var a=o.find(i);if(a){var s;if("number"==typeof n)s=n;else if(s=o.find(n).outerHeight(),void 0===s)return;var f=a.height();if(s<f){var c=a.css("font-size");if(c){var u=function(t,e){return"px"==e&&t>=r||"em"==e&&t>=.5||"pt"==e&&t>6||"%"==e&&t>=50},h=c.replace(/[\d\.]/g,""),d=parseFloat(c)*Math.sqrt(s/f);"px"==h&&(d=Math.max(parseInt(d),r)),u(d,h)&&(a.css("font-size",d+h),l=!0)}}}}),l>0&&a<4){o.fireEvent("makeTextFitResizedText");var s=this;setTimeout(function(){s.makeTextFit(e,i,n,r,a+1)},1)}},function(){function e(t){var e=!1;if(!t||t.clientWidth&&t.clientWidth<=0)return!1;for(var i=t.clientWidth,n=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),o=0;o<a&&t.scrollWidth>i;o++){var r=(i-n)/(t.scrollWidth-n);l(t,r),e=!0}return t.scrollWidth>i&&(l(t,s),e=!0),e}function i(t,e){var i=t.getAttribute("data-sizegroup"),n=parseFloat(t.style.fontSize);i&&(e[i]=Math.min(e[i]||Number.MAX_VALUE,n))}function n(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],o=[];n.forEach(function(t){o.push([t.scrollWidth,t])}),o.sort(function(t,e){return e[0]-t[0]});for(var r=0;r<o.length&&e(o[r][1]);r++);}}function r(t){var i;for(var n in t)t.hasOwnProperty(n)&&(i={},t[n].forEach(function(t){var n=t.innerHTML,o=i[n];void 0!==o?0!=o&&(t.style.fontSize=o):e(t)?i[n]=t.style.fontSize||0:i[n]=0}))}var a=4,s=.9;f.makeTextFitOneLine=function(i,n){var o=t(i);if(o.each(function(t,i){e(i)}),n){var r;o.each(function(e,i){var n=t(i).css("font-size");(!r||parseFloat(n)<parseFloat(r))&&(r=n)}),r&&o.css("font-size",r)}},f.autoResizeTextInNode=function(o){o=t(o);var a=t(".autoResize",o),l={},s={width:{},text:{}};a.filter(":visible").removeClass("autoResize").each(function(t,n){var o,r,a=n.getAttribute("data-resizeWidthGroup"),f=n.getAttribute("data-resizeTextGroup");a?(o=s.width,r=a):f&&(o=s.text,r=f),o?(o[r]||(o[r]=[]),o[r].push(n)):(e(n),i(n,l))}),n(s.width),r(s.text),a.each(function(t,e){var i=e.getAttribute("data-sizegroup");i&&(e.style.fontSize=l[i]+"px")})},o.queueForLoad(function(){require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("no-old-resize")||(o.on("refreshedDOMContent",function(t){f.autoResizeTextInNode(t)}),document.body&&f.autoResizeTextInNode(document.body))},"autoResize all targets on load")}(),f.makeSameWidth=function(e){var i=0;t(e).each(function(t,e){var n=Math.round(parseFloat(e.style.width));n&&n>i&&(i=n)}).css("width",i)},f.fitToContentsHorizontally=function(e,i,n,o){if(o=o||1,!(o<=0||i>n)){var r=function(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight};t(e).each(function(t,e){e.style.width=i;for(var a=i;a<n&&r(e);a+=o)e.style.width=a;r(e)&&(e.style.width=n)})}},f.scrollIntoView=function(e,i,n,o){if(e){e=t(e);var r=e.offset().top+(i||0);if(n){for(var a=t("html, body"),l=e.parent(),s=function(t){return("auto"===t.css("overflow-y")||"scroll"===t.css("overflow-y"))&&t[0].scrollHeight>t[0].clientHeight};l.length&&!l.is(a)&&!s(l);)l=l.parent();l.length&&!l.is(a)&&s(l)?r=l.offset().top+l.scrollTop()+(i||0):l=a,l.animate({scrollTop:r},{duration:300,complete:function(){o&&o()}})}else window.scrollTo(0,r),o&&o()}};var u=f.scrollTrackers=new s;return f.isScrolledIntoView=function(t,e,i){return u.inViewport(t,null,e,i)},f.doIfElementIsVisible=function(t,e,i,n){t&&u.add({e:t,cb:function(){return e.apply(null,i),!0},offset:n})},f.trackWhenScrolledIntoView=function(t,e,n){if(t&&e){var o=function(){i.trackEventOnPage.apply(i,e)};u.add({e:t,cb:o,multiple:n})}},f.getTotalWidth=function(e){return t(e).outerWidth(!0)||0},f.getTotalHeight=function(e){return t(e).outerHeight(!0)||0},f.hoverIntent=function(e,i){r.bind(t(e),i)()},n.exportTo(f,"ta.util.element"),f});
define("overlays/styles/default",["lib/jquery-amd"],function(t){"use strict";function e(e,a,i,s){this.container=t("<"+(s||"div")+"/>").addClass("ui_overlay").addClass(e||"").get(0),a&&(this.header=t("<div/>",{"class":"header_text"}).html(a).appendTo(this.container).get(0)),i&&(this.subheader=t("<div/>").addClass("subheader_text").html(i).appendTo(this.container).get(0)),this.contentElement=t("<div/>").addClass("body_text").appendTo(this.container).get(0),this.close=t("<div/>").addClass("ui_close_x").appendTo(this.container).get(0)}var a=function(a,i,s,n,d,o){return i=(i||"")+(a&&" "+a.getAttribute("data-overlay")||""),s=s||a&&a.getAttribute("data-header")||"",n=n||a&&a.getAttribute("data-subheader")||"",function(){e.call(this,i,s,n,o),this.updateContent(d),t(this.close).on("click",function(){this.hide.apply(this,arguments.length?arguments:["close-button"])}.bind(this))}};return a});
define("overlays/position/conditional",["overlays/position/base"],function(o){"use strict";return function(i,n,t){var s=o();s.label="conditional";var f;return s.onPosition=function(){var o=i()?n:t;f&&o!==f&&f.offPosition&&f.offPosition.apply(this),(f=o).onPosition&&f.onPosition.apply(this)},s.offPosition=function(){f=null;var o=i()?n:t;o.offPosition&&o.offPosition.apply(this)},s}});
define("overlays/options/disableBodyScroll",["babel/babel-helpers","utils/browserutils"],function(o,e){"use strict";return function(o){return function(){var t=this,s={},n=function(o){var e=document.querySelector(".layered_overlay");t.container===o.target||t.container.contains(o.target)||o.target===e||e&&e.contains(o.target)||o.preventDefault()};this.on("show",function(){document.body.classList.contains("disableScroll")||("ios"===e.Platform.name&&(o||(s.scrollPos=window.pageYOffset||document.documentElement.scrollTop,s.prevTop=document.body.style.top,document.body.style.top="-"+s.scrollPos+"px"),document.body.classList.add("iOS11bug")),document.body.classList.add("disableScroll"),document.body.addEventListener("touchmove",n,{passive:!1}))}),this.on("hide",function(){document.body.removeEventListener("touchmove",n,{passive:!1}),document.body.classList.contains("disableScroll")&&("ios"===e.Platform.name&&(document.body.classList.remove("iOS11bug"),o||(window.scrollTo(0,s.scrollPos),document.body.style.top=s.prevTop)),document.body.classList.remove("disableScroll"))})}}});
define("overlays/position/fullscreen",["lib/jquery-amd","overlays/position/base","overlays/options/disableBodyScroll"],function(o,i,t){"use strict";return function(n){function s(){e.call(this),l.call(this)}var e=i(),l=t(n);return s.onPosition=e.onPosition=function(){o(this.container).css({position:"fixed",top:0,left:0,bottom:0,right:0,height:"auto",width:"auto"}).addClass("fullscreen")},s.offPosition=e.offPosition=function(){o(this.container).removeClass("fullscreen")},s}});
define("overlays/position/center",["lib/jquery-amd","overlays/position/base"],function(t,n){"use strict";return function(){var e=n();return e.onPosition=function(){var n=document.documentElement.clientWidth,e=document.documentElement.clientHeight,i={position:"fixed",left:(n-this.container.clientWidth)/2,top:(e-this.container.clientHeight)/2,right:"auto",bottom:"auto"};t(this.container).css(i)},e}});
define("overlays/position/autosize",["lib/jquery-amd"],function(t,i){"use strict";function e(){if(document.clientWidth)return{w:document.clientWidth,h:document.clientHeight};var t=document.documentElement||document.body.parentNode;if(t&&t.clientWidth)return{w:t.clientWidth,h:t.clientHeight};var i=document.body,e=Math.max(t.clientWidth,i.clientWidth),n=Math.max(t.clientHeight,i.clientHeight);return e>self.innerWidth||n>self.innerHeight?{w:i.clientWidth,h:i.clientHeight}:{w:e,h:n}}return function(n){n===i&&(n=0);var o="function"==typeof n?n:function(){return n};return function(){var i=!1,n=!1,h=function(){if(n=!1,i){var h=t(this.container).find(".autosize")[0]||this.contentElement;if(!h.style.maxHeight){h.style.height&&(h.style.height="");var c=!1;(this.container.style.top&&this.container.style.bottom||this.container.style.height||this.container.style.maxHeight)&&(c=!0,this.container.style.bottom="auto",this.container.style.height="auto");var s=e().h-2*o(),r=this.container.clientHeight,l=h.clientHeight;r>s&&(c=!0,h.style.height=l+s-r+"px",h.style.overflow="auto"),c&&this.emit("positionDirty")}}}.bind(this),c=function(){i&&!n&&(n=!0,setTimeout(h,0))};this.on("show",function(){i=!0,t(window).on("resize",c),this.on("contentsUpdated",h),h()}.bind(this)).on("hide",function(){i=!1,t(window).off("resize",c),this.off("contentsUpdated",h)}.bind(this))}}});
define("overlays/options/closeOnBackButton",[],function(){"use strict";var n,o;return function(h){return history&&"onhashchange"in window?function(){this.on("show",function(){n=window.onhashchange;var i=this;window.onhashchange=function(n){location.hash===o&&i&&i.hide()},o=location.hash,location.hash=o+"#"+h}).on("hide",function(){window.onhashchange=n,location.hash===o+"#"+h&&history.back(),o=null})}:function(){}}});
define("pages/inappropriate_vote_stub",["ta","ta/util/Element","ta/Core/TA.Store","vanillajs","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/closeOnEscape","overlays/position/autosize","overlays/options/autoReposition","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnBackButton","overlays/styles/windowshade","overlays/options/ajax"],function(e,o,t,n,i,s,r,a,l,p,d,u,c,w,v,y,m){"use strict";function _(e){o.isScrolledIntoView(e.elmt)||o.scrollIntoView(e.elmt),window.JS_SECURITY_TOKEN=e.token||window.JS_SECURITY_TOKEN,!window.JS_SECURITY_TOKEN&&window.ta.m&&window.ta.m.secureToken&&(window.JS_SECURITY_TOKEN=window.ta.m.secureToken);var n="/ReportIAP?token="+window.JS_SECURITY_TOKEN+"&step=START&voteContentType="+e.voteContentType;n+=e.owner?"&action=explain&reason=21&reviewid="+e.reviewid+"&isGeo="+e.isGeo+"&locationid="+e.locationid:"&action=reportIAP&contentId="+e.contentId,E?(E.updateContent(n),E.sourceElement=e.elmt,require("pages/inappropriate_vote").updateContentId(e.contentId),E.show()):require(["trjs!inappropriate_vote_dlg"],function(){E=new i(e.elmt,[s(e.elmt,"iapFlyout ui_modal"),r(a.mobile,l(),p()),d,u(0),c,y("light"),w,v("ReportProblem"),m(n,{})]),E.on("contentLoaded",function(){E.sourceElement.getAttribute("data-owner")||require("pages/inappropriate_vote").initUI(E,E.sourceElement)}),E.show(),t.store("iapFlyout",E)})}var E,T={};return T.open=function(e,o,t){t.elmt=t.elmt||o;var n={flow:"CORE_COMBINED",pid:t.reg_pid||39841,userRequestedForce:!0,loggedInBypass:!0,onSuccess:_.bind(null,t)};require(["trjs!ta/registration/RegOverlay"],function(e){e.show({type:"dummy"},t.elmt,n)})},T});
define("ta/registration/RegEvents",["mixins/Events"],function(e){return new e("success")});
define("widget/saves",["page-model","ta/registration/RegEvents","utils/to-array","ajax-request"],function(t,e,a,r){"use strict";function n(e,n,d){var c;if(3===arguments.length)return c=a(document.querySelectorAll('.saves-widget-button[data-id="'+e+'"][data-type="'+n+'"]')),void c.forEach(function(t){s(t,d)});if(t.session.loggedIn){c=a(document.querySelectorAll(".saves-widget-button"));var o=[];c.forEach(function(t){o.push({reference_type:t.getAttribute("data-type"),reference_id:t.getAttribute("data-id"),reference_uid:t.getAttribute("data-id")})}),0!==o.length&&r({"url":"/data/1.0/trips/references","type":"POST","data":JSON.stringify({data:o}),"content-type":"application/json","x-requested-by":t.JS_SECURITY_TOKEN}).then(i.bind(null,c))}}function i(t,e){var a={};JSON.parse(e).data.forEach(function(t){a[t.reference_type]||(a[t.reference_type]=[]),a[t.reference_type].push(t.reference_id)}),t.forEach(function(t){var e=t.getAttribute("data-type"),r=t.getAttribute("data-id"),n=!!(a[e]&&a[e].indexOf(+r)>=0);s(t,n)})}function d(t,e){return t.classList.contains(e)?t:t.querySelector("."+e)}function s(t,e){var a=(t.getAttribute("data-type"),t.getAttribute("data-id"),t.getAttribute("data-icon-class")),r=t.getAttribute("data-text"),n=t.getAttribute("data-text-saved"),i=d(t,"saves-icon-locator");if(i&&(e?(i.classList.remove(a),i.classList.add(a+"-fill")):(i.classList.add(a),i.classList.remove(a+"-fill"))),r&&n){var s=d(t,"saves-text-locator");s&&(s.innerText=e?n:r)}}function c(){o||(e.on("success",n),"complete"===document.readyState||"interactive"===document.readyState||"loaded"===document.readyState?n():document.addEventListener("DOMContentLoaded",n),o=!0)}var o=!1;return c(),{init:c,updateSaveButtonsStatus:n}});
ta.servlet.Attractions.narrow={BOOK_ONLINE_SORT_OPTION_ID:"bookonline_sort_option",CTA_ID:"ANIMATED_ATTRACTION_BOOKING_CTA",SORT_OPTIONS_WRAPPER_ID:"ATTRACTION_SORT_WRAPPER",CTA_ANIMATION_START_OFFSET:160,indirectNavToBookable:!1,hasScrolledBeyondShelf5:!1,hasScrolledBeyondShelf10:!1,hasScrolledBeyondAllShelves:!1,slideOut:function(t,e){t.preventDefault();var n=e.getParent(".filter").getSiblings(".collapse")[0];return n.removeClass("collapsed"),e.getSiblings(".show").removeClass("hidden"),e.addClass("hidden"),!1},slideIn:function(t,e,n){t.preventDefault();var r=e.getParent(".filter").getSiblings(".collapse")[0];return r.addClass("collapsed"),ta.util.element.scrollIntoView(n),e.getSiblings(".show").removeClass("hidden"),e.addClass("hidden"),!1},initCgy:function(t){ta.servlet.Attractions.selectedCategories=[t],ta.store("page.attractions.category",t)},initTypes:function(t){if(ta.servlet.Attractions.selectedTypes=[],t)for(var e=t.split(","),n=0;n<e.length;n++)ta.servlet.Attractions.selectedTypes.push(parseInt(e[n]))},changeSort:function(t,e,n,r){new Event(t).preventDefault(),"object"==typeof n&&Object.merge(ta.servlet.Attractions,n),ta.servlet.Attractions.makeRequest(null,null,[0,r],!0)},updateHeaders:function(t,e,n){var r=document.getElement("#HEAD h1"),a=document.getElementById("HEADING");document.title=t,r&&r.setContent(e),n&&a.setContent(n)},setEvtCookieWrapper:function(t,e,n,r,a){return!!a&&(a=require("utils/urlDecoder").decodeUrl(a),void ta.trackEventOnPage(t,e,n,r,a))},ajaxifyLink:function(t,e){new Event(t).preventDefault();var n=e.getAttribute("data-params");if(!n)return!1;var r=document.getElementById("ttd_rl_field");return"undefined"!=typeof r&&r&&(r.value=n),decUrl=n,!!(n=require("utils/urlDecoder").decodeUrl(n))&&(ta.has("attractions.useStaticUrl")&&window.history&&window.history.pushState&&history.pushState({"stateTag":!0,"url":n,"decUrl":decUrl},"",n),n.indexOf("-jbookable-")>0&&(ta.servlet.Attractions.narrow.indirectNavToBookable=!0),ta.servlet.Attractions.narrow._updateDocumentWithUrl(n),!1)},setPopStateListner:function(){window.history&&window.history.pushState&&(window.onpopstate=function(t){var e=window.location.href;if(history.state&&history.state.stateTag||t.state){var n="";t.state&&(t.state.url&&(e=t.state.url),t.state.decUrl&&(n=t.state.decUrl));var r=document.getElementById("ttd_rl_field");"undefined"!=typeof r&&r&&(r.value=n),ta.servlet.Attractions.narrow._updateDocumentWithUrl(e)}})},registerScrollListener:function(){window.addEvent("onAttractionFilterChange",function(){$$&&$$("body").scrollTo("#TtD")})},updateFiltersOnBack:function(){var t=document.getElementById("ttd_rl_field");if("undefined"!=typeof t&&t&&"undefined"!=typeof t.value&&t.value){var e=require("utils/urlDecoder").decodeUrl(t.value);e&&ta.servlet.Attractions.narrow._updateDocumentWithUrl(e)}},_updateDocumentWithUrl:function(t){if(!t)return!1;var e=t.substring(t.indexOf("-g"));return ta.servlet.Attractions.getFilterWaitOverlay().show(),new Request({url:"/AttractionsAjax"+e,method:"get",onSuccess:ta.servlet.Attractions.updatePage,evalScripts:!0}).send(),!0},loadAnimatedCTA:function(){var t=ta.servlet.Attractions.narrow,e=document.getElementById(t.BOOK_ONLINE_SORT_OPTION_ID),n=document.getElementById(t.CTA_ID),r=document.getElementById(t.SORT_OPTIONS_WRAPPER_ID),a=ta.servlet.Attractions.isCurrentSortBookable(),o=document.getElementById("attraction_booking_cta_msg"),i=document.getElementById("attraction_booking_indirect_cta_msg"),l=(!a||a&&t.indirectNavToBookable)&&e&&n&&r;if(l){o&&i&&(t.indirectNavToBookable?(o.hide(),i.show()):(o.show(),i.hide()));var s=ta.util.i18n.isRtl()?"right":"left",d=r.getSize().x,c=r.getSize().x+t.CTA_ANIMATION_START_OFFSET,u=new Fx.Morph(n,{duration:"short",transition:"linear",display:"inline-block"}),v={};v.opacity=[0,1],v[s]=[c,d],u.start(v),n.show(),ta.servlet.Attractions.narrow.indirectNavToBookable=!1}},travelGuideOverlay:function(t,e){var n=ta.util.debounce(function(){ta.trackEventOnPage("As_Featured_In_Guide","Hover_Over","PopUpWindow")},1e3);n(),t=t||window.event,t&&new Event(t).stop();var r=document.getElementById(e);r.onmouseover=n;var a="attraction_overlay";new ta.overlays.RelativeOverlayAbove({activate:ta.overlays.ACTIVATE_HOVER,showArrow:!0,arrowClass:"arrow",style:a,waitForCss:!0,centered:!0},r)},loadTGTargetBlank:function(){"use strict";ta.select(".travelguide_target_blank a").setProperty("target","_blank")},initShelfListeners:function(t){var e=require("shelves/shelfEventHandlers");e.initScrollEvent(),e.initSeeAllTracking(),e.initSeeAnItemTracking(),e.initSeeAllEventHandlers(ta.servlet.Attractions.narrow.handleShelfClickEvent),e.initSeeAnItemEventHandlers(ta.servlet.Attractions.narrow.handleShelfItemClickEvent)},handleShelfClickEvent:function(t,e){var n=e.getAttribute("data-params"),r=require("utils/urlDecoder").decodeUrl(n);r.contains("/Attractions-")?ta.servlet.Attractions.narrow.ajaxifyLink(t,e):window.open(r,"_blank")},handleShelfItemClickEvent:function(t,e){var n=require("utils/urlDecoder").getUrl(e);n.contains("/Attractions-")?ta.servlet.Attractions.narrow.ajaxifyLink(t,e):window.open(n,"_blank")},trackEvent:function(t,e,n){ta.trackEventOnPage(t,e,n)},trackAndAjax:function(t,e,n,r){return ta.trackEventOnPage(e,n,r),ta.servlet.Attractions.narrow.ajaxifyLink(t,t.currentTarget),t.stopPropagation(),!1},initWidgets:function(){var t=document.getElementById("AL_LIST_CONTAINER");t&&ta.prwidgets.initWidgets(t)}};
require(["ta/rollupAmdShim"],function(a){a.install(["utils/urlDecoder","utils/debounce","servlets/attractionsnarrow","shelves/shelfEventHandlers","vanillajs","api-mod","ta/Core/TA.Event","calendars/CalendarDate","lib/jquery-amd","common/Radio","ta/Core/TA.Store","common/trackingStreams","utils/throttle","utils/responsive","utils/ResponsiveEvents","hotels/HotelsRadioHelper","mixins/page-dates/default-dates","common/DatePicker","utils/domEventUtils","mixins/page-dates/picker-autoadvance-attractions","common/PersistentBar","responsive/text-resizer","ta/prwidgets","shelves/shelfEventHandlers","mobile/lite/image-loader","utils/urlDecoder","ta/Core/TA.Record","utils/ellipsis"],["ta","page-model","ta","ta","ta","ta","ta","ta","ta","ta/page","ta-i18n","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"ta-attractions-narrow-en_IN",files:{js3_secure:{ssl:{ta:{util:{Deferred:1},Core:{"TA.Record":1}}}},"js-amd":{src:{mixins:{"page-dates":{"default-dates":1,Responsive:1,"pop-calendar":1,Utils:1,"picker-autoadvance-utils":1,DateEvents:1,"picker-autoadvance-attractions":1,Base:1,Validator:1,DateTypeStore:1},"attraction-traveler-info":{UpdateAttractionsTravelerInfo:1}},common:{trackingStreams:1,"pixels-loader":1,PersistentBar:1,DatePicker:1},calendars:{CalendarDate:1},utils:{throttle:1,domUtils:1,onClickOrFocus:1,urlDecoder:1,responsive:1,classnameUtils:1,ResponsiveEvents:1,ellipsis:1,domEventUtils:1},"api-mod":1,mobile:{lite:{"image-loader":1}},servlets:{attractionsnarrow:1},shelves:{shelfEventHandlers:1},vanillajs:1}},js3:{lib:{"jquery-amd":1},build:{es6:{src:{common:{Radio:1},hotels:{HotelsRadioHelper:1},utils:{debounce:1},responsive:{"text-resizer":1}}}},src:{ta:{util:{Date:1},prwidgets:1,Core:{"TA.Event":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("utils/debounce",["babel/babel-helpers","ns-exporter"],function(e,n){var t=function(e,n,t){var u=null;return function(){var l=this,r=arguments,o=function(){u=null,!t&&e.apply(l,r)};t&&null===u&&e.apply(l,r),clearTimeout(u),u=setTimeout(o,n)}};return n.exportTo({debounce:t},"ta.util"),t});
define("mixins/page-dates/DateEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("dateSelected","calendarOpened")});
define("calendars/CalendarDate",["vanillajs"],function(t){"use strict";function n(t){t=t||new Date,this.date=new Date(t.getFullYear(),t.getMonth(),t.getDate())}return n.prototype={constructor:n,daysInMonth:function(){return new Date(this.year(),this.month()+1,0).getDate()},eachDayInMonth:function(t){for(var e=1,r=this.daysInMonth();e<=r;e++)t(new n(new Date(this.year(),this.month(),e)))},thisMonth:function(){return new n(new Date(this.year(),this.month(),1))},nextMonth:function(){return this.relativeMonth(1)},previousMonth:function(){return this.relativeMonth(-1)},relativeMonth:function(t){return new n(new Date(this.year(),this.month()+t,1))},relativeDay:function(t){return new n(new Date(this.year(),this.month(),this.day()+t))},firstOfMonth:function(){return new n(new Date(this.year(),this.month(),1))},lastOfMonth:function(){return new n(new Date(this.year(),this.month(),this.daysInMonth()))},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},day:function(){return this.date.getDate()},dayOfWeek:function(){return this.date.getDay()},firstDayOfMonth:function(){return new Date(this.year(),this.month(),1).getDay()},inRange:function(t,n){return!(!t||!n)&&(this.compare(t)>0&&this.compare(n)<0)},compare:function(t){for(var n,e=["getFullYear","getMonth","getDate"],r=0,i=e.length;r<i;r++){if(n=e[r],this.date[n]()<t.date[n]())return-1;if(this.date[n]()>t.date[n]())return 1}return 0},daysTo:function(t){return Math.ceil((t.date.getTime()-this.date.getTime())/864e5)},toString:function(){return this.year()+"-"+this.month()+"-"+this.day()}},n.fromString=function(t){var e=t.split("-");return new n(new Date(e[0],e[1],e[2]))},n});
define("mixins/page-dates/Utils",["vanillajs"],function(e){"use strict";function t(e){var t=String(e);return(1===t.length?"0":"")+t}function r(e){return e.getFullYear()+"_"+t(e.getMonth()+1)+"_"+t(e.getDate())}function n(e){if(!e)return null;var t=e.split("-");return t.length<2&&(t=e.split("_")),new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10))}function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function i(e,t){if((!e||!t)&&[e,t].every(a))return!1;var r=new Date(e.getTime()),n=new Date(t.getTime());return r.setHours(0,0,0,0),n.setHours(0,0,0,0),r.getTime()===n.getTime()}function o(e,t){for(var r;e;){if(r=e.querySelector("[data-dateType="+t+"]"))return r;e=e.parentNode}return null}function u(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=!0,n=0;n<e.length;n++)r=r&&i(e[n],t[n]);return r}return{pad:t,dateToIso:r,fromString:n,compareDatesNoTime:i,compareDatesArrayNoTime:u,findClosestDatepicker:o}});
define("mixins/page-dates/DateTypeStore",["vanillajs","ta/Core/TA.Store","calendars/CalendarDate","mixins/page-dates/Utils"],function(t,e,n,r){"use strict";function i(t){var e=[];for(var n in T)T.hasOwnProperty(n)&&T[n].children&&T[n].children.indexOf(t)>=0&&e.push(n);return e}function a(t){var e=ta.page.getDates(t);return e&&e[0]?new n(e[0]):null}var u="zu",T={CHECKIN:{queryString:null,pathString:null},CHECKOUT:{queryString:null,pathString:null},STAYDATES:{children:["CHECKIN","CHECKOUT"],queryString:"staydates",pathString:u+"s"},EATERY:{queryString:"eaterydate",pathString:u+"r"},DEPARTURE:{queryString:null,pathString:null},RETURN:{queryString:null,pathString:null},ROUNDTRIP:{children:["DEPARTURE","RETURN"],queryString:"rtdates",pathString:u+"t"},ONEWAYFLIGHT:{queryString:"oneway",pathString:u+"o"},LEG_1:{queryString:"leg1date",pathString:u+"1"},LEG_2:{queryString:"leg2date",pathString:u+"2"},LEG_3:{queryString:"leg3date",pathString:u+"3"},ATTRACTION:{queryString:"attrdate",pathString:u+"a"},ATTRACTION_FROM:{queryString:null,pathString:null},ATTRACTION_TO:{queryString:null,pathString:null},ATTRACTIONRANGE:{children:["ATTRACTION_FROM","ATTRACTION_TO"],queryString:"attrrange",pathString:u+"e"}};return T.getStartDateType=function(t){var e=i(t);if(0==e.length){var n=T[t].children;return n&&n.length>0?n[0]:t}return T[e[0]].children[0]},T.getEndDateType=function(t){var e=i(t);if(0==e.length){var n=T[t].children;return n&&n.length>0?n[n.length-1]:t}var r=T[e[0]];return r.children[r.children.length-1]},T.isChildDateType=function(t){return i(t).length>0},T.isSingleDateType=function(t){var e=T[t];return!(T.isChildDateType(t)||e&&e.children&&e.children.length>0)},T.getParents=i,T.isHotelDateType=function(t){return i(t).indexOf("STAYDATES")>=0},T.isRoundTripDateType=function(t){return i(t).indexOf("ROUNDTRIP")>=0},T.isAttractionRangeDateType=function(t){return i(t).indexOf("ATTRACTIONRANGE")>=0},T.allowsSameDayRange=function(t){return T.isAttractionRangeDateType(t)||T.isRoundTripDateType(t)},T.isMultiCityDateType=function(t){return"LEG_1"==t||"LEG_2"==t||"LEG_3"==t},T.isStartDateType=function(t){var e=i(t);return 0!=e.length&&0==T[e[0]].children.indexOf(t)},T.isEndDateType=function(t){var e=i(t);if(0==e.length)return!1;var n=T[e[0]];return n.children.indexOf(t)==n.children.length-1},T.getStartDate=function(t){var e=T.getStartDateType(t);return null==e?ta.page.getDates(t)[0]:ta.page.getDates(e)[0]},T.getEndDate=function(t){var e=T.getEndDateType(t);return null==e?ta.page.getDates(t)[0]:ta.page.getDates(e)[0]},T.getMinEnabledDate=function(t){if(T.isHotelDateType(t)||T.isRoundTripDateType(t)){var i=e.retrieve("multiDP.minCheckInDate");if(i)return new n(r.fromString(i))}else{if("LEG_1"==t)return a("ONEWAYFLIGHT");if("LEG_2"==t)return a("LEG_1")||a("ONEWAYFLIGHT");if("LEG_3"==t)return a("LEG_2")||a("LEG_1")||a("ONEWAYFLIGHT");if("ATTRACTION_TO"==t)return a("ATTRACTION_FROM")}return null},T.flattenType=function(t){var e=T[t];return e?e.children?e.children.slice(0):[t]:[]},T.getCorrespondingDateType=function(t){switch(t){case"CHECKIN":return"CHECKOUT";case"CHECKOUT":return"CHECKIN";case"DEPARTURE":return"RETURN";case"RETURN":return"DEPARTURE";case"ATTRACTION_FROM":return"ATTRACTION_TO";case"ATTRACTION_TO":return"ATTRACTION_FROM";default:return null}},T});
define("ta/util/Date",["vanillajs","ns-exporter"],function(e,t){var n={};return n.MS_IN_DAY=864e5,n.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],n.HOUR_CONST=12,n.THAI_BUDDHIST_YEAR_OFFSET=543,n.MAX_STAY_DURATION_DAYS=30,n.MAX_VR_DURATION_DAYS=183,n.MAX_DAYS_BEFORE_RETURN_FLIGHT=330,n.MAX_ATTRACTION_RANGE_DAYS=330,n.inDateSet=function(e,t){if(null==e||null==t)return!1;for(var n=t.length,r=0;r<n;r++){var a=t[r];if(a.length){var i=a[0].getTime(),T=a[1].getTime();if(i<=e.getTime()&&T>=e.getTime())return!0}else if(e.getTime()==a.getTime())return!0}return!1},n.rangesIntersect=function(e,t){return Math.max(e[0].getTime(),t[0].getTime())<=Math.min(e[1].getTime(),t[1].getTime())},n.getDaysInRange=function(e,t){return Math.round((t.getTime()-e.getTime())/n.MS_IN_DAY)+1},n.getLastDayOfMonth=function(e){var t=new Date;return e&&(t=new Date(e.getTime())),t=new Date(n.normalize(t)),t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t.getDate()},n.getDaysApart=function(e,t){var n=864e5;return e&&t?Math.round(Math.abs((e.getTime()-t.getTime())/n)):0},n.inSameMonth=function(e,t){return null!=e&&null!=t&&e.getMonth()==t.getMonth()&&e.getYear()==t.getYear()},n.normalize=function(e){return e.setHours(n.HOUR_CONST,0,0,0)},n.create=function(e,t,r){return new Date(e,t,r,n.HOUR_CONST)},t.exportTo(n,"ta.util.date"),n});
define("mixins/page-dates/Base",["vanillajs","ta","mixins/page-dates/Utils","mixins/page-dates/DateTypeStore"],function(e,t,r,n){"use strict";function a(e){return e instanceof Date&&!isNaN(e.getTime())}function i(e){if(!n[e])throw"Invalid date type: "+e}function s(e){var t=[];for(var r in n)n.hasOwnProperty(r)&&n[r].children&&n[r].children.indexOf(e)>=0&&t.push(r);return t}function o(e,t){var a=n[e],i="";if(a.children)for(var s=0,o=a.children.length;s<o;s++){if("_"===t[a.children[s]])return"_";i+=(s>0?"_":"")+r.dateToIso(t[a.children[s]])}else{if("_"===t[e])return"_";i+=r.dateToIso(t[e])}return i}function h(e,t){var r=n[e];if(r.children){for(var a=0,i=r.children.length;a<i;a++)if("_"!==t[r.children[a]])return!1;return!0}return"_"===t[e]}var f=function(e){var s={},f={};!function(){var t,i;if(e)for(i in e)t=r.fromString(e[i]),e.hasOwnProperty(i)&&n[i]&&a(t)&&(s[i]=t)}(),this.hasDates=function(e){if(i(e),n[e].children){for(var r=0,a=n[e].children.length;r<a;r++)if(!t.page.hasDates(n[e].children[r]))return!1;return!0}return!!s[e]&&"_"!==s[e]},this.hasUserSetDates=function(e){return n[e].children?n[e].children.reduce(function(e,t){return e||!!f[t]},!1):!!f[e]},this.getDates=function(e){var t=[];if(i(e),n[e].children)for(var r=0,a=n[e].children.length;r<a;r++)t.push(s[n[e].children[r]]);else t.push(s[e]);for(var r in t)"_"===t[r]&&(t[r]=null);return t},this.setDates=function(e,t){if(i(e),Array.isArray(t)||(t=[t]),t=t.map(function(e){return e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):"_"}),n[e].children){if(n[e].children.length!==t.length)throw"Incorrect number of dates for date type "+e;for(var r=0,a=n[e].children.length;r<a;r++){var o=n[e].children[r];s[o]=t[r],f[o]=!0}}else{if(1!==t.length)throw"Incorrect number of dates for date type "+e;s[e]=t[0]}f[e]=!0},this.clearDates=function(e){if(!e)return void(s={});if(i(e),n[e].children)for(var t=0,r=n[e].children.length;t<r;t++)s[n[e].children[t]]="_";else s[e]="_"},this.datesToQueryString=function(e){var r=n[e];if(i(e),!r.queryString)throw"Cannot generate query-string for DateType "+e;return(t.page.hasDates(e)||h(e,s))&&t.page.hasUserSetDates(e)?r.queryString+"="+o(e,s):""},this.datesToQueryPath=function(e){var r=n[e];if(i(e),!r.pathString)throw"Cannot generate path-string for DateType "+e;return(t.page.hasDates(e)||h(e,s))&&t.page.hasUserSetDates(e)?r.pathString+o(e,s):""},this.datesToQueryJson=function(e){var r=n[e],a={};if(i(e),!r.queryString)throw"Cannot generate query json for DateType "+e;return(t.page.hasDates(e)||h(e,s))&&(t.page.hasUserSetDates(e)||"EATERY"===e)?(a[r.queryString]=o(e,s),a):{}}};return f.prototype.onDatesSelected=function(e,r,n){var a=s(r);if(t.page&&t.page.emit){t.page.emit("dateSelected",e,r,n);for(var i=0,o=a.length;i<o;i++)t.page.hasDates(a[i])&&t.page.emit("dateSelected",e,a[i],t.page.getDates(a[i]))}},f.prototype.usingUnifiedDates=!0,f});
define("mixins/page-dates/Validator",["vanillajs","ta","mixins/page-dates/DateTypeStore","calendars/CalendarDate","ta/util/Date"],function(e,t,a,n,r){"use strict";function i(e){if(!a[e].children||!t.page.hasDates(e))return!0;var n=a[e].children,r=t.page.getDates(e);return a.isStartDateType(n[0])&&a.isEndDateType(n[1])&&r[0]<=r[1]||a.isEndDateType(n[0])&&a.isStartDateType(n[1])&&r[1]<=r[0]}function s(e){if(!a[e].children||!t.page.hasDates(e))return!0;var n=t.page.getDates(e);return n[0].getTime()!==n[1].getTime()}function u(e){return function(n){return!a[n].children||!t.page.hasDates(n)||D.apply(null,t.page.getDates(n))<=e}}function D(e,t){var a=e instanceof n?e:new n(e),r=t instanceof n?t:new n(t);return Math.abs(a.daysTo(r))}var o=function(e){var t=e&&e.hasOwnProperty("maxStayLength")?e.maxStayLength:r.MAX_STAY_DURATION_DAYS;this.VALIDATORS={STAYDATES:[i,s,u(t)],ROUNDTRIP:[i],ATTRACTIONRANGE:[i]}};return o.prototype.validate=function(e){var t=this.VALIDATORS[e];return!t||0==t.length||!t.some(function(t){return!t(e)})},o});
define("mixins/page-dates/pop-calendar",["ta","common/trackingStreams","ta/support/Qualtrics","ta/Core/TA.Store","utils/responsive"],function(e,t,n,r,i){function a(){P=!1}function o(t){g=!!t.popFromDefault,m=!!t.popFromVisibleOnly,h=t.popFromVisibleOnlyBreakpoint,w=!!t.datesWereDefaulted,E=t.popCalendarType,D=!!t.hasMetaMarketingDefaultDates,v=!!t.qualtricsSurveyEnabled,e.page.on("datepickerRejected",a),e.page.on("dateSelected",a)}function u(e){if(!w||k)return!1;if(r.retrieve("suppressCalendarPop"))return!1;if(!E)return!1;if(v&&n&&(n.canDisplay()||n.seenThisPageView())){if(!require.defined("page-model"))return!1;if(require("page-model").isMobile)return!1}if(e&&m&&(!h||i.is(h,!0,!1)())&&!p(e))return!1;switch(E){case"doNot":return!1;case"always":return!0}return g&&w}function p(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function d(){return D}function s(n){P=!0,e.page.gatherDates(n),k=!0,t.trackEvent("DATEPICKER","auto-popped-calendar-shown",window.pageServlet),t.trackEvent("calendar","in_view","autopop")}function c(){return k}function l(){return P}function f(){w=!1}var g=!1,m=!1,h="",w=!1,v=!1,D=!1,E="",k=!1,P=!1;return{init:o,shouldPop:u,shouldPopMetaMarketing:d,popCalendar:s,wasPoppedThisPageLoad:c,isShowing:l,setUserEnteredDates:f}});
define("mixins/page-dates/default-dates",["ta","mixins/mixin","mixins/Events","mixins/page-dates/pop-calendar","mixins/page-dates/DateTypeStore","common/trackingStreams","vanillajs","ta/Core/TA.Event"],function(e,t,a,n,d,i,o,p){"use strict";function s(e){n.init(e),f=!!e.datesWereDefaulted,g=!0,D.emit("init")}function r(e){"function"==typeof e&&(g?e():D.on("init",e))}function u(t,a,o){function s(t){n.wasPoppedThisPageLoad()&&(D.emit("poppedCalendarDismissed",t),e.page.off("datepickerRejected",s))}function r(){if(g&&(f&&i.trackEvent("DATEPICKER","undated_to_default_dated"),!a)){var t=n.shouldPop(g);(t||n.shouldPopMetaMarketing())&&(t&&D.emit("popFromDefault"),e.page.on("datepickerRejected",s),n.popCalendar(g))}}var u=o?o:"STAYDATES";if(e.page.usingUnifiedDates){e.page.hasDates(u)||e.page.clearDates(u),l=e.page.getDates(d.getStartDateType(u))[0],c=e.page.getDates(d.getEndDateType(u))[0];var g=t.querySelector('[data-datetype="'+d.getStartDateType(u)+'"]');e.page.on("dateSelected",function(a,d,o){var p,r=l&&c,g=e.page.getDates(u)[0],D=e.page.getDates(u)[1];t.contains(a)&&(!r&&e.page.hasDates(u)?p="undated_to_manually_dated":g==l&&D==c||(n.setUserEnteredDates(),e.page.off("datepickerRejected",s),f?(p="default_dated_to_manually_dated",f=!1):p="manually_dated_to_manually_dated"),l=g,c=D,p&&i.trackEvent("DATEPICKER",p))}),"loading"===document.readyState?window.addEventListener("DOMContentLoaded",r):r(),p.on("specialOfferClosed",function(){a||g&&n.shouldPop(g)&&n.popCalendar(g)})}}var l,c,f=!1,g=!1,D={init:s,onInit:r,apply:u,usingDefaults:function(){return f}};return t(D,new a("popFromDefault"))});
define("ta/util/Deferred",["vanillajs","ns-exporter"],function(e,r){"use strict";function t(e){l.prototype[e]=function(r,t){return i(this,e,t?r.bind(t):r)}}for(var n=["success","failure","always","progress"],u={resolved:["success","always"],rejected:["failure","always"]},l=function(){},a=0;a<n.length;a++)t(n[a]);l.prototype.then=function(e,r){var t=this.success(e);return r?t.failure(r):t};var o=function(e){var r="pending",t=new l;t.queue=[],t.args=null,t.aplus="boolean"==typeof e&&e,t.status=function(){return r};var n={notify:function(){if(s(r))throw new Error("Promise has already been fulfilled.");var e,n,u,l=Array.prototype.slice.call(arguments);for(n=0,u=t.queue.length;n<u;n++)e=t.queue[n],"progress"===e.hook&&e.callback.apply(null,l);return t},resolve:function(){if(s(r))throw new Error("Promise has already been fulfilled.");return r="resolved",t.args=Array.prototype.slice.call(arguments),f(t)},reject:function(){if(s(r))throw new Error("Promise has already been fulfilled.");return r="rejected",t.args=Array.prototype.slice.call(arguments),f(t)},isFulfilled:function(){return s(r)},promise:function(){return t}};return n},s=function(e){return"resolved"===e||"rejected"===e},i=function(e,r,t){return e.fwd?i(e.fwd,r,t):(e.queue.push({hook:r,callback:t}),f(e))},f=function(e){if(e.fwd)return f(e.fwd);for(var r,t;s(e.status())&&(r=e.queue.shift());)~u[e.status()].indexOf(r.hook)&&(t=r.callback.apply(null,e.args),t instanceof l?(t.queue=t.queue.concat(e.queue.splice(0)),e=e.fwd=t):t&&e.aplus&&(e.args=[t]));return e};return r.createNs(o,"ta.util","Deferred"),o});
define("mixins/page-dates/Responsive",["vanillajs","ta","mixins/mixin","ta/util/Date","mixins/page-dates/Base","calendars/CalendarDate","mixins/page-dates/Utils","mixins/page-dates/DateTypeStore","mixins/page-dates/Validator","mixins/page-dates/default-dates","ta/util/Deferred","common/trackingStreams"],function(e,t,a,n,s,i,r,l,o,p,d,u){"use strict";function D(e){var t={dateType:e,startDate:l.getStartDate(e),endDate:!l.isSingleDateType(e)&&l.getEndDate(e),minEnabledDate:E&&new i(r.fromString(E)),maxEnabledDate:A&&new i(r.fromString(A)),thaiOffset:S,showClearButton:C,calendarTitle:w,demandLoadAssets:L,calendarStyle:O,moveIntoView:k};l.isHotelDateType(e)||l.isRoundTripDateType(e)||l.isAttractionRangeDateType(e)?(t.maxStayLength=T,!t.maxEnabledDate&&h&&(t.maxEnabledDate=(new i).relativeDay(parseInt(h)))):(t.availableDates=b,t.excludedDates=x);var a=l.getMinEnabledDate(e);return a&&(t.minEnabledDate=a),t}function c(e,t){if(!e||!t||!e.querySelector)return null;for(var a="[data-dateType="+t+"]",n=null,s=0;s<3&&e.parentNode&&!n;s++)e=e.parentNode,n=e.querySelector(a);return n}function f(e){l.getParents(e).forEach(function(a){y.validate(a)||l[a].children.filter(function(t){return t!==e}).forEach(function(e){t.page.clearDates(e),t.page.emit("dateSelected",null,e,[null])})})}function g(e){return v&&l.getCorrespondingDateType(e)&&!l.isStartDateType(e)&&!t.page.hasDates(l.getCorrespondingDateType(e))}var y,m=null,v=!1,S=!1,h=null,T=n.MAX_STAY_DURATION_DAYS,b=null,x=null,E=null,A=null,C=!1,w=null,L=!0,O={},k=!1,N=function(e,t){a(this,new s(e)),y=new o(t),t&&(S=t.thaiOffset,v=t.popCheckInFirst,T=t.maxStayLength||T,b=t.availableDates,x=t.excludedDates,E=t.minEnabledDate,A=t.maxEnabledDate,C=t.showClearButton,w=t.calendarTitle,L=t.demandLoadAssets,h=t.maxEnabledDaysOut,O=t.calendarStyle,k=t.moveIntoView||k,p.init({datesWereDefaulted:t.didCreateDefaultDates,popFromDefault:t.supportsPrePopWithDefaultDates,popCalendarType:t.popCalendarType,qualtricsSurveyEnabled:t.qualtricsSurveyEnabled,hasMetaMarketingDefaultDates:t.hasMetaMarketingDefaultDates,popFromVisibleOnly:t.supportsPrePopWithVisibilityOnly,popFromVisibleOnlyBreakpoint:t.supportsPrePopWithVisibilityOnlyBreakpoint}))};return N.prototype.gatherDates=function(e,a,n,s,i){var r=e&&e.getAttribute("data-dateType"),o=r&&l[r]?r:"UNKNOWN";if(g(o)&&(o=l.getCorrespondingDateType(o),e&&o&&(e.blur(),e=c(e,o))),!e||e!==m){m=e,e&&e.classList&&e.classList.add("focused");var p=d(!0);return require(["trjs!calendars/ResponsiveStayDates"],function(a){a.openAsPopover(e,D(o)).then(function(a){m=null,e&&e.classList&&e.classList.remove("focused"),t.page.pushDates(e,o,a),p.resolve(a)},function(a){a===m&&(m=null),e&&e.classList&&e.classList.remove("focused"),i&&t.page.hasDates("STAYDATES")&&"classic"===O&&t.page.onDatesSelected(e,o,t.page.getDates("STAYDATES")),t.page.emit("datepickerRejected",e)}),u.trackEvent("calendar","in_view","default")}),p.promise()}},N.prototype.gatherDatesNear=function(e){var a=r.findClosestDatepicker(e,"CHECKIN");a&&t.page.gatherDates(a)},N.prototype.pushDates=function(e,a,n){t.page.setDates(a,n),f(a),t.page.onDatesSelected(e,a,n)},N.prototype.setAvailableDates=function(e){b=e},N.prototype.setExcludedDates=function(e){x=e},N.prototype.setMaximumDaysOut=function(e){h=e},N});
define("mixins/attraction-traveler-info/UpdateAttractionsTravelerInfo",[],function(){"use strict";function t(){function n(t){window&&window.__REDUX_STORE__&&window.__REDUX_STORE__.dispatch(t)}function e(t){var n=new Date(t),e=""+(n.getMonth()+1),o=""+n.getDate(),i=n.getFullYear();return e.length<2&&(e="0"+e),o.length<2&&(o="0"+o),[i,e,o].join("-")}t.prototype.sendAttractionsSingleDateInRedux=function(t){n({type:"SET_ATTRACTIONS_TRAVELER_INFO",travelerInfo:{singleDate:e(t)}})},t.prototype.updateAttractionsSingleDateInReduxFromCookie=function(){n({type:"SET_ATTRACTIONS_TRAVELER_INFO_FROM_COOKIE"})}}return t});
define("common/pixels-loader",["vanillajs","mixins/page-dates/DateEvents","ta/Core/TA.FireEvent"],function(n,o,e){"use strict";var i,t=2e3,a=function(){require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(n){n.loadMonikers(),o.on("dateSelected",function(o,e){"STAYDATES"==e&&window.setTimeout(n.loadMonikerForEnterDates,2e3)})}),i&&i.shouldInitFlightsEvents&&r(),a=function(){}},r=function(){var n=new Promise(require.bind(null,["trjs!ta/common/behavior/Ads-pagemoniker"]));e.on("lcbPop",function(){n.then(function(n){n.loadMonikerForLCBPop()})}),e.on("packageClick",function(){n.then(function(n){n.loadVacationPackageMetaMonikers()})}),e.on("metaLinkClickPixelLoad",function(o){n.then(function(n){n.loadFlightsMetaMonikers(o)})}),e.on("metaLightboxLoad",function(o){n.then(function(n){n.loadLightboxMonikers(o)})}),e.on("flightSearchPixelLoad",function(){n.then(function(n){n.loadMonikerForFlightSearch()})})};return{init:function(n){i=n,n&&n.pixelsEnabled&&setTimeout(a,t)},remarketingOptions:function(){return i}}});
define("common/Radio",["babel/babel-helpers"],function(e){var t={},n=/\s+/,r=function(){function t(n){e.classCallCheck(this,t),this.channel=n,this.events={},this.replies={}}return e.createClass(t,[{key:"reply",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.replies[e]||(i.replies[e]=[]),i.replies[e].push({callback:t,context:r||i})},this),this}},{key:"request",value:function(e){if(!this.replies[e])return null;var t=this.replies[e];t=t[t.length-1];for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.callback.apply(t.context,r)}},{key:"requestMany",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.replies[e]?this.replies[e].map(function(e){return e.callback.apply(e.context,n)}):null}},{key:"requestAll",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!0;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e&&s(t.callback.apply(t.context,i))},!0)}},{key:"requestAny",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];if(!this.replies[t])return!1;i=[n].concat(e.toConsumableArray(i));var s="function"==typeof n?n:function(e){return e===n};return this.replies[t].reduce(function(e,t){return e||s(t.callback.apply(t.context,i))},!1)}},{key:"on",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i})}),this}},{key:"once",value:function(e,t,r){var i=this;return e.split(n).forEach(function(e){i.events[e]||(i.events[e]=[]),i.events[e].push({callback:t,context:r||i,single:!0})}),this}},{key:"off",value:function(e,t){var r=this;return e.split(n).forEach(function(e){r.events[e]&&(r.events[e]=r.events[e].filter(function(e){return t&&e.callback!==t}))}),this}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.events[e])return this.events[e]=this.events[e].filter(function(e){return e.callback.apply(e.callback,n),!e.single}),this}},{key:"clear",value:function(){return this.events={},this.replies={},this}},{key:"requestEvery",get:function(){return this.requestAll}},{key:"requestSome",get:function(){return this.requestAny}},{key:"one",get:function(){return this.once}},{key:"emit",get:function(){return this.trigger}}]),t}();return function(e){return t[e]||(t[e]=new r(e))}});
define("servlets/attractionsnarrow",["lib/jquery-amd","ta","page-model","mixins/page-dates/DateEvents","mixins/page-dates/DateTypeStore","mixins/page-dates/Responsive","mixins/attraction-traveler-info/UpdateAttractionsTravelerInfo","common/pixels-loader","common/Radio","utils/ajax"],function(e,t,a,r,n,i,s,o,c,l){"use strict";function u(e){if(!T){t.mixin(this,r),t.mixin(this,new i(e.pageDates,e.calendar)),t.mixin(this,new s),o.init(e.remarketingOptions);var a=this;D(a),t.page.on("dateSelected",function(){D(a)}),c("trip_search").on("clear_dates",function(e){var t=p();a.clearDates(t),a.emit("dateSelected",null,t,[]),A()}),t.util.localstorage.canUseLocalStore()?v=localStorage:t.util.sessionStorage.canUseSessionStore()&&(v=sessionStorage),e.pageDates.ATTRACTION_FROM&&e.pageDates.ATTRACTION_TO&&v&&v.setItem("tac.selectedDate",d(e.pageDates.ATTRACTION_FROM,e.pageDates.ATTRACTION_TO)),T=!0}return this}function d(e,t){var a=e+"_"+t;return a=a.split("-").join("_")}function f(e){var a=v.getItem("tac.selectedDate"),r=a?a:"cleared_date";t.trackEventOnPage("ATTRACTIONS","availability_check_success",r),t.servlet.Attractions.updatePage(e)}function g(){y().hide()}var v,T=!1,p=function(){for(var e=document.querySelectorAll("[data-dateType]"),t=0;t<e.length;t++){var a=e[t].getAttribute("data-dateType");if(n.isAttractionRangeDateType(a))return"ATTRACTIONRANGE"}return"ATTRACTION"},m=function(){return n[p()].queryString},A=function(){var e=m(),t={};t[e]="_",v&&v.setItem("tac.selectedDate",""),t=_(t),y().show(),l({url:"/AttractionsAjax",data:t,method:"GET",evalScripts:!0,success:f,error:g})},h=function(t,r){var n=p(),i=this.datesToQueryJson(n),s=m();i[s]&&v&&v.setItem("tac.selectedDate",i[s]),i=_(i),y().show(),l({url:"/AttractionsAjax",data:i,method:"GET",evalScripts:!0,success:f,error:g}),i.cat||i.t||i.zft||i.zfn||i.zfr||e(document).trigger("redirect_to_ap",[this.datesToQueryString(n),a.GEO_ID])},_=function(e){e.geo=a.GEO_ID,e.cat=t.retrieve("page.attractions.category"),e.t=t.servlet.Attractions.selectedTypes.join(",");var r=document.querySelector(".pageNum.current");r&&(e.o="a"+r.getAttribute("data-offset"));var n=document.querySelector(".filter_wrap_0").querySelectorAll(".input_hidden[checked]"),i=S(n,"zft");i&&(e.zft=i);var s=S(n,"zfn");s&&(e.zfn=s);var o=S(n,"zfr");return o&&(e.zfr=o),e},S=function(e,t){if(0===e.length)return null;for(var a=[],r=0;r<e.length;r++){var n=e[r];n.getAttribute("id").contains("ap_filter_"+t)&&(a[a.length]=n.getAttribute("value"))}return a.join(",")},y=function(){var e=t.retrieve("filters.waitDialog"),a="mg s1 fatNotice fatNotice_2011";return e||(e=new t.overlays.CenteredOverlay({style:a,showCloseButton:!1,autoShow:!1}),e.inner.set("html","<b>"+JS_UpdatingYourResults+"</b>"),t.store("filters.waitDialog",e)),e},D=function(t){var a=e(".clear_dates_text.taLnk"),r=p();a&&t.hasDates(r)?a.removeClass("hidden"):a.addClass("hidden")};return{init:u,processNewTravelInfo:h}});
define("shelves/shelfEventHandlers",["lib/jquery-amd","ta","ta/util/Element","utils/urlDecoder"],function(n,e,t,i){"use strict";function l(n){var t=n.getAttribute("data-tpp"),i=n.getAttribute("data-tpact")||"shelf_in_view",l=n.getAttribute("data-tpatt"),c=n.getAttribute("data-tpid");e.trackEventOnPage(t,i,l,c)}function c(){var e=n(".shelf_title");e&&e.each(function(n){var i=e[n];I.indexOf(i)===-1&&t.isScrolledIntoView(i)&&(l(i),I.push(i))})}function a(){c()}function o(n,e){e?window.location=i.getUrl(n):window.open(i.getUrl(n),"_blank")}function r(n,t){e.SHELF_EVENT_INITIALIZED||(e.SHELF_EVENT_INITIALIZED={}),e.SHELF_EVENT_INITIALIZED[n]||(t(),e.SHELF_EVENT_INITIALIZED[n]=!0)}function u(){f(),s(),_(),E(),v()}function f(){r("scrollEvent",function(){a(),window.addEventListener("scroll",c)})}function s(){r("seeAllTracking",function(){e.on("track_shelf_see_all_click_event",function(n,e){l(e)})})}function E(){r("seeAllItemTracking",function(){e.on("track_shelf_item_click_event",function(n,e){l(e)})})}function _(n){r("seeAllEventHandlers",function(){e.on("shelf_see_all_click_event",function(e,t,i,c){new Event(e).preventDefault(),c||l(t),n?n(e,t):o(t,i)})})}function v(n){r("seeAnItemEventHandlers",function(){e.on("shelf_item_click_event",function(e,t,i,c){new Event(e).preventDefault(),c||l(t),n?n(e,t):o(t,i)})})}var I=[];return{initShelfListeners:u,initSeeAllTracking:s,initSeeAnItemTracking:E,initSeeAllEventHandlers:_,initSeeAnItemEventHandlers:v,initScrollEvent:f}});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"dmo_attribute_to_collection","handlers",["handlers"]);e(["placement"],function(t){function e(t){var e=new Event(t||window.event);if(e&&e.target){e.stopPropagation();var n="a"==e.target.get("tag")?e.target:e.target.getParent("a");if(n&&n.getAttribute("data-content-id")&&n.getAttribute("data-action")){var o=n.getAttribute("data-content-id"),r=encodeURIComponent(n.getAttribute("data-action")),i=window.pageServlet?window.pageServlet.toLowerCase():"none";ta.trackEventOnPage(a,r,i+"_collections_badge",o)}}}function n(t){var e=window.pageServlet?window.pageServlet.toLowerCase():"none";ta.trackEventOnPage(a,"icon_click",e,0)}var a="DMO_content_click";return{trackIconClick:n,trackLinkClick:e}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"dmo_attribute_to_collection_clarity","handlers",["handlers"]);e(["placement"],function(t){function e(t){var e=new Event(t||window.event);if(e&&e.target){e.stopPropagation();var n="a"==e.target.get("tag")?e.target:e.target.getParent("a");if(n&&n.getAttribute("data-content-id")&&n.getAttribute("data-action")){var o=n.getAttribute("data-content-id"),r=encodeURIComponent(n.getAttribute("data-action")),i=window.pageServlet?window.pageServlet.toLowerCase():"none";ta.trackEventOnPage(a,r,i+"_collections_badge",o)}}}function n(t){var e=window.pageServlet?window.pageServlet.toLowerCase():"none";ta.trackEventOnPage(a,"icon_click",e,0)}var a="DMO_content_click";return{trackIconClick:n,trackLinkClick:e}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"datepickers_attraction_single_date","handlers",["handlers"]);t(["widget","vanillajs","api-mod","ta","ta/Core/TA.Event","calendars/CalendarDate","lib/jquery-amd","ta-i18n"],function(e,t,a,i,n,r,d,u){"use strict";function c(e){if(e){var t=e,a=new r(t),i=a.month()+1,n=a.day(),d=a.year();h.setAttribute("value",d+"-"+i+"-"+ +n),A.setAttribute("value",n),D.setAttribute("value",i+"/"+d)}}function l(){h.setAttribute("value",k.getAttribute("data-emptyText")),A.setAttribute("value",0),D.setAttribute("value",0)}function o(e,t){var i,n=e.getAttribute("data-dateFormat");i=t?u.formatDate(n,t):e.getAttribute("data-emptyText");var r=a.find(".picker-inner .picker-count",e);r&&r.firstChild&&(r.firstChild.nodeValue=i)}function s(t,n,r){if(!a.inDocument(e.element))return i.page.removeListener("dateSelected",s),void(k=null);if(n===v){var d=r[0];o(k,d),d?c(d):l()}}function f(e,t){e&&i.page.gatherDates&&i.page.gatherDates(e,null,t)}function g(e){var t=d(".date.attraction.datePickerWidget .ui_spinner.small");e?t.removeClass("hidden"):t.addClass("hidden")}function p(){i.page&&i.page.shouldOpenDatePicker&&i.page.shouldOpenDatePicker()&&f(b.find(".unified-picker").get(0),!1)}function m(){if(i.page&&i.page.hasDates&&i.page.hasDates(v)&&i.page.getDates){var t=i.page.getDates(v);s(d(e.element).find(".unified-picker").get(0),v,t)}p()}var v="ATTRACTION",k=a.find("[data-datetype=ATTRACTION]",e.element),h=a.find(".datePickerWidget input[name=dateStr]",e.element),A=a.find(".datePickerWidget input[name=day]",e.element),D=a.find(".datePickerWidget input[name=month]",e.element);i.page.on("dateSelected",s);var b=d(e.element).find(".ui_picker");return null!==b&&b.on("click",function(){f(b.find(".unified-picker").get(0),!1)}),n.on("activateDatePicker",function(){var e=d(".datePickerWidget .unified-picker").get(0);e.removeClass("focused"),f(e,!1)}),n.on("toggleShowSpinner",g),i.queueForReady&&i.queueForReady(m),{onDatePickerClick:f}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_form_submit","handlers",["handlers"]);t(["widget","lib/jquery-amd","page-model","common/Radio","ta/Core/TA.Store","common/trackingStreams"],function(e,t,a,r,i,o){"use strict";function s(e){if(!w.requestAny("is-valid",!1)){var a=w.request("url:require");a?(_?w.trigger("loading",!0):w.trigger("disabled",!0),t.when(a).done(function(t){t?(t=n(t),require(["trjs!ta/Core/TA.Record"],function(a){a.setEvtCookie("tripsearch",m?m:"submit",f(t,e),0,t),window.location=t.replace("/Tourism",e)})):(w.trigger("loading",!1),o.trackEvent("tripsearch","submit_error",e.substr(1)))})):o.trackEvent("tripsearch","submit_error",e.substr(1))}}function n(e){var t=window.location.pathname,r={hotels:"Hotels"===a.session.pageServlet,restaurants:"Restaurants"===a.session.pageServlet};if(r.hotels||r.restaurants){var i=new RegExp("-g[0-9]+-");if(!t.match(i)){var o=new RegExp("-([a-z]+)([0-9]+)-"),s=o.exec(t);if(s){var n=s[1],c=s[2];if(n&&c){var l=e.indexOf("?")>-1?"&":"?",u=e+l;return"26"===c&&"zff"===n&&r.hotels&&(u+="c=3&"),u+n+"="+c}}}}return e}function c(a){if(a&&"click"==a.type){var r="formsubmit";t(e.element).parents(".persistent_trip_search_fixed").length&&(r+="_persistent"),o.trackEvent(r,"click","update")}}function l(e,a){!1!==w.request("is-valid")&&(o.trackEvent("GuestSelector-tripsearch","update_results_click",h,"1",!1),c(e),ta.servlet&&ta.servlet.HACSearch?ta.servlet.HACSearch.doMetaDateSearch(i.retrieve("page.location"),a):ta.page.processNewTravelInfo(),t(a).addClass("disabled"),t(".ui_overlay .ui_close_x").click())}function u(e,t){!1!==w.request("is-valid")&&(o.trackEvent("RGP_global_update","Click"),ta.page&&ta.page.processNewTravelInfo&&ta.page.processNewTravelInfo())}function p(e,a){!1!==w.request("is-valid")&&(ta.page&&ta.page.onDatesSelected(),t(".ui_overlay .ui_close_x").click())}function g(e,t,a){ta&&ta.page&&ta.page.processNewTravelInfo&&"function"==typeof ta.page.processNewTravelInfo&&ta.page.processNewTravelInfo(e,t,a)}function v(e,a){var r=!1,i=t(".ui_overlay.rooms_guests_children .age-picker.error").is(":visible");i&&(r=!0),t(".ui_overlay .ui_close_x").click(),ta&&ta.page&&ta.page.processNewTravelInfo&&"function"==typeof ta.page.processNewTravelInfo&&ta.page.processNewTravelInfo(e,a)}function d(e,a){t(".ui_overlay .ui_close_x").click(),ta&&ta.page&&ta.page.processNewTravelInfo&&"function"==typeof ta.page.processNewTravelInfo&&ta.page.processNewTravelInfo(e,a)}function f(e,t){var a=new RegExp("/(.*?_Review)-g"),r=new RegExp("/(.*?Near)-g"),i=a.exec(e);if(i)return i[1];var o=r.exec(e);return o?o[1]:t.substr(1)}var _=!0,m="",w=r("search"),h="",k=i.retrieve("tracking.impression.key"),b=i.retrieve("page.location");return k&&(h="IK:"+k),b&&(h+="/L:"+b),w.on("loading",function(a){t(e.element).toggleClass("loading",a),t(e.element).closest(".trip_search.rounded_lockup").toggleClass("loading",a)}).on("disabled",function(e){t("button").toggleClass("disabled",e)}).on("submit",function(a,r){_=a,m=r,t("button",e.element).click()}),{run:s,updateHotels:l,updateResponsiveListPage:u,updateSemPage:p,updateAttractionProducts:v,apdAvailabilityCheck:d,updateAttractions:g}})});
require(["ta/prwidgets"],function(n){var e=n.define.bind(n,"common_progress_bar","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/page","ta/Core/TA.Event"],function(n,e,o,a){"use strict";function i(){t.removeClass("loading"),setTimeout(function(){t.addClass("loading"),t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",r)},0)}function r(){t.removeClass("loading")}var t=e(".progress_bar",n.element);return o.on("newPageTravelInfo",i),a.on("page-polling-complete",r),a.on("page-repoll-failed",r),{}})});
define("utils/ResponsiveEvents",["mixins/Events","utils/responsive","utils/throttle","vanillajs"],function(n,e,t){"use strict";function r(n,e,t){var r=n.filter(function(n){return e.indexOf(n)<0}),i=e.filter(function(e){return n.indexOf(e)<0});return t?r.reverse().concat(i.reverse()):r.concat(i)}function i(){var n=document.body.clientWidth;if(n!=o){var t=n>o,i=e.currentBreakpoints(),f=r(u,i,t);f.forEach(function(n){var e=t?"over-":"under-";c.emit(e+n)}),f.length&&c.emit("breakpoint",i[0]),u=i,o=n}}var o=document.documentElement.clientWidth,u=e.currentBreakpoints(),f=["breakpoint"];e.breakpoints.forEach(function(n){f.push("over-"+n,"under-"+n)});var c=n.create(f);return c.onOver=function(n,e){c.on("over-"+n,e)},c.onUnder=function(n,e){c.on("under-"+n,e)},c.offOver=function(n,e){c.off("over-"+n,e)},c.offUnder=function(n,e){c.off("under-"+n,e)},window.addEventListener("resize",t(i,100)),c});
define("hotels/HotelsRadioHelper",["babel/babel-helpers","utils/objutils"],function(e,l){var s={ELEMENT:"hotels_radio_channel_element"},t={PERSISTENT_OFFSET:"persistent_header_height"},n={channels:s,elementMessages:t};return l.deepFreezeCopy(n)});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"trip_search","handlers",["handlers"]);t(["placement","api-mod","lib/jquery-amd","utils/throttle","ta/Core/TA.Event","ta/Core/TA.Store","common/trackingStreams","common/Radio","utils/responsive","utils/ResponsiveEvents","hotels/HotelsRadioHelper"],function(e,t,s,i,n,o,r,a,d,l,c){function f(){function e(){m.css("height",C.height()||""),s(window).on("resize",l),C.addClass("fixed persistent_trip_search_fixed"),p(),t.fireEvent(window,"date_bar_undocked"),n.fireEvent("scrollingTabs_updateTabBar",{"height":C.height()})}function o(){m.css("height",""),s(window).off("resize",l),C.removeClass("fixed persistent_trip_search_fixed"),p(),t.fireEvent(window,"date_bar_docked")}if(C){var r=s(window).scrollTop(),a=t.find(".date_picker_modal",w),l=i(function(){m&&C&&C.hasClass("fixed")&&m.css("height",C.height()||"")},100);d.mobile()?C.hasClass("fixed")&&o():!C.hasClass("fixed")&&h(a,r)?e():C.hasClass("fixed")&&_(a,r)&&o()}}function h(e,t){return e?t>e.offset().top:t>m.offset().top}function _(e,t){return e?t<=e.offset().top:t<=m.offset().top}function u(){b.addClass("disabled")}function p(){g()}function g(){setTimeout(function(){if(w){var e=s(".change_dates_text",w);e&&(e.removeAttr("style"),e.addClass("autoResize"),t.fireEvent("refreshedDOMContent",w))}},1)}function v(e){a("trip_search").trigger("clear_dates",e)}function E(){var i=s("#h"),n=s("#"+e.id);t.toggleClass(n,"hidden",!t.hasClass(i,"selected"))}var m=s("#"+e.id),w=s(".datepicker_box",m),T=s(".title",m),b=s("#UPDATE_RESULTS",m),C=s("#PERSISTENT_TRIP_SEARCH_BAR",m);return u(),n.on("hotels.sessionDatesUpdated",u),n.on("show_hide_tripsearch",E),m.find(".traveler_info_container").length&&o.store("guests_rooms_picker.enabled",!0),s(window).one("date_bar_undocked",function(){r.trackEvent("persistentheader","in_view")}),s(window).on("scroll",i(f,100)),l.onUnder("tablet",f),l.onOver("tablet",f),n.queueForLoad(f),a(c.channels.ELEMENT).reply(c.elementMessages.PERSISTENT_OFFSET,function(){return C.length&&!d.mobile()?C.height():0}),T&&o.store("hotels_left_filters_redesign_searching_text",T.outerHTML+'<div class="content">'+o.retrieve("hotels_left_filters_redesign_searching_text")+"</div>"),{clearDates:v}})});

define("utils/domUtils",["vanillajs"],function(){var r={};return r.querySelectorArray=function(r,e){if(!r)return[];for(var n=[],t=r.querySelectorAll?r.querySelectorAll(e):[],i=t.length,o=0;o<i;o++)n.push(t[o]);return n},r.isOrContainsElement=function(r,e){if(!r||!e)return!1;if(r===e)return!0;if(r.contains&&r.contains(e))return!0;for(;e;){if(r===e)return!0;e=e.parentNode}return!1},r.forceReflow=function(r){r&&r.offsetWidth},r});
define("utils/classnameUtils",["vanillajs"],function(){function s(s){return e[s]?e[s].lastIndex=0:e[s]=new RegExp("(\\s|^)"+s+"(\\s|$)","g"),e[s]}var a={},e={};return a.hasClass=function(a,e){return!!a&&(a.classList?a.classList.contains(e):s(e).test(a.className))},a.addClass=function(s,e){s&&(s.classList?s.classList.add(e):a.hasClass(s,e)||(s.className+=" "+e))},a.removeClass=function(a,e){a&&(a.classList?a.classList.remove(e):a.className=a.className.replace(s(e)," "))},a.toggleClass=function(s,e,n){s&&(n||void 0===n&&!a.hasClass(s,e)?a.addClass(s,e):a.removeClass(s,e))},a.getParentByClassname=function(s,e){for(var n=s&&s.parentNode;n;n=n.parentNode)if(a.hasClass(n,e))return n;return null},a});
define("utils/domEventUtils",["vanillajs"],function(){function e(e,t,n){return{"elmt":e,"type":t,"handler":n,"callback":function(t){t.target=t.target||t.srcElement,n.call(e,t)}}}function t(t,r,i){if(n(t,r,i))return null;l[r]||(l[r]=[]);var a=e(t,r,i);return l[r].push(a),a}function n(e,t,n,r){for(var i=l[t]||[],a=i.length-1;a>=0;a--){var v=i[a];if(v.elmt==e&&v.handler==n)return r&&i.splice(a,1),v}return null}function r(e,t,r){return n(e,t,r,!0)}function i(){if(null===v){v=!1;try{var e=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}}return v}var a={},l={},v=null;return a.addEvent=function(e,n,r){if(e)if(e.addEventListener)e.addEventListener(n,r,!1);else if(e.attachEvent){var i=t(e,n,r);i&&e.attachEvent("on"+n,i.callback)}},a.removeEvent=function(e,t,n){if(e)if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent){var i=r(e,t,n);i&&e.detachEvent("on"+t,i.callback)}},a.passiveSupported=i,a});
define("utils/onClickOrFocus",["utils/domEventUtils"],function(n){return function(t,i,o){var c=!0;t&&"function"==typeof i&&(n.addEvent(t,"mousedown",function(){c=!1}),n.addEvent(t,"focus",function(n){c&&i.call(this,n),c=!0}),o||n.addEvent(t,"click",i))}});
define("common/DatePicker",["ta/page","ta-i18n","common/trackingStreams","mixins/Events","mixins/page-dates/DateTypeStore","utils/domUtils","utils/classnameUtils","utils/onClickOrFocus","utils/stopevent"],function(t,e,a,r,n,i,c,o,s){var u=function(u,l){function d(t){for(var e=0;e<k.length;e++)if(i.isOrContainsElement(k[e],t))return k[e];return null}function f(e,a,r){return i.isOrContainsElement(document.body,u)?void n.flattenType(a).forEach(function(t,e){m(y[t],r[e])}):void t.off("dateSelected",f)}function m(t,a){var r=t.querySelector(".picker-label");if(r){var n=t.getAttribute("data-dateFormat"),i=a&&n&&e.formatDate(n,a);r.innerHTML=i||t.getAttribute("data-emptyText"),c.toggleClass(r,"ghost_text",!i)}}function p(e){var a=d(e&&e.target)||k[0];s(e),v.emit("DatePicker-clicked",a),g(e),t.gatherDates(a,null,l)}function g(t){if(t&&t.target){var e="datepicker";c.getParentByClassname(u,"persistent_trip_search_fixed")&&(e+="_persistent");var r="module",n=d(t.target);if(n){var i=n.getAttribute("data-datetype");r=i?i.toLowerCase():"none"}else c.hasClass(t.target,"caret-down")&&(r="caret");a.trackEvent(e,"click",r)}}var v=new r("DatePicker-clicked"),k=i.querySelectorArray(u,"[data-datetype]"),y=k.reduce(function(t,e){return t[e.getAttribute("data-datetype")]=e,t},{});return t.on("dateSelected",f),k.forEach(function(t){o(t,function(t){p(t,this,l)},!0)}),u.addEventListener("click",p),v.popPrimaryPicker=function(){var e=document.querySelector("[data-primary-datepicker]");e&&t.gatherDates(e,null,l)},v.openCalendar=p,v};return u});
require(["ta/prwidgets"],function(e){var a=e.define.bind(e,"datepickers_attraction_range_dates","handlers",["handlers"]);a(["widget","common/Radio","mixins/page-dates/default-dates","common/DatePicker"],function(e,a,n,r){"use strict";var t=r(e.element,!1);return a("search").on("popDatePicker",function(){t.popPrimaryPicker()}),n.apply(e.element,!1,"ATTRACTIONRANGE"),{openCalendar:t.openCalendar}})});
define("mixins/page-dates/picker-autoadvance-utils",[],function(){var e={};return e.keepOverlayOpenOnSelection=function(e){for(var n=document.querySelectorAll(".ui_overlay"),r=0;r<n.length;r++){var t=n[r].overlay,a=t&&t.sourceElement;if(a===e){t.dontHideOnSelection=!0;break}}},e});
define("mixins/page-dates/picker-autoadvance-attractions",["mixins/page-dates/DateTypeStore","mixins/page-dates/picker-autoadvance-utils","utils/domUtils"],function(e,t,a){"use strict";function i(i){var n=ta.page;n&&n.on("dateSelected",function s(r,o,d){if(!a.isOrContainsElement(document.body,i))return void n.off("dateSelected",s);if(r&&a.isOrContainsElement(i,r)){var p=e.getCorrespondingDateType(o);if(p&&e.isStartDateType(o)){n.pushDates(null,p,[d[0]]);var u=i.querySelector('[data-datetype="'+p+'"]');u&&(t.keepOverlayOpenOnSelection(r),setTimeout(n.gatherDates.bind(n,u)))}}})}return{apply:i}});
define("common/PersistentBar",["api-mod","ta/Core/TA.Event","common/trackingStreams","utils/responsive","utils/throttle","utils/classnameUtils","utils/domEventUtils"],function(e,t,i,n,s,o,r){function a(a,d,l){function f(){var e=!o.hasClass(d,"fixed");n.mobile()?e||v():e&&a.getBoundingClientRect().top<=0?u():!e&&a.getBoundingClientRect().top>0&&v()}function c(){var e=d.offsetHeight;a.style.height=e?e+"px":""}function u(){c(),o.addClass(d,"fixed"),o.addClass(d,l),r.addEvent(window,"resize",m),e.fireEvent(window,"date_bar_undocked"),t.fireEvent("scrollingTabs_updateTabBar",{"height":d.offsetHeight}),g&&i.trackEvent("persistentheader","in_view"),g=!1}function v(){a.style.height="",o.removeClass(d,"fixed"),o.removeClass(d,l),r.removeEvent(window,"resize",m),e.fireEvent(window,"date_bar_docked")}var g=!0,m=s(c,100);return f}return{register:a}});
define("responsive/text-resizer",["babel/babel-helpers","utils/to-array","utils/classnameUtils","utils/throttle","utils/ResponsiveEvents","vanillajs"],function(t,e,i,r,n){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return!t===document&&(t=document.body),e(t.querySelectorAll("."+p)).filter(function(t){return!!t[v]})}function u(e){e.style.fontSize=null;var i=(getComputedStyle(e)||{}).fontSize;if(!i)return{};var r=i.match(b),n=t.slicedToArray(r,3),l=(n[0],n[1]),u=n[2],o=parseFloat(l);return o&&o>.001&&z[u]?{originalSize:o,units:u,multiplier:1,minMult:Math.max(y,z[u]/o)}:{}}function o(t){if(t[v])return t[v];var e=u(t);return e.originalSize?(t[v]=Object.assign(e,{group:t.getAttribute(h),multApplied:1}),t[v]):null}function a(t){for(var e=0;e<g&&t.length;e++)t.forEach(c),t=t.filter(function(t){if(!(t.clientWidth>0)||t.scrollWidth<=t.clientWidth)return!1;var e=t[v],i=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),r=t.scrollWidth-i;if(r<1)return!1;var n=(t.clientWidth-i-2)/r;return n=Math.min(n,.95)*e.multiplier,n<=e.minMult?(e.multiplier=e.minMult,!1):(e.multiplier=n,!0)});t.length&&(t.forEach(c),t.forEach(function(t){t.scrollWidth>t.clientWidth&&(t[v].multiplier=t[v].minMult)}))}function c(t){var e=t[v];if(!(e&&e.multApplied!=e.multiplier&&e.multiplier>0))return!1;var i=Math.max(z[e.units],e.originalSize*e.multiplier);return t.style.fontSize=""+i+e.units,e.multApplied=e.multiplier,!0}function s(t){if(t&&t.length){var e={};t.forEach(function(t){var i=t[v];i.group?e[i.group]=1:c(t)}),Object.keys(e).length&&(t=l(document.body).filter(function(t){var i=t[v],r=i.group;return!!(i&&r&&e[r]&&i.multiplier>0)&&(e[r]>i.multiplier&&(e[r]=i.multiplier),!0)}),t.forEach(function(t){var i=t[v];i.multiplier=e[i.group],c(t)}))}}function f(t){if(t&&(E||(E=!0,f(document.body),t!==document&&t!==document.body))){var c=e(t.querySelectorAll("."+m));if(c.length){c.forEach(function(t){i.removeClass(t,m),i.addClass(t,p)});var h=[];c=c.filter(function(t){var e=o(t);return!!e||(h.push(t),!1)}),a(c),h.forEach(function(t){i.removeClass(t,p),i.addClass(t,m)}),s(c),S||(window.addEventListener("resize",r(function(){d(document.body)},50)),n.on("breakpoint",function(){l(document.body).forEach(function(t){return Object.assign(t[v],u(t))})}),S=!0)}}}function d(t){var e=l(t);a(e),s(e)}var m="autoResize",p="__resizeWatch",h="data-sizegroup",v="__resizerContext",g=4,y=.5,b=/^(\d+(?:\.\d+)?)(.*)$/,z={px:8.5,em:.5,pt:6,"%":50},E=!1,S=!1;return{init:f,refresh:d}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"trip_search_attractions","handlers",["handlers"]);t(["placement","utils/domEventUtils","utils/throttle","common/Radio","utils/responsive","utils/ResponsiveEvents","mixins/page-dates/picker-autoadvance-attractions","hotels/HotelsRadioHelper","common/PersistentBar","responsive/text-resizer"],function(e,t,n,r,s,a,i,o,l,c){function d(e){r("trip_search").trigger("clear_dates",e)}var p=document.getElementById(e.id),u=document.getElementById("PERSISTENT_TRIP_SEARCH_BAR"),m=l.register(p,u,"persistent_trip_search_fixed");return t.addEvent(window,"scroll",n(m,100)),a.onUnder("tablet",m),a.onOver("tablet",m),r(o.channels.ELEMENT).reply(o.elementMessages.PERSISTENT_OFFSET,function(){return u&&!s.mobile()?u.offsetHeight:0}),m(),i.apply(p),c.init(p),ta.page&&ta.page.on("newPageTravelInfo",c.refresh.bind(null,p)),{clearDates:d}})});
define("ta/prwidgets",["vanillajs","ns-exporter","purify","amdloaders"],function(e,t,r,n){function i(e,t){var r,n=this.element._prWidgetContext;return"string"==typeof e?(e=[e],r=a(n.widget.name,e),r=r[0]&&y(r[0]),r=r&&o(n,e,[r]),r&&r[0]):(e=e.slice(),void y(a(n.widget.name,e),function(){var r=o(n,e,arguments);t&&t.apply(null,r)}))}function a(e,t,r){var n=m[e];if(!n)return[];t=t.slice();for(var i=0;i<t.length;++i){var a=t[i],o=a.replace(/^[a-z]+!/,""),l=a.substring(0,a.length-o.length);"trhtml!"===l||("widget"===o?t[i]=null:n["trjs!"===l?o:a]&&(t[i]=l+"$prw/"+e+"/"+o))}return t}function o(e,t,r){var n,i;if(r=Array.prototype.slice.apply(r),0===t.length)return r;var o=m[e.widget.name];if(r.length<t.length)for(n=a(e.widget.name,t);(i=r.length)<t.length;)n[i]?r.push(y(n[i])):r.push(null);for(var i=0;i<t.length;++i){var l=t[i].replace(/^trjs!/,"");e[l]?r[i]=e[l]:o[l]&&"function"==typeof r[i]&&(r[i]=r[i].call(null,e))}return r}function l(e){e._prWidgetContext=this.element._prWidgetContext}function u(e){var t,r,n,a,o,u;if(e&&!e._prWidgetContext&&(t=e.getAttribute("data-prwidget-init"),"string"==typeof t&&(n=e.getAttribute("data-prwidget-name")))){t=f(t),o=f(e.getAttribute("data-scriptFlags")).reduce(function(e,t){return e[t]=!0,e},{});var p=t.length;if(u=e.getAttribute("data-prwidget-deferred")){u=f(u);for(var a=0;a<u.length;a++)t.push(u[a])}var d=m[n];for(d||(m[n]=d={}),r={},a=0;a<t.length;a++)d[t[a]]=!0;r.widget={"name":n,"element":e,"modules":t,"flags":o,"markMine":l,"require":i},e._prWidgetContext=r,r.widget.require(t.slice(0,p),function(){if(e._prPendingClick){var t=e._prPendingClick;e._prPendingClick=void 0,t.key===s&&window.setTimeout(function(){h.call.apply(h,t.args)},0)}})}}function f(e){return"string"!=typeof e?[]:e.match(/[^\s,]+(\s+[^\s,]+)*/g)||[]}function p(e){var t=e._prWidgetContext;if(t)return t;for(e=e.parentNode;e&&e.hasAttribute;e=e.parentNode){if(t=e._prWidgetContext)return t;if(e.hasAttribute("data-prwidget-init"))break}}function d(e){for(var t=e;t&&t.hasAttribute;t=t.parentNode)if(t.hasAttribute("data-prwidget-init"))return t}function g(e){e&&e.nodeName&&w.test(e.className||"")&&(e.className=(e.className||"").replace(w,""))}function c(e){e&&e.nodeName&&!w.test(e.className||"")&&(e.className=(e.className||"")+" handlerLoading")}var s,h={},v=define,y=require,m={},w=/\bhandlerLoading *\b/g;return h.define=function(e,t,r,n,i){if(t=t.replace(/\.js$/i,""),"[object Array]"!==Object.prototype.toString.call(n)&&(n=[]),r&&r.length){var l=m[e];l||(m[e]=l={});for(var u=0;u<r.length;u++)l[r[u]]=!0}v("$prw/"+e+"/"+t,a(e,n),function(){var e=Array.prototype.slice.apply(arguments);return function(r){return r[t]||(r[t]=i.apply(null,o(r,n,e))),r[t]}})},h.redefine=function(e,t){return y.undef&&y.undef("$prw/"+e+"/"+t),h.define.apply(this,arguments)},h.getjs=function(e,t){var r=p(e);if(r&&"string"==typeof t)return r.widget.require(t)},h.initWidgets=function(e,t){var n,i;if(e||(e=document),"string"!=typeof e||(e=document.getElementById(e))){if(!t&&(e=r(e,!0),e.forEach))return void e.forEach(function(e){h.initWidgets(e,!0)});for(n=e.querySelectorAll(".prw_rup"),i=0;i<n.length;i++)u(n[i]);for(n=e.querySelectorAll(".prw_dyn"),i=0;i<n.length;i++)u(n[i])}},h.getWidgetElement=function(e,t){return t=t||document.body,t.querySelector(".prw_"+e)},h.call=function(e,t,r,n){if("string"!=typeof e||!r)throw"ta.prwidgets.call() requires method, event||null, element";var i=p(r),a=t&&("click"===t.type||"submit"===t.type);if(a&&(t&&t.preventDefault&&t.preventDefault(),s=void 0),!i){if(a){var o=d(r);o&&!o._prWidgetContext&&(s={},o._prPendingClick={key:s,args:Array.prototype.slice.call(arguments,0)})}return!1}var l=e.match(/^((?:[^\/]+\/)*[^\/\.]+)\.([^\/]*)?$/),u=l[1];l=l[2].split(".");var f=Array.prototype.slice.call(arguments,1),h=function(t){g(r);for(var n=void 0;l.length>0&&t;)n=t,t=t[l.shift()];if("function"!=typeof t)throw"ta.prwidgets.call: '"+e+"' is not a function";return t.apply(n||{},f),!1};return i[u]?h(i[u]):void((a||require.defined("$prw/"+i.widget.name+"/"+u))&&(c(r),i.widget.require(["trjs!"+u],h)))},t.exportTo(h,"ta.prwidgets"),h});
define("mobile/lite/image-loader",["utils/throttle","vanillajs"],function(e){"use strict";function t(t,n){n=n||document,u=t||0;var i=Array.prototype.filter.call(n.querySelectorAll("["+a+"]"),r());if(0!=i.length){var o=e(function(e){i=i.filter(r()),0==i.length&&(window.removeEventListener("scroll",o),window.removeEventListener("resize",o))},200);window.addEventListener("scroll",o),window.addEventListener("resize",o)}}function r(){return function(e){if(!document.body.contains(e))return!1;try{if(!i(e))return!0}catch(e){return!1}var t=e.getAttribute(a);return!t||("IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(a),!1)}}function n(e){e=e||document;var t=e.querySelectorAll("["+a+"]");Array.prototype.filter.call(t,r())}function i(e){var t=e.getBoundingClientRect();return t.width>0&&t.height>0&&t.top+u>=0&&t.top-u<=window.innerHeight}function o(){return function(e){var t=e.getAttribute(a);return!t||("IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(a),!1)}}function l(e){e=e||document;var t=e.querySelectorAll("["+a+"]");Array.prototype.filter.call(t,o())}var a="data-lazyurl",u=0;return{init:t,demandLoadImages:n,forceLoadImages:l}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"attraction_coverpage","handlers",["handlers"]);t(["placement","lib/jquery-amd","ta/prwidgets","shelves/shelfEventHandlers","mobile/lite/image-loader"],function(e,t,n,r,i){function a(r,a){function o(e){u.html(e),n.initWidgets(u.get(0)),i.init(200),t(document).trigger("datesShelvesSuccess")}function s(){t(document).trigger("datesShelvesFailure")}function c(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]=r&&r.constructor===Array?r.join():r}return t}if(a){var l={skipLocation:!0},d=c(t.extend(l,a)),u=t("#"+e.id);e.requestAJAXPlacement(o,s,d)}}return t(document).on("loadAttractionCoverpage",a),r.initShelfListeners(),{}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"attraction_day_trip_shelf","handler",["handler"]);e(["placement","ta/prwidgets"],function(t,e){function a(){var a=document.getElementById(t.id),i=a.querySelector(".attractions_coverpage_widget");if(i){var n=i.getAttribute("data-geo-id"),d=i.getAttribute("data-dest-geos"),r=i.getAttribute("data-category-id");n&&d&&r&&t.requestAJAXPlacement(function(t){a.innerHTML=t,e.initWidgets()},function(){},{"data-geo-id":n,"data-dest-geos":d,"data-category-id":r})}}return ta.queueForReady(a),{}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"attraction_filters_clarity","handlers",["handlers"]);e(["placement","ta","lib/jquery-amd","utils/urlDecoder","ta/Core/TA.Record"],function(t,e,n,r,a){function i(t,e,n,a){return r.goToLink(t,e,n,a)}function o(t,n,r){return e.servlet.Attractions.narrow.trackEvent(t,n,r)}function c(t,n,r){return e.servlet.Attractions.narrow.trackAndAjax(t,"attraction_filter",n,r)}function l(t){t.currentTarget.parentElement.getElement(".collapse").toggleClass("hidden"),t.currentTarget.toggleClass("hidden")}function u(t,r,a,i){t.preventDefault(),e.trackEventOnPage("attraction_filter",r,a),n("."+i).addClass("is-active"),t.stopPropagation()}function s(t,e,n,r,i,c){c||i&&0===i.indexOf("#")?o(e,n,r):(t.preventDefault(),a.setEvtCookie(e,n,r,!1,i),window.location.href=i)}return{"goToLink":i,"trackEvent":o,"trackAndAjax":c,"toggleVisibility":l,"openModal":u,"trackPopularThemeClick":s}})});
require(["ta/p13n/placements"],function(a){var r=a.define.bind(a,"attraction_promo_header","handlers",["handlers"]);r(["placement","ta","lib/jquery-amd"],function(a,r,e){var t=function(a){return e(".attraction_promo_header").find(".ui_modal_card").addClass("is-active"),r.trackEventOnPage("attraction_promo_click","terms","",a,!1),!1},n=function(a){return e(".attraction_promo_header").find(".ui_modal_card").removeClass("is-active"),!1};return{showPromoTermsDialog:t,hidePromoTermsDialog:n}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"attraction_returning_users","handlers",["handlers"]);n(["babel/babel-helpers","placement","lib/jquery-amd","ta","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,n,r,a,t,s){function d(){var e=void 0;c=document.getElementById(n.id),l=r(c).find(".urgencyMessageWrapper"),s.enabled&&(e=s.getSessionKey("attrUrgencyMessage:closedByUser")),e||l.removeClass("hidden"),o()}function i(){s.enabled&&s.setSessionKey("attrUrgencyMessage:closedByUser","true"),t.trackEventOnPage("Attractions","urgency_close_click",""),l.addClass("hidden")}function o(){var e=l.data("tracking-property");e&&t.trackEventOnPage(e,"Impression","")}a.queueForLoad(d);var c=void 0,l=void 0;return{dismiss:i}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"attraction_viator_categories","handlers",["handlers"]);t(["placement","ta","utils/urlDecoder"],function(e,t,n){"use strict";function o(){window.addEvent("onAttractionFilterChange",function(){g(document.getElementById(e.id))})}function r(){t.trackEventOnPage("A_Product_SeeMore","More Categories","See More",0,!1);var n=document.getElementById(e.id),o=n.getElement(".more_groups"),r=n.getElement(".see_more_groups"),a=o.getElements(".tile_container.primary img");i(a),o.removeClass("hidden"),r.addClass("hidden"),g(document.getElementById(e.id))}function a(e){t.trackEventOnPage("A_Product_SeeMore","More Categories","See More",0,!1),window.open(e,"_blank")}function i(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t],o=n.get("src");o&&o.length||n.set("src",n.get("data-lazy-src"))}}function d(t,n){var o=!!u[n];if(o){l(n);var r=t.get("data-show-label");t.set("html",r)}else{s(n);var a=t.get("data-hide-target");if("true"===a)t.addClass("hidden");else{var i=t.get("data-hide-label");t.set("html",i)}}g(document.getElementById(e.id))}function s(n){t.trackEventOnPage("A_Product_SeeMore","Categories","See More",n,!1);var o=document.getElementById(e.id),r=o.getElement(".top_picks_section.group_"+n);if(r){var a=r.getElement(".more_top_picks"),d=a.getElements("img");i(d),a.removeClass("hidden"),u[n]=!0}}function l(n){t.trackEventOnPage("A_Product_SeeMore","Categories","See Less",n,!1);var o=document.getElementById(e.id),r=o.getElement(".top_picks_section.group_"+n);if(r){var a=r.getElement(".more_top_picks");a.addClass("hidden"),u[n]=!1}}function c(e,o,r,a){t.stopEvent(window.event);var i=e.getParent("div.top_picks_section"),d=e.getParent("div.tile");if(i){for(var s=(i.get("data-group-row"),i.getElements("div.tile")),l=0,c=0;c<s.length;c++)if(s[c]==d){l=c+1;break}var g=d.get("data-special-offer");if(g)var u="specialOffer: "+d.get("data-product");t.trackEventOnPage("A_Product_Tile_Click",r,u,l,!1)}return""!==o?(window.open(o,"_blank"),new Event(a).stopPropagation()):n.goToLink(a,e),!1}function g(e){e&&t&&t.util&&t.util.element&&t.util.element.autoResizeTextInNode&&t.util.element.autoResizeTextInNode(e)}t.trackEventOnPage("Attraction_Categories_Module","Impression","visible",0,!0),t.queueForLoad(o);var u={};return{openAttractionProducts:a,showMoreGroups:r,toggleGroup:d,moreInfo:c,reset:function(){u={}}}})});
require(["ta/prwidgets"],function(e){var a=e.define.bind(e,"attractions_curated_shopping_carousel","handlers",["handlers"]);a(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,a,n){"use strict";function r(e){var a=o.find(c+l),n=a.data("idx")+e;t(n)}function t(e){var r=o.find(c);r.removeClass(s),e<=0?(e=0,o.find(".left_nav").addClass("hidden")):o.find(".left_nav").removeClass("hidden"),e>=r.length-1?(e=r.length-1,o.find(".right_nav").addClass("hidden")):o.find(".right_nav").removeClass("hidden"),a(r[e]).addClass(s);var t=o.find(".buttonStyle");t.removeClass("selected"),a(t[e]).addClass("selected"),n.trk("shopping_carousel_select",!1,r[e])}function d(e){var a;a=e?e+"_carousel_click":"shopping_carousel_click",n.setEvtCookieAndPath(a)}var i,s="currentCarousel",l=".currentCarousel",c=".curated_carousel_wrap",o=a(e.element),u=function(){var e={};ta.SwipeHandler&&(e.onForward=function(){r(1)},e.onBackward=function(){r(-1)},i=new ta.SwipeHandler(o[0],e))};return u(),{selectImage:t,advanceImage:r,trackCarouselClick:d}})});
define("utils/ellipsis",["lib/jquery-amd"],function(t){"use strict";var i=function(i,e){if(null!=i){var l="…",n=t(i),r=n.height(),s=n.data("overview"),o=0,u=s.length,f=u;if(n.text(s),i.scrollHeight>r){for(;u-o>1;){var a=Math.floor((o+u)/2),c=s.substr(0,a)+l;n.text(c),i.scrollHeight<=r?(o=a,f=a):u=a}n.text(s.substr(0,f)+l)}e&&e(s.length-f)}},e=function(e,l){i(e,l),t(window).resize(function(){i(e,l)})};return{initEllipsis:e}});
require(["ta/prwidgets"],function(i){var t=i.define.bind(i,"attractions_curated_shopping_description","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Event","ta/Core/TA.Record","utils/ellipsis"],function(i,t,n,e,r){function a(i){o.find("span.more").each(function(){i>0?t(this).show():t(this).hide()})}var o=t(i.element),d={};return d.more=function(i){var t;t=i?i:"shopping_description_click",o.find(".ui_modal_card").addClass("is-active"),e.trk(t)},d.trackExternalDesc=function(i){var t;t=i?i:"shopping_description_click",e.setEvtCookieAndPath(t)},o.find(".description_container").each(function(){r.initEllipsis(this,a),o.find(".modal-card-body").text(t(this).data("overview"))}),d})});
require(["ta/p13n/placements"],function(i){var t=i.define.bind(i,"curated_shopping_list_overview","handlers",["handlers"]);t(["placement","lib/jquery-amd","ta/Core/TA.Record","utils/ellipsis"],function(i,t,n,e){"use strict";function o(i){t(r).toggleClass("curatedShopContainer",i)}function c(){window.addEvent&&window.addEvent("onAttractionFilterChange",function(){o(t("#CURATED_SHOP_SEE_MORE").length?!0:!1),s()}),s()}function s(){t(".premium_detail .description_container, .free_shop_right_wrap .description_container").each(function(){e.initEllipsis(this)})}var r="#"+i.params.seeMoreToggleSelector,a={};return a.seeAllShops=function(i){n.trk("shopping_list_seeall_click"),t(i).addClass("hidden"),o(!1)},a.trackGeoDescriptionClick=function(){n.setEvtCookieAndPath("shopping_list_geo_description_click")},a.trackPremiumShopClick=function(){n.setEvtCookieAndPath("shopping_list_premium_click")},a.trackCuratedShopClick=function(){n.setEvtCookieAndPath("shopping_list_curated_click")},a.trackCouponClick=function(){n.setEvtCookieAndPath("shopping_list_coupon_click")},c(),a})});
