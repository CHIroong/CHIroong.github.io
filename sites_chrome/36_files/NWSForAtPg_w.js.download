
// sns_scroll, ad_scroll vars
var pState, pStatePre, pTop1, pTop2, pLeft1, pLeft2, pHeight1, pHeight2, pHeight;
function sns_window_resize() { // sns_scroll, ad_scroll resize
    if ($('.social_bind').length > 0 && $('.atc_btns').length) {
        pState = 0;
        pStatePre = 0;
        pTop1 = $('.social_bind').offset().top + $('.social_bind').height();
        pTop2 = $('.atc_btns').offset().top;
        pLeft1 = $('.stitle').offset().left - 92;
        pLeft2 = pLeft1 - 39;
        pHeight1 = $('.sns_scroll').height();
        pHeight2 = $(".ad_scroll").height()
        pHeight = pHeight1 + pHeight2 + 14;
        sns_window_scroll();
    }
    $(".cssTWCnt").hide();
}

function sns_window_scroll() { // sns_scroll, ad_scroll scroll
    var scTop = $(window).scrollTop();
    if (scTop < 350) sns_window_state(1); // initial ad
    else if (scTop < pTop1) sns_window_state(2); // sns_sm viewable, view ad
    else {
        if ($('#footer_area').length > 0) {
            var pEnd = $('#footer_area').offset().top + $('#footer_area').height();
            if (scTop + pHeight < pEnd) {
                if (scTop + $(window).height() < pTop2) sns_window_state(3); // view all
                else sns_window_state(2); // newsinfo viewable, view ad
            }
            else if (scTop + pHeight2 < pEnd) sns_window_state(2); // view ad
            else sns_window_state(4); // hide all
        }
    }
}

function sns_window_state(st) { // sns_scroll, ad_scroll state
    if (pState == st) return;
    pStatePre = pState;
    pState = st;
    if (pState == 3) {
        $(".sns_scroll").css({ 'top': '5px', 'left': pLeft1 + 'px', 'position': 'fixed' });
        $(".sns_scroll").fadeIn('slow');
        $(".ad_scroll").css({ 'top': (pHeight1 + 9) + 'px', 'left': pLeft2 + 'px', 'position': 'fixed' });
        $(".ad_scroll").show();
    }
    else {
        if (pStatePre == 3) $(".sns_scroll").fadeOut('slow', function() { sns_window_state_ad(); });
        else {
            $(".sns_scroll").hide();
            sns_window_state_ad();
        }
    }
}

function sns_window_state_ad() { // ad_scroll state
    if (pState == 1) {
        $(".ad_scroll").css({ 'top': '350px', 'left': '-131px', 'position': 'absolute' });
        $(".ad_scroll").show();
    }
    else if (pState == 2) {
        $(".ad_scroll").css({ 'top': '5px', 'left': pLeft2 + 'px', 'position': 'fixed' });
        $(".ad_scroll").show();
    }
    else if (pState == 4) $(".ad_scroll").hide();
}

$(function() {
    // 포토 설명 맞추기
    $(".imagebox").each(function() {
        var pWidth = $(this).find(".photo").outerWidth();
        $(this).find(".desc").css("width", pWidth + "px");
    });


    // 트위터 카운트 안 보이게
    $(".sub_link").find("a[href*='TAB_GB=tweet']").hide();

    // 박스기사 처리
    if ($("table[id='BoxTable']").length) {
        $("table[id='BoxTable']").wrap("<div class='textbox'></div>");


        $('.boxtitle, #BoxTr').attr('style', 'color: #999999; font-weight: bold; padding-left:10px;');
        $('td[id="BoxTd"], .boxconts').attr('class', 'article_box');

        $("table[id='BoxTable']").css("font-family", "");
        $("table[id='BoxTable']").css("font-size", "13px");
        $("table[id='BoxTable']").css("padding-bottom", "10px");
        $("table[id='BoxTable']").find(".article_box").css("font-size", "13px");
        $("table[id='BoxTable']").find(".photoCenter").css("margin-bottom", "15px");
        $("table[id='BoxTable']").before("<br>");
    }


    //
    $(".cssDesc").each(function() {
        if ($(this).outerWidth() > 600) {
            $(this).css("width", "600px");
        }
    });

    $(".photo_boder ").each(function() {
        if ($(this).outerWidth() > 600) {
            $(this).css("width", "600px");
        }
    });

    // 최종면 일때
    if (location.href.indexOf("at_pg_w") > -1) {
        $('#news_wrap').attr('id', 'atc_wrap');
    }
    // 청소년 일때
    if ($(".t_stit").html() == "청소년") {
        $(".t_stit").after("청소년");
        $(".t_stit").remove();
    }


    // 2012 파일 없을때
    if (GetObject("hdnIsOld")) {
        if (GetObject("hdnIsOld").value == "true") {
            // 이미지태그에 onload 제거
            $("img").removeAttr("onLoad");

            // 이미지설명 부분 style 재설정
            $('table:.photoCenter').find('table:first').find("td:first").attr('style', 'font-size:11px;line-height:15px; color:#9ea2a7; padding-bottom:10px;');

            // 편집자의 말
            if ($('.f11').length > 0) {
                $('.f11').parent().parent().parent().parent().attr('style', 'border:solid 1px #e1e1e1; margin-bottom:20px;');
                $('.f11').parent().attr('class', 'editor_text');
                $('.f11').html('[편집자말]');
            }

            // 박스기사 디자인 맞추기
            $('.boxtitle, #BoxTr').attr('style', 'COLOR: #999999; FONT-SIZE: 12px; FONT-WEIGHT: bold; padding-left:10px;');
            $('td[id="BoxTd"], .boxconts').attr('class', 'article_box');


        }
    }


    // 공유하기 레이어
    $('body').on({
        "mouseover": function(event) {
            if ($(event.target).closest('.btn_ly1, .nsns').length) {
                $('.nsns').show();
                $('.url_ar').hide();
                $('#url_ar3').hide();
            }
            else $('.nsns').hide();

            if ($(event.target).closest('.btn_ly4, .ft_size').length) {
                $('.ft_size').show();
                $('.url_ar').hide();
                $('#url_ar3').hide();
            }
            else $('.ft_size').hide();



        }
        ,
        "click": function(event) {
            // url줄이기
            var pObj = $(event.target).closest('.sm, .url');
            if (pObj.length > 0) {
                if (pObj.find('p:visible').length > 0) {
                    if (!$(event.target).closest('.url_ad, .url_ar, #url_ar3').length) {
                        pObj.find('p').hide();
                    }
                }
                else {
                    pObj.find('p').show();
                    if (pObj.find('.input_url').val() == "") {
                        // 클립보드에 복사
//                        clip = new ZeroClipboard.Client();
//                        clip.setHandCursor(true);
//                        if (pObj.attr('class') == "sm")
//                            clip.glue('btn_copy', 'url_ad');
//                        else {
//                            clip.glue('btn_copy2', 'url_ar2');
//                            clip.glue('btn_copy3', 'url_ar3');
//                        }
//                        clip.addEventListener('mouseOver', function(client) {
//                            clip.setText(pObj.find('.input_url').val());
//                        });
                        var pShortUrl = GetShortUrl(GetObject('hdnCNTN_CD').value, "");
                        pObj.find('.input_url').val(pShortUrl);
                        pObj.find('.input_url').attr('readonly', 'true');
                    }
                }
            }
            else {
                $('.url_ar').hide();
                $('.url_ad').hide();
                $('#url_ar3').hide();
            }


            if (!$(event.target).closest('.ulJimLayer, .reporter').length) {
                $('.ulJimLayer').hide();
            }


            if ($(event.target).closest('.btn_ly1, .nsns').length) {
                $('.nsns').toggle();
                $('.url_ar').hide();
                $('#url_ar3').hide();
            }

            if ($(event.target).closest('.btn_ly4, .ft_size').length) {
                $('.ft_size').toggle();
                $('.url_ar').hide();
                $('#url_ar3').hide();
            }

            // 공유하기 더보기 토글
            if ($(event.target).closest('.more, .morebox').length) $(".morebox").show();
            else $(".morebox").hide();

            // 하단 공유하기 버튼 지우기
            if (!$(event.target).closest('.more_btn, .morebox_down').length) {
                $('.morebox_down').hide();
            }

            // 카드뉴스 날개 감추기
            if (!$(event.target).closest('.cardlist_open, .openm').length) {
                $(".cardlist_open").hide();
                $(".openm").removeClass("on");
                $(".openm").attr("onclick", "ShowCardWing(true, this)");
            }
            
            if (!$(event.target).closest('.btn_else, .lielse, .copy-button4').length) {
                $(".btn_else").hide();
            }
        }
    });

    // 점수주기 dragable
    if ($("#imgPointer").length > 0) {
        var pUpNum = $('.g_up').html();
        var pDownNum = $('.g_down').html();
        var pNum = 0;
        $("#imgPointer").draggable({
            grid: [20, 0],
            axis: "x",
            containment: ".point_area",
            drag: function(event, ui) {
                pNum = ($(this).position().left - 110) / 20;
                if (pNum > 0) {
                    $('.g_up').html('+' + pNum);
                    $('.g_down').html(pDownNum);
                }
                else if (pNum < 0) {
                    $('.g_down').html(pNum);
                    $('.g_up').html(pUpNum);
                }

                $('.point_area').find('li').hide();
                $('.point_area').find('li[pnum="' + pNum + '"]').show();
            },
            stop: function(event, ui) {
                if ($(this).position().left == 110) {
                    $('.g_up').html(pUpNum);
                    $('.g_down').html(pDownNum);
                }
                else {
                    $("#imgPointer").draggable('destroy');
                    $("#imgPointer").css('cursor', 'default');

                    var pStr = $.ajax({
                        url: "/NWS_Web/Common/Pages/CommAjaxFunction.aspx",
                        async: false,
                        type: "POST",
                        data: ({
                            std: "insertrate",
                            num: pNum,
                            CNTN_CD: GetObject("hdnCNTN_CD").value
                        })
                    }).responseText;

                    if (pStr.indexOf('OK') > -1) {
                        var arrNUM = pStr.split('|');
                        $('#pNUM').html(arrNUM[1] + "<span>점</span>");
                        $('.g_up').html("+" + arrNUM[0]);
                        $('.g_down').html("-" + $.trim(arrNUM[2]));
                    }
                    else {
                        alert(pStr);
                    }
                }
            }
        });


        // 점수초기화
        $("#imgPointer").css('left', '110px');
        if (GetObject("hdnSelfNum").value != "0") {
            var pSelfNum = Number(GetObject("hdnSelfNum").value) * 20;
            var pLeft = Number($("#imgPointer").css('left').replace('px', '')) + pSelfNum;

            $("#imgPointer").css('left', pLeft + 'px');
            $("#imgPointer").draggable('destroy');
            $("#imgPointer").css('cursor', 'default');

            $('.point_area').find('li').hide();
            $('.point_area').find('li[pnum="' + GetObject("hdnSelfNum").value + '"]').show();
        }
    }


    // 이시각 주요 컨텐츠 이전, 다음
    $('.btn_mpre').click(function() {
        var pObj = $('.list_pic:visible').prev();
        if (pObj.attr('class') == 'list_pic') {
            $('.list_pic').hide();
            pObj.show();

            $('#emPage').html(pObj.index());
        }
    });
    $('.btn_mnext').click(function() {
        var pObj = $('.list_pic:visible').next();
        if (pObj.attr('class') == 'list_pic') {
            $('.list_pic').hide();
            pObj.show();
            $('#emPage').html(pObj.index());
        }
    });

    // 웹접
    //$(".photoCenter").find("img").attr("alt", "기사 관련 사진");


    // 좌측날개 트위터, 댓글, 점수, 원고료 카운트
    $(".cssTWCnt").html($(".tw").next().html());
    //$(".cssRPCnt").html($(".sreply").next().html());
    $(".cssRPCnt").html($(".rp_b").html());
    //    if ($("#pNUM").length > 0) $(".cssSCCnt").html($("#pNUM").html().replace("<span>점</span>", ""));
    //    else $("#liNum").hide();

    if ($("#top_recm").length > 0) $(".cssSCCnt").html($("#top_recm").html().replace("<span class=\"sym-s_off\">공감</span>", "").replace("<span class=\"sym-s_on\">공감</span>", ""));
    if ($(".sym-s_off").length > 0) $(".cssSCCnt, .cssSCdt").removeClass("good_on").addClass("good_off");

    $("#aSCLink").click(function() {
        if ($(".sym-s_off").length > 0)
            Set_RECM('T', GetObject("hdnCNTN_CD").value);
        else
            Set_RECM('F', GetObject("hdnCNTN_CD").value);
    });

    //if ($(".cssPYCnt").length > 0 && $(".ar2:last").length > 0) $(".cssPYCnt").html($(".ar2:last").html().replace("<span>원</span>", ""));

    if ($(".cssPYCnt").length > 0 && $(".money").length > 0) $(".cssPYCnt").html($(".money").html());
    if ($(GetObject("hdnTEN_COUNT")).length > 0) 
        $(".cssTENCnt").html(GetObject("hdnTEN_COUNT").value);
        $("#emClubCount").html(GetObject("hdnTEN_COUNT").value);
    // 좌측날개 트위터, 댓글, 점수, 원고료 링크
    $("#aFBLink").attr("href", $(".fb").attr("href"));
    $("#aTWLink").attr("href", $(".tw").attr("href"));
    //$("#aRPLink").attr("href", $(".sns_sm > ul > .rp > a").attr("href"));
    //$("#aSCLink").attr("href", "/NWS_Web/Ranking/index.aspx");
    //$("#aPYLink").attr("href", $(".ar4:first > a").attr("href"));
    $("#aPYLink").attr("href", $(".btn-fee").attr("href"));
    $("#aPYLink").click(function() {
        WinOpen("/NWS_Web/Articleview/article_goodfee_write.aspx?CNTN_CD=" + GetObject("hdnCNTN_CD").value, 600, 700, "_write", "no", "no");
    });

    // 우측 분야별 기사 더보기 따라다니기
    std_scroll();

    // 좌측 sns
    sns_window_resize();

    // 페이스북 공유 카운트
    var pFbUrl = $("meta[property='og:url']").attr("content");
    pFbUrl = escape(pFbUrl);
    //    var pCNTN_CD = $("#ctl00_cphNWS_hdnCNTN_CD").val();
    //    if (pCNTN_CD == "A0002002516" || pCNTN_CD == "A0002002541" || pCNTN_CD == "A0002002622" || pCNTN_CD == "A0002002638") pFbUrl = escape("http://www.ohmynews.com/NWS_Web/View/at_pg.aspx?CNTN_CD=" + GetObject("hdnCNTN_CD").value);

    $.ajax({
        url: "https://graph.facebook.com/",
        type: "GET",
        data: "fields=share&id=" + pFbUrl,
        dataType: 'jsonp',
        error: function(xhr, status, error) {
            //alert(error);
        },
        success: function(data) {
            var count = 0;
            if (data) {
                if (data.share) {
                    count = data.share.share_count;
                }
            }
            $("#spFbCount").html(count);
            $(".fb_b").html(count);
            $(".cssFBCnt").html(count);
            $(".cssFB_CNT").find(".non").html(count);
            
            if (count == 0) $(".cssFBCnt").remove();
        }
    });

    /*
    $.ajax({
    url: "https://graph.facebook.com/fql",
    type: "GET",
    data: "q=SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url=\"" + pFbUrl + "\"",
    dataType: 'jsonp',
    error: function(xhr, status, error) {
    alert(error);
    },
    success: function(data) {
    var count = 0;
    if (data) {
    if (data.data[0]) {
    count = data.data[0].share_count || 0;
    }
    }
    $("#spFbCount").html(count);
    $(".fb_b").html(count);
    $(".cssFBCnt").html(count);
    }
    });
    */
    // 트위터 공유카운트
    //    $.getJSON("http://urls.api.twitter.com/1/urls/count.json?url=" + pFbUrl + "&callback=?", function(data) {
    //        var pObj = $(".sns_list_ic").find("li:eq(1)").find(".bu_num");
    //        if (pObj.length) {
    //            var pHTML = "<a href='https://twitter.com/search?f=tweets&vertical=default&q=" + GetObject("hdnCNTN_CD").value + "&src=typd' target='_blank' style='height: 18px; position: relative; left: -5px; color: #19B3E9;'>" + data.count + "</a>";
    //            pObj.html(pHTML);
    //        }
    //        if ($(".cssTWCnt").length) {
    //            var pHTML = "<a href='https://twitter.com/search?f=tweets&vertical=default&q=" + GetObject("hdnCNTN_CD").value + "&src=typd' target='_blank' style='color: #19B3E9;'>" + data.count + "</a>";
    //            $(".cssTWCnt").html(pHTML);
    //        }

    //        if ($(".tw_b").length) {
    //            var pHTML = "<a href='https://twitter.com/search?f=tweets&vertical=default&q=" + GetObject("hdnCNTN_CD").value + "&src=typd' target='_blank' style='color: #19B3E9; text-indent: inherit;'>" + data.count + "</a>";
    //            $(".tw_b").html(pHTML);
    //        }

    //        pObj = $(".sub_link").find("a:eq(1)");
    //        if (pObj.length) {
    //            pObj.attr("href", "https://twitter.com/search?f=tweets&vertical=default&q=" + GetObject("hdnCNTN_CD").value + "&src=typd");
    //            pObj.attr("target", "_blank");
    //            pObj.find("strong").html(data.count + "개");
    //        }
    //    });

    // 특정기사에서 ti 광고제거
    //    if (GetObject("hdnCNTN_CD").value == "A0002106388") {
    //        $("#ti_ad_EXP1").hide();
    //    }

});

// 스크롤 이벤트, 좌측, 우측 따라다니는 메뉴
$(window).scroll(function() {
    sns_window_scroll();
    ad_scroll_rt();
    std_scroll();
});


$(window).resize(function() {
    std_scroll();
    sns_window_resize(); // sns_scroll, ad_scroll resize;
});

function ad_scroll_rt() {
    if ($(this).scrollTop() < 165) {
        $(".ad_scroll_rt").css("top", "165px");
    }
    else {
        var pTop = $(this).scrollTop() - 10;
        $(".ad_scroll_rt").css("top", pTop + "px");
    }
}

// 우측 분야별 기사 더보기 따라다니기
function std_scroll() {
    if ($(".more_at_box").length > 0) {
        var pStdTop = $(window).height() - 230 // + $(window).scrollTop();
        $(".more_at_box").css("top", pStdTop + "px");

        var pNewsBodyBottom = $(".news_body").offset().top + $(".news_body").outerHeight();
        var pStdBottom = $(".more_at_box").offset().top + $(".more_at_box").outerHeight();
        //    console.log("pNewsBodyBottom : " + pNewsBodyBottom + ", pStdBottom : " + pStdBottom);
        if (pStdBottom > pNewsBodyBottom) std_Open();
        else std_Close();
    }
}


// 분야별 기사 더보기
var _StdIsMoving = false;
var _StdIsSelf = false;
function std_Close() {
    if (_StdIsSelf != true) {
        if ($(".more_at_box").css("right") == "0px")
            $(".more_at_box").stop().animate({ "right": "-280px" }, 500, function() { _StdIsMoving = false; });
    }

}
function std_Open() {
    if (_StdIsSelf != true) {
        if ($(".more_at_box").css("right") == "-280px")
            $(".more_at_box").stop().animate({ "right": "0px" }, 500, function() { _StdIsMoving = false; });
    }
}



// 기자의 찜,쪽지,RSS .. 정보 레이어
function JimLayer(pMEM_CD) {
    if ($('#a' + pMEM_CD).next().length > 0) {
        if ($('#a' + pMEM_CD).next().attr('class') == 'ulJimLayer') {
            $('#a' + pMEM_CD).next().toggle();
        }
    }
    else {
        var pStr = $.ajax({
            url: "/NWS_Web/Common/Pages/CommAjaxFunction.aspx",
            async: false,
            type: "POST",
            data: ({ std: "jimpopup",
                pMEM_CD: pMEM_CD
            })
        }).responseText;
        $('#a' + pMEM_CD).after(pStr);
    }
}

// 기자 찜하고 빼기
function JimReporter(pGb, pMEM_CD) {
    if (goLoginPage()) {
        var pStr = $.ajax({
            url: "/NWS_Web/mapi/author_select.aspx",
            async: false,
            type: "GET",
            datatype: "xml",
            data: ({ memcd: pMEM_CD, gb: pGb })
        }).responseText;
        xmlDoc = $.parseXML(pStr);
        
        if ($(xmlDoc).find('result').text() == "OK") {
            if (pGb == "1") {
                $('#ul' + pMEM_CD).find('.jim').attr('class', 'r1_1 jim');
                $('#ul' + pMEM_CD).find('.jim').find('a').attr('href', "javascript:JimReporter('2', '" + pMEM_CD + "');").html('찜빼기');

                $('.intro_etc').find('.jim').find('a').attr('href', "javascript:JimReporter('2', '" + pMEM_CD + "');").html('찜빼기');
                $('.intro_etc').find('.jim').attr('class', 'jim_out');

                $('.myinfo00').find('.jim').find('a').attr('href', "javascript:JimReporter('2', '" + pMEM_CD + "');").html('찜빼기');
                $('.myinfo00').find('.jim').attr('class', 'jim_out');

                $('.pf').find('.jim').find('a').attr('class', 'select_on').attr('href', "javascript:JimReporter('2', '" + pMEM_CD + "');").html('찜빼기');
                
                $('.profile-btns').find('.jjim').attr('onclick', "JimReporter('2', '" + pMEM_CD + "');").find("strong").html('구독중');
                $('.profile-btns').find('.jjim').addClass("on");                
            }
            else {
                $('#ul' + pMEM_CD).find('.jim').attr('class', 'r1 jim');
                $('#ul' + pMEM_CD).find('.jim').find('a').attr('href', "javascript:JimReporter('1', '" + pMEM_CD + "');").html('찜하기');

                $('.intro_etc').find('.jim_out').find('a').attr('href', "javascript:JimReporter('1', '" + pMEM_CD + "');").html('찜하기');
                $('.intro_etc').find('.jim_out').attr('class', 'jim');

                $('.myinfo00').find('.jim_out').find('a').attr('href', "javascript:JimReporter('1', '" + pMEM_CD + "');").html('찜하기');
                $('.myinfo00').find('.jim_out').attr('class', 'jim');

                $('.pf').find('.jim').find('a').attr('class', 'select_off').attr('href', "javascript:JimReporter('1', '" + pMEM_CD + "');").html('찜하기');
                
                $('.profile-btns').find('.jjim').attr('onclick', "JimReporter('1', '" + pMEM_CD + "');").find("strong").html('구독하기');
                $('.profile-btns').find('.jjim').removeClass("on");
            }
        }
        else {
            alert($(xmlDoc).find('result').text());
        }
    }
}



// 폰트 크게 작게
function fontReSize(pOption) {
    var pViewFontSize;
    var pBoxFontSize;
    var pEditorFontSize;
    var pChangeSize = 2;

    if (pOption == "s") pChangeSize = -2;
    if ($('.at_contents').length > 0) pViewFontSize = $('.at_contents').css('font-size').replace('px', '');
    if ($('.article_box').length > 0) pBoxFontSize = $('.article_box').css('font-size').replace('px', '');
    if ($('.editor_text').length > 0) pEditorFontSize = $('.editor_text').css('font-size').replace('px', '');

    if ($('.at_contents').length > 0) {
        pViewFontSize = Number(pViewFontSize) + pChangeSize;
        if (pViewFontSize < 11) pViewFontSize = 11;
        if (pViewFontSize > 20) pViewFontSize = 20;
        $('.at_contents').css('font-size', pViewFontSize + 'px');
        $('.at_contents').find('p').css('font-size', pViewFontSize + 'px');
        $('.textbox').css('font-size', pViewFontSize + 'px');
        $('.textbox').find('p').css('font-size', pViewFontSize + 'px');
        
    }
    if ($('.article_box').length > 0) {
        pBoxFontSize = Number(pBoxFontSize) + pChangeSize;
        if (pBoxFontSize < 11) pBoxFontSize = 11;
        if (pBoxFontSize > 20) pBoxFontSize = 20;
        $('.article_box').css('font-size', pBoxFontSize + 'px');
        $('.article_box').find('p').css('font-size', pBoxFontSize + 'px');
    }
    if ($('.editor_text').length > 0) {
        pEditorFontSize = Number(pEditorFontSize) + pChangeSize;
        if (pEditorFontSize < 11) pEditorFontSize = 11;
        if (pEditorFontSize > 20) pEditorFontSize = 20;
        $('.editor_text').css('font-size', pEditorFontSize + 'px');
        $('.editor_text').find('p').css('font-size', pEditorFontSize + 'px');
    }
}


function SlideNews(pID) {

    // 슬라이드 및 카드뉴스
    var options = {
        $FillMode: 1,
        // $AutoPlay: true,                                    //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
        // $AutoPlayInterval: 1500,                            //[Optional] Interval (in milliseconds) to go for next slide since the previous stopped if the slider is auto playing, default value is 3000
        $PauseOnHover: 1,                                //[Optional] Whether to pause when mouse over if a slider is auto playing, 0 no pause, 1 pause for desktop, 2 pause for touch device, 3 pause for desktop and touch device, 4 freeze for desktop, 8 freeze for touch device, 12 freeze for desktop and touch device, default value is 1

        $DragOrientation: 1,                                //[Optional] Orientation to drag slide, 0 no drag, 1 horizental, 2 vertical, 3 either, default value is 1 (Note that the $DragOrientation should be the same as $PlayOrientation when $DisplayPieces is greater than 1, or parking position is not 0)
        $ArrowKeyNavigation: true,   			            //[Optional] Allows keyboard (arrow key) navigation or not, default value is false
        $SlideDuration: 500,                                //Specifies default duration (swipe) for slide in milliseconds
        $Loop: 0,                                          //[Optional] Enable loop(circular) of carousel or not, 0: stop, 1: loop, 2 rewind, default value is 1


        $ArrowNavigatorOptions: {                           //[Optional] Options to specify and enable arrow navigator or not
            $Class: $JssorArrowNavigator$,                  //[Requried] Class to create arrow navigator instance
            $ChanceToShow: 2,                                //[Required] 0 Never, 1 Mouse Over, 2 Always
            $AutoCenter: 2                                  //[Optional] Auto center arrows in parent container, 0 No, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
        },

        $ThumbnailNavigatorOptions: {                       //[Optional] Options to specify and enable thumbnail navigator or not
            $Class: $JssorThumbnailNavigator$,              //[Required] Class to create thumbnail navigator instance
            $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
            $Loop: 0,                                          //[Optional] Enable loop(circular) of carousel or not, 0: stop, 1: loop, 2 rewind, default value is 1
            $ActionMode: 1,                                 //[Optional] 0 None, 1 act by click, 2 act by mouse hover, 3 both, default value is 1
            // $SpacingX: 8,                                   //[Optional] Horizontal space between each thumbnail in pixel, default value is 0
            $DisplayPieces: 7                             //[Optional] Number of pieces to display, default value is 1
            // $ParkingPosition: 150                          //[Optional] The offset position to park thumbnail
        }
    };

    var jssor_slider1 = new $JssorSlider$(pID, options);

    jssor_slider1.$On($JssorSlider$.$EVT_PARK, function(slideIndex, fromIndex) {
        if ($(".other_out").length > 0) {
            if (jssor_slider1.$SlidesCount() == (slideIndex + 1)) {
                $(".other_out").show();
                $(".css_" + pID).html(jssor_slider1.$SlidesCount() - 1);
            }
            else {
                $(".css_" + pID).html(Math.floor(slideIndex + 1));
            }
        }
        else {
            $(".css_" + pID).html(Math.floor(slideIndex + 1));
        }
    });

    //responsive code begin
    //you can remove responsive code if you don't want the slider scales while window resizes
    function ScaleSlider() {
        var parentWidth = jssor_slider1.$Elmt.parentNode.clientWidth;
        if (parentWidth)
            jssor_slider1.$ScaleWidth(Math.max(Math.min(parentWidth, 600), 300));
        else
            window.setTimeout(ScaleSlider, 30);

        $("#" + pID + " > div > div ").css("border", "");
        $("#ti_ad_EXP1").hide();
    }
    ScaleSlider();

    this.GotoIdx = function(pIdx) {
        jssor_slider1.$GoTo(pIdx);
    }

    $(window).bind("load", ScaleSlider);
    $(window).bind("resize", ScaleSlider);
    $(window).bind("orientationchange", ScaleSlider);
}

// 카드뉴스 날개
function ShowCardWing(pBool, pObj) {
    if (pBool) {
        $(pObj).parent().next().show();
        $(pObj).addClass("on");
        $(pObj).attr("onclick", "ShowCardWing(false, this)");
    }
    else {
        $(pObj).parent().next().hide();
        $(pObj).removeClass("on");
        $(pObj).attr("onclick", "ShowCardWing(true, this)");
    }
}



$(function() {


    if ($(".gimage").length >= 7)
        $(".gimage:first").click();
    else
        $(".gimage:first").click();

    // 슬라이드 카드뉴스 섬네일 사이즈 변경
    if ($("img[u='thumb']").length > 0 && $(".photoslide_out").length > 0) {
        $("img[u='thumb']").css("width", "");
        $("img[u='thumb']").css("height", "");
        $("img[u='thumb']").css("max-height", "144px");
        $("img[u='thumb']").css("max-width", "144px");
    }
    
    // 하단 공유 단축URL
    if ($("input[id$='hdnCNTN_CD']").val() != "" && typeof Clipboard != "undefined") {
        var pShortUrl = GetShortUrl($("input[id$='hdnCNTN_CD']").val(), "");
        
        $("#btn_else_shorturl").val(pShortUrl);
        
        $("#copy-button4").attr('data-clipboard-text',pShortUrl);
        $("#btn_copy").attr('data-clipboard-text',pShortUrl);
        $("#btn_copy2").attr('data-clipboard-text',pShortUrl);
        
        var clipboard = new Clipboard("#btn_copy");        var clipboard2 = new Clipboard("#btn_copy2");
        var clipboard3 = new Clipboard("#copy-button4");
    }
}); 

function OpenShare() {
    $(".btn_else").toggle();    
}       
